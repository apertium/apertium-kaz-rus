<?xml version="1.0" encoding="UTF-8"?>
<!-- -*- nxml -*- -->

<!-- This file recklessly hacked from tat-rus @Almaty 20141127-->
<!-- Some rules will be commented out for the time being -->


<!-- Tests are run by './qa.sh t1x' command.
     INPUT is the output of lexical selection,
     OUTPUT is the expected output of this transfer module.

     Also make sure to run './qa.sh' (with no arguments)
     before committing to svn. -->

<transfer default="chunk">

  <section-def-cats>
<def-cat n="thousand-etc">
      <cat-item lemma="мың" tags="num"/>
      <cat-item lemma="миллион" tags="num"/>
      <cat-item lemma="миллиард" tags="num"/>
    </def-cat>
<def-cat n="cat_prn">
 <cat-item tags="prn.n.sg.nom"/>
 </def-cat> 
<def-cat n="v-shakyr">
<cat-item lemma="шақыр" tags="v.tv.*"/>
<cat-item lemma="шақыр" tags="v.tv"/>
 </def-cat>


<def-cat n="verb-nonfin-ger_bar">
<cat-item lemma="бар" tags="v.*.ger_past.px1sg.*"/>
<cat-item lemma="бар" tags="v.*.ger_past.px2sg.*"/>
 </def-cat>
<def-cat n="v-coop-ger_gpr"> 
      <cat-item tags="v.*.ger"/>
      <cat-item tags="v.*.ger.*"/>
      <cat-item tags="v.*.coop.ger"/>
      <cat-item tags="v.*.coop.ger.*"/>
      <cat-item tags="v.*.coop.ger_abs"/>
      <cat-item tags="v.*.coop.ger_abs.*"/>
      <cat-item tags="v.*.coop.ger_past"/>
      <cat-item tags="v.*.coop.ger_past.*"/>
      <cat-item tags="v.*.coop.gpr_past"/>
      <cat-item tags="v.*.coop.gpr_past.*"/>
      <cat-item tags="v.*.coop.ger_perf"/>
      <cat-item tags="v.*.coop.ger_perf.*"/>
      <cat-item tags="v.*.coop.gpr_impf"/>
      <cat-item tags="v.*.coop.gpr_impf.*"/>
      <cat-item tags="v.*.coop.gpr_ppot"/>
      <cat-item tags="v.*.coop.gpr_ppot.*"/>
      <cat-item tags="v.*.coop.gpr_pot"/>
      <cat-item tags="v.*.coop.gpr_pot.*"/>
      <cat-item tags="v.*.coop.gpr_fut"/>
      <cat-item tags="v.*.coop.gpr_fut.*"/>
      <cat-item tags="v.*.coop.ger_fut"/>
      <cat-item tags="v.*.coop.ger_fut.*"/>
   </def-cat>
    <def-cat n="v-coop-neg-ger_gpr">
      <cat-item tags="v.*.neg.ger"/>
      <cat-item tags="v.*.neg.ger.*"/>
      <cat-item tags="v.*.coop.neg.ger"/>
      <cat-item tags="v.*.coop.neg.ger.*"/>
      <cat-item tags="v.*.coop.neg.ger_abs"/>
      <cat-item tags="v.*.coop.neg.ger_abs.*"/>
      <cat-item tags="v.*.coop.neg.gpr_pot"/>
      <cat-item tags="v.*.coop.neg.gpr_pot.*"/>
      <cat-item tags="v.*.coop.neg.gpr_ppot"/>
      <cat-item tags="v.*.coop.neg.gpr_ppot.*"/>
      <cat-item tags="v.*.coop.neg.gpr_impf"/>
      <cat-item tags="v.*.coop.neg.gpr_impf.*"/>
      <cat-item tags="v.*.coop.neg.gpr_past"/>
      <cat-item tags="v.*.coop.neg.gpr_past.*"/>
      <cat-item tags="v.*.coop.neg.ger_past"/>
      <cat-item tags="v.*.coop.neg.ger_past.*"/>
      <cat-item tags="v.*.coop.neg.ger_perf"/>
      <cat-item tags="v.*.coop.neg.ger_perf.*"/>
      <cat-item tags="v.*.coop.neg.gpr_fut"/>
      <cat-item tags="v.*.coop.neg.gpr_fut.*"/>
      <cat-item tags="v.*.coop.neg.ger_fut"/>
      <cat-item tags="v.*.coop.neg.ger_fut.*"/>
   </def-cat>
<def-cat n="v-pass-ger_gpr"> 
      <cat-item tags="v.*.pass.ger_abs"/>
      <cat-item tags="v.*.pass.ger_abs.*"/>
      <cat-item tags="v.*.pass.ger_past"/>
      <cat-item tags="v.*.pass.ger_past.*"/>
      <cat-item tags="v.*.pass.ger_ppot"/>
      <cat-item tags="v.*.pass.ger_ppot.*"/>
      <cat-item tags="v.*.pass.ger_fut"/>
      <cat-item tags="v.*.pass.ger_fut.*"/>
      <cat-item tags="v.*.pass.ger_impf"/>
      <cat-item tags="v.*.pass.ger_impf.*"/>
      <cat-item tags="v.*.pass.gpr_past"/>
      <cat-item tags="v.*.pass.gpr_past.*"/>
      <cat-item tags="v.*.pass.ger_perf"/>
      <cat-item tags="v.*.pass.ger_perf.*"/>
      <cat-item tags="v.*.pass.gpr_impf"/>
      <cat-item tags="v.*.pass.gpr_impf.*"/>
      <cat-item tags="v.*.pass.gpr_ppot"/>
      <cat-item tags="v.*.pass.gpr_ppot.*"/>
      <cat-item tags="v.*.pass.gpr_pot"/>
      <cat-item tags="v.*.pass.gpr_pot.*"/>
      <cat-item tags="v.*.pass.gpr_fut"/>
      <cat-item tags="v.*.pass.gpr_fut.*"/>
   </def-cat>
    <def-cat n="v-pass-neg-ger_gpr">
      <cat-item tags="v.*.pass.neg.ger"/>
      <cat-item tags="v.*.pass.neg.ger_abs"/>
      <cat-item tags="v.*.pass.neg.ger_abs.*"/>
      <cat-item tags="v.*.pass.neg.ger_past"/>
      <cat-item tags="v.*.pass.neg.ger_past.*"/>
      <cat-item tags="v.*.pass.neg.ger_ppot"/>
      <cat-item tags="v.*.pass.neg.ger_ppot.*"/>
      <cat-item tags="v.*.pass.neg.ger_fut"/>
      <cat-item tags="v.*.pass.neg.ger_fut.*"/>
      <cat-item tags="v.*.pass.neg.ger_impf"/>
      <cat-item tags="v.*.pass.neg.ger_impf.*"/>
      <cat-item tags="v.*.pass.neg.gpr_pot"/>
      <cat-item tags="v.*.pass.neg.gpr_pot.*"/>
      <cat-item tags="v.*.pass.neg.gpr_ppot"/>
      <cat-item tags="v.*.pass.neg.gpr_ppot.*"/>
      <cat-item tags="v.*.pass.neg.gpr_impf"/>
      <cat-item tags="v.*.pass.neg.gpr_impf.*"/>
      <cat-item tags="v.*.pass.neg.gpr_past"/>
      <cat-item tags="v.*.pass.neg.gpr_past.*"/>
      <cat-item tags="v.*.pass.neg.ger_past"/>
      <cat-item tags="v.*.pass.neg.ger_past.*"/>
      <cat-item tags="v.*.pass.neg.ger_perf"/>
      <cat-item tags="v.*.pass.neg.ger_perf.*"/>
      <cat-item tags="v.*.pass.neg.gpr_fut"/>
      <cat-item tags="v.*.pass.neg.gpr_fut.*"/>
      <cat-item tags="v.*.neg.ger_abs.*"/>
      <cat-item tags="v.*.neg.ger_abs"/>
   </def-cat>
 
<def-cat n="CAT__adj_">
    <cat-item tags="adj.*"/>
    <cat-item tags="adj"/>
  </def-cat>
<def-cat n="CAT__n_">
    <cat-item tags="n.*"/>
    <cat-item tags="n"/>
  </def-cat>
<def-cat n="CAT__HASGENDER_NUMBER"><cat-item tags="*.m.*"/><cat-item tags="*.f.*"/><cat-item tags="*.sg.*"/><cat-item tags="*.pl.*"/></def-cat> 
 <def-cat n="CAT__ND_GD">
    <cat-item tags="*.mf.*"/>
    <cat-item tags="*.sp.*"/>
    <cat-item tags="*.mf.sp.*"/>
    <cat-item tags="*.sp.mf.*"/>
    <cat-item tags="*.mf.*.sp.*"/>
    <cat-item tags="*.sp.*.mf.*"/>
  </def-cat>
<def-cat n="CAT__v_">
    <cat-item tags="v.*"/>
    <cat-item tags="v"/>
  </def-cat>

<def-cat n="CAT__post_">
    <cat-item tags="post.*"/>
    <cat-item tags="post"/>
  </def-cat>

<def-cat n="v-fut">
      <cat-item tags="v.*.fut.*"/>
         </def-cat>
<def-cat n="v-pass-fut">
      <cat-item tags="v.*.pass.fut.*"/>
      <cat-item tags="v.*.pass.fut"/>
       <cat-item tags="v.*.pass.*.fut.*"/>
      <cat-item tags="v.*.pass.*.fut"/>
         </def-cat>

<def-cat n="edi">
 <cat-item lemma="е" tags="cop.ifi.p3.*"/>
      <cat-item lemma="е" tags="cop.ifi.*.*"/>
    </def-cat>

<def-cat n="v-fut-neg">
      <cat-item tags="v.*.neg.fut.*.*"/>
         </def-cat>
<def-cat n="budu-vbser"> <!-- past and present tense -->
      <cat-item tags="vbser.fut.*"/>
      <cat-item tags="vbser.fut"/>      
    </def-cat> 

 <def-cat n="vaux">
      <cat-item tags="vaux.*"/>
    </def-cat>

<def-cat n="atym_pers-verb"> <!-- past and present tense -->
      <cat-item lemma="ат" tags="n.px1sg.nom.*"/>
      <cat-item lemma="ат" tags="n.px2sg.nom.*"/>
      <cat-item lemma="ат" tags="n.px3sg.nom.*"/>
      

    </def-cat>
    <def-cat n="n-poss">
      <cat-item tags="n.*.loc.subst.*"/>
     </def-cat>
    <def-cat n="n-poss-nom">
      <cat-item tags="n.*.nom"/>
      </def-cat>
    <def-cat n="v-ing">
      <cat-item tags="v.*.prc_perf"/>
      <cat-item tags="v.*.prc_impf"/>
      <cat-item tags="v.*.prc_perf.*"/>
      <cat-item tags="v.*.prc_impf.*"/>
     
    </def-cat>
<def-cat n="mumkin">
        <cat-item lemma="мүмкін" tags="adv"/>
        <cat-item lemma="мүмкін" tags="adv.*"/>
   </def-cat>
   <def-cat n="v-gerund">
        <cat-item tags="v.tv.ger.*.*"/>
	<cat-item tags="v.iv.ger.*.*"/>
	<cat-item tags="v.tv.ger.px1sg.nom"/>
   </def-cat>
   <def-cat n="v-gerund-neg">
	<cat-item tags="v.tv.neg.ger.*.*"/>
	<cat-item tags="v.iv.neg.ger.*.*"/>
   </def-cat>
   <def-cat n="v-gerund-ing">
	<cat-item tags="v.*.ger.*"/> 
	<cat-item tags="v.*.ger.loc.attr"/>
	<cat-item tags="v.*.ger.abl"/>
	<cat-item tags="v.*.ger.acc"/>
	<cat-item tags="v.*.ger.*.*"/>
   </def-cat>
    <def-cat n="v-fin">
      <cat-item tags="v.*.aor.*"/>
      <cat-item tags="v.*.ifi.*"/>
      <cat-item tags="v.*.ifi.*.*"/>
      <cat-item tags="vaux.*.aor.*"/> 
      <cat-item tags="vaux.*.ifi.*"/>
    </def-cat>
    <def-cat n="v-fprc">
      <cat-item tags="v.tv.ifi.*.*"/>
      <cat-item tags="v.iv.ifi.*.*"/>
    </def-cat>
    <def-cat n="v-fprk">
      <cat-item tags="v.iv.aor.*.*"/>
      <cat-item tags="v.tv.aor.*.*"/>
    </def-cat>
    <def-cat n="emes">
      <cat-item lemma="е" tags="adv"/>
      <cat-item lemma="е" tags="adv.*"/>
      <cat-item lemma="е" tags="vaux"/>
      <cat-item lemma="е" tags="vaux.*"/>
      <cat-item lemma="е" tags="cop.neg"/>
      <cat-item lemma="е" tags="cop.neg.*"/>
      <cat-item lemma="е" tags="cop.neg.*.*"/>
      <cat-item lemma="е" tags="cop.neg.aor.*.*"/>
    </def-cat>
    <def-cat n="want">
      <cat-item tags="v.*.prc_vol.*.*"/>     
   </def-cat>
   <def-cat n="kel">
      <cat-item lemma="кел" tags="v.iv.aor.*.*"/>
      <cat-item lemma="кел" tags="v.tv.aor.*.*"/>
    </def-cat>
    <def-cat n="kel-ifi">
      <cat-item lemma="кел" tags="v.iv.ifi.*.*"/>
      <cat-item lemma="кел" tags="v.tv.ifi.*.*"/>
    </def-cat>
   <def-cat n="kel-neg">
      <cat-item lemma="кел" tags="v.iv.neg.aor.*.*"/>
      <cat-item lemma="кел" tags="v.tv.neg.aor.*.*"/>
    </def-cat>
    <def-cat n="kel-ifi-neg">
      <cat-item lemma="кел" tags="v.iv.neg.ifi.*.*"/>
      <cat-item lemma="кел" tags="v.tv.neg.ifi.*.*"/>
    </def-cat>


<def-cat n="v-ing1">
      <cat-item tags="v.*.aor"/>
      <cat-item tags="v.*.aor.*"/>
    <!--  <cat-item tags="v.*.ifi"/>
      <cat-item tags="v.*.ifi.*"/>-->
     
     

    </def-cat>
<def-cat n="v-ing2">
     
      <cat-item tags="v.*.gna_cond"/>
      <cat-item tags="v.*.gna_cond.*"/>
      <cat-item tags="v.*.prc_cond.*"/>
      <cat-item tags="v.*.prc_cond"/>
      

    </def-cat>
    <def-cat n="v-ing3">
      <cat-item tags="v.*.opt"/>
      <cat-item tags="v.*.opt.*"/>
     
    <!--
      <cat-item tags="v.*.coop"/>
      <cat-item tags="v.*.coop.*"/> 
      <cat-item tags="v.*.pass"/>
      <cat-item tags="v.*.pass.*"/> -->

          </def-cat>
 <def-cat n="v-ing4">
      <cat-item tags="v.*.pih"/>
      <cat-item tags="v.*.pih.*"/>

    </def-cat>

    <def-cat n="v-ing5">
       <cat-item tags="v.*.gna_after"/>
      <cat-item tags="v.*.gna_after.*"/>
      <cat-item tags="v.*.gna9"/>
      <cat-item tags="v.*.gna_perf"/>
       <cat-item tags="v.*.prc_plan"/>
      <cat-item tags="v.*.prc_plan.*"/>
      <cat-item tags="v.*.prc_perf"/>
      <cat-item tags="v.*.prc_perf.*"/>
       <cat-item tags="v.*.prc_impf"/>
      <cat-item tags="v.*.prc_impf.*"/>
    </def-cat>
    <def-cat n="v-ing6">
      <cat-item tags="v.*.neg"/>
      <cat-item tags="v.*.neg.*"/>

    </def-cat>
   <def-cat n="v-ing8">
      <cat-item tags="v.*.ifi."/>
      <cat-item tags="v.*.ifi.*"/>

    </def-cat>
     <def-cat n="v-ing7">
      <cat-item tags="v.*.evid"/>
      <cat-item tags="v.*.evid.*"/>

    </def-cat>

    <def-cat n="v-coop-evid">
      <cat-item tags="v.*.coop.*.evid"/>
      <cat-item tags="v.*.coop.*.evid.*"/>

    </def-cat>
  <def-cat n="v-pass-ifi">
      <cat-item tags="v.*.pass.ifi"/>
      <cat-item tags="v.*.pass.ifi.*"/>
      <cat-item tags="v.*.pass.neg.ifi"/>
      <cat-item tags="v.*.pass.neg.ifi.*"/>

    </def-cat>

 <def-cat n="prn1">
<cat-item tags="prn.pers"/>
<cat-item tags="prn.pers.*"/>
<cat-item tags="prn.pers.p1"/>
         </def-cat>

           <def-cat n="prn2">
<cat-item tags="prn.pos"/>
<cat-item tags="prn.pos.*"/>
    </def-cat>

    <def-cat n="prn_vars">
     <!--  <cat-item lemma="ғой" tags="mod_ass"/>
      -->
       <cat-item lemma="ғана" tags="postadv"/>
      <cat-item lemma="шығар" tags="mod"/>
    </def-cat>
    <def-cat n="prn_vars1">
      <cat-item lemma="ғой" tags="mod_ass"/>
      <cat-item lemma="мекен" tags="qst"/>
    </def-cat>
    <def-cat n="v_vars">
      <cat-item lemma="-ақ" tags="postadv"/>
      <cat-item lemma="шығар" tags="mod"/>
      <cat-item lemma="да" tags="postadv"/>
      <cat-item lemma="да" tags="cnjcoo"/>
      <cat-item lemma="ғана" tags="postadv"/>
      <cat-item lemma="ма" tags="qst"/>
      <cat-item lemma="мекен" tags="qst"/>
      <cat-item lemma="ғой" tags="mod_ass"/>
    </def-cat>
<!--<def-cat n="NP">
      <cat-item tags="np.ant.*"/>
</def-cat>-->
    <def-cat n="n">
      <cat-item tags="n"/>
      <cat-item tags="n.*"/>
      <cat-item tags="np.*"/>
     <!-- <cat-item tags="prn.*"/>
      <cat-item tags="adj.subst"/>
      <cat-item tags="adj.subst.*"/>
      <cat-item tags="adj.comp.subst"/>
      <cat-item tags="adj.comp.subst.*"/>
      <cat-item tags="adv.subst"/>
      <cat-item tags="adv.subst.*"/>-->
    </def-cat>
    <def-cat n="n-attr-or-gen">
      <cat-item tags="n.attr"/>
      <cat-item tags="n.gen"/>
      <cat-item tags="n.pl.nom"/>
      <cat-item tags="n.pl.gen"/>
      <cat-item tags="np.*.attr"/>
      <cat-item tags="np.*.nom"/>
      <cat-item tags="np.*.gen"/>
      <cat-item tags="np.*.*.nom"/>
      <cat-item tags="np.*.*.gen"/>
      <cat-item tags="v.*.ger.nom"/>
    </def-cat>
    <def-cat n="nom">
       <cat-item tags="n.*"/>
      <cat-item tags="np.top"/>
      <cat-item tags="np.al"/>
      <cat-item tags="np.al.*"/>
      <cat-item tags="np.cog"/>
      <cat-item tags="np.cog.*"/>
      <cat-item tags="np.*"/>
      <cat-item tags="np.ant.*"/>
      <cat-item tags="np.top.*"/>
    </def-cat>

    <def-cat n="np-ant">
      <cat-item tags="np.ant"/>
      <cat-item tags="np.ant.*"/>
    </def-cat>
    <def-cat n="np-cog">
      <cat-item tags="np.cog"/>
      <cat-item tags="np.cog.*"/>
    </def-cat>

 <def-cat n="prn">
<cat-item tags="prn"/>
<cat-item tags="prn.dem"/>
<cat-item tags="prn.dem.*"/>
<cat-item tags="prn.ind.*"/>
<cat-item tags="prn.neg.*"/>
<cat-item tags="prn.qnt.*.*"/>
         </def-cat>

<def-cat n="prn-ref">
<cat-item tags="prn.ref"/>
<cat-item tags="prn.ref.*"/>
         </def-cat>
    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>
    <def-cat n="n-nom">
      <cat-item tags="n.nom"/>
    </def-cat>
    <def-cat n="n-gen">
      <cat-item tags="n.gen"/>
      <cat-item tags="np.*.*.gen"/>
    </def-cat>
    <def-cat n="n-loc">
      <cat-item tags="n.loc"/>
      <cat-item tags="n.pl.loc"/>
    </def-cat>
    <def-cat n="n-px3sp-nom">
      <cat-item tags="n.px3sp.nom"/>
    </def-cat>
    <def-cat n="n-px3sp">
      <cat-item tags="n.px3sp.*"/>
      <cat-item tags="n.pl.px3sp.*"/>
    </def-cat>
    <def-cat n="n-px3sp-gen">
      <cat-item tags="n.px3sp.*"/>
      <cat-item tags="n.px3sp.*.*.gen"/>
    </def-cat>
    <def-cat n="n-px">
      <cat-item tags="n.px1sg.*"/>
      <cat-item tags="n.*.px1sg.*"/>
      <cat-item tags="n.px2sg.*"/>
      <cat-item tags="n.*.px2sg.*"/>
      <cat-item tags="n.px3sp.*"/>
      <cat-item tags="n.*.px3sp.*"/>
      <cat-item tags="n.px1pl.*"/>
      <cat-item tags="n.*.px1pl.*"/>
      <cat-item tags="n.px2pl.*"/>
      <cat-item tags="n.*.px2pl.*"/>
    </def-cat>
    <def-cat n="npost">
      <cat-item tags="n.px3sp.*"/>
    </def-cat>
    <def-cat n="npost-loc">
      <cat-item tags="n.px3sp.loc.attr"/>
    </def-cat>
    <def-cat n="npost-loc-attr">
      <cat-item lemma="аст" tags="n.px3sp.loc.attr"/> 
    </def-cat>
    <def-cat n="prn-gen">
      <cat-item tags="prn.pers.*.*.gen"/>
      <cat-item tags="prn.pers.*.*.gen.@ADVL→"/>
    </def-cat>
    <def-cat n="adj">
      <cat-item tags="adj"/>
      <cat-item tags="adj.comp"/>
      <cat-item tags="adj.advl"/>
      <cat-item tags="adj.comp.advl"/>
      <cat-item tags="adv.attr"/>
<cat-item tags="adj.subst"/>
      <cat-item tags="adj.subst.*"/>
      <cat-item tags="adj.comp.subst"/>
      <cat-item tags="adj.comp.subst.*"/>
    </def-cat>

<def-cat n="adj-sim">
      <cat-item tags="adj.*.sim"/>
      <cat-item tags="adj.*.sim.*"/>
    </def-cat>

<def-cat n="tomorrow-adv">
           <cat-item lemma="ертең" tags="adv"/>
    </def-cat>
    <def-cat n="det">
      <cat-item tags="det.*"/>
    </def-cat>
    <def-cat n="num">
      <cat-item lemma="жиырма" tags="num"/>
      <cat-item lemma="алты" tags="num"/>
      <cat-item lemma="жеті" tags="num"/>
      <cat-item lemma="үш" tags="num"/>  
      <cat-item lemma="төрт" tags="num"/>
      <cat-item lemma="бес" tags="num"/>
      <cat-item lemma="сегіз" tags="num"/>
      <cat-item lemma="тоғыз" tags="num"/>
      <cat-item lemma="он" tags="num"/>
      <cat-item lemma="он бір" tags="num"/>
      <cat-item lemma="он екі" tags="num"/>
      <cat-item lemma="он алты" tags="num"/>
      <cat-item lemma="он бес" tags="num"/>

    <cat-item lemma="он жеті" tags="num"/>
    <cat-item lemma="он сегіз" tags="num"/>  
    <cat-item lemma="он тоғыз" tags="num"/>
    <cat-item lemma="он төрт" tags="num"/>
    <cat-item lemma="он үш" tags="num"/>
    <cat-item tags="num.*"/>
    </def-cat>
  <def-cat n="num1">  
      <cat-item lemma="2" tags="num"/>
      <cat-item lemma="3" tags="num"/>
<cat-item lemma="2" tags="num.subst.nom"/>
<cat-item lemma="3" tags="num.subst.nom"/>
    </def-cat> 
    <def-cat n="num-det">
      <cat-item tags="num.ord"/>
      <cat-item tags="num.itg"/>
    </def-cat>
    <def-cat n="num-ord">
            <cat-item tags="num.ord"/>
        </def-cat>
    <def-cat n="num-subst">
            <cat-item tags="num.subst"/>
        </def-cat>
    <def-cat n="cop">
      <cat-item tags="cop.*"/>
    </def-cat>
    <def-cat n="cop-p3">
      <cat-item tags="cop.p3.sg"/>
      <cat-item tags="cop.p3.pl"/>
    </def-cat>
    <def-cat n="cop-pres">
      <cat-item tags="cop.p1.*"/>
      <cat-item tags="cop.p2.*"/>
      <cat-item tags="cop.p3.*"/>
      <cat-item tags="cop.neg.p3.*"/>
    </def-cat>
    <def-cat n="cop-neg">
      <cat-item tags="cop.neg.*"/>
      <cat-item tags="vaux.pres.*"/>
      <cat-item tags="cop.neg"/>
      <cat-item tags="vaux.pres"/>
    </def-cat>
    <def-cat n="cop-ifi">
      <cat-item tags="cop.ifi.*.*"/>
    </def-cat>
    <def-cat n="subj-pron">
       <cat-item tags="prn.subj.*"/>
       <cat-item tags="prn.subj.*.*"/>
    </def-cat>



<!--Zhadyra--><!--етістік болымсыз түріне-->
<def-cat n="v-neg-fin">
      <cat-item tags="v.*.neg.aor.*.*"/>
      <cat-item tags="v.*.neg.ifi.*.*"/>
      <cat-item tags="v.*.neg.fut2.*.*"/>

    </def-cat>

    <def-cat n="verbsform"> <!-- Aliya -->
      <cat-item tags="v.*.past.*"/>
      <cat-item tags="v.*.aor.*"/>
      <cat-item tags="v.*.ger.*"/> 
      <cat-item tags="v.*.imp.*"/>
      <cat-item tags="v.*.gna_impf"/>
      <cat-item tags="v.*.gna_impf.*"/>
    </def-cat>

    <def-cat n="verb-fin">
      <cat-item tags="v.*.pres.*"/>
      <cat-item tags="v.*.aor.*"/>
      <cat-item tags="v.*.ifi.*"/>
      <cat-item tags="v.*.past.*"/>
      <cat-item tags="v.*.fut.*"/>
      <cat-item tags="v.*.fut2.*"/>
      <cat-item tags="vaux.pres.*"/>
      <cat-item tags="vaux.neg.pres.*"/>
      <cat-item tags="vaux.ifi.*"/>
      <cat-item tags="vaux.neg.ifi.*"/>
      <cat-item tags="vaux.past.*"/>
      <cat-item tags="vaux.neg.past.*"/>
      <cat-item tags="cop.ifi.*"/>
      <cat-item tags="cop.past.*"/>
      <cat-item tags="cop.*.ifi.*"/>
      <cat-item tags="cop.*.past.*"/>
    </def-cat>
<def-cat n="verb-fin-imp">
      <cat-item tags="v.*.imp.*"/>
     </def-cat>
    <def-cat n="verb-fut">
      <cat-item tags="v.*.fut.*"/>
      <cat-item tags="v.*.fut2.*"/>
    </def-cat>
    <def-cat n="verb-past">
      <cat-item tags="v.*.past.*"/>
      <cat-item tags="vaux.past.*"/>
      <cat-item tags="vaux.neg.past.*"/>
      <cat-item tags="cop.past.*"/>
      <cat-item tags="cop.*.past.*"/>
    </def-cat>

    <def-cat n="verb-fin-fut-plan">
      <cat-item tags="v.*.fut_plan.*"/>
      <cat-item tags="v.*.neg.fut_plan.*"/>
      <cat-item tags="v.*.prc_fplan"/>  
      <cat-item tags="v.*.prc_fplan.*"/>
    </def-cat>
     <def-cat n="pers-verb-to-be"> <!-- past and present tense -->
      <cat-item tags="vbser.pres"/>
      <cat-item tags="vbser.pres.*"/>
      <cat-item tags="vbser.past"/>
      <cat-item tags="vbser.past.*"/>
<cat-item tags="vbser.fut"/>
      <cat-item tags="vbser.fut.*"/>
    </def-cat>
    <def-cat n="verb-nonfin">
      <cat-item tags="v.*.inf"/>
      <cat-item tags="v.*.prc_perf"/>
      <cat-item tags="v.*.prc_impf"/>
      <cat-item tags="v.*.prc_vol.*"/>
      <cat-item tags="v.*.prc_cond.*"/>
      <cat-item tags="v.*.prc_fplan"/>
      <cat-item tags="v.*.gna_perf"/>
      <cat-item tags="v.*.gna_cond.*"/>
      <cat-item tags="v.*.gna_until"/>
      <cat-item tags="v.*.gna_after"/>
      <cat-item tags="v.*.gpr_past"/>
      <cat-item tags="v.*.gpr_past.*"/>
      <cat-item tags="v.*.gpr_impf"/>
      <cat-item tags="v.*.gpr_impf.*"/>
      <cat-item tags="v.*.gpr_pot"/>
      <cat-item tags="v.*.gpr_pot.*"/>
      <cat-item tags="v.*.gpr_ppot"/>
      <cat-item tags="v.*.gpr_ppot.*"/>
      <cat-item tags="v.*.gpr_fut"/>
      <cat-item tags="v.*.gpr_fut.*"/>
      <cat-item tags="v.*.gpr_fut2"/>
      <cat-item tags="v.*.gpr_fut2.*"/>
      <cat-item tags="v.*.gpr_fut3"/>
      <cat-item tags="v.*.gpr_fut3.*"/>
      <cat-item tags="v.*.ger_perf.*"/>
      <cat-item tags="v.*.ger.*"/>
      <cat-item tags="v.*.ger_ppot.*"/>
      
      <cat-item tags="v.*.ger_fut.*"/>
      <cat-item tags="v.*.ger_fut2.*"/>
      <cat-item tags="v.*.ger_fut3.*"/>
      <cat-item tags="v.*.ger1"/>
      <cat-item tags="v.*.ger1.*"/>
      <cat-item tags="vaux.gna_after"/>
      <cat-item tags="vaux.*.gna_after"/>
      <cat-item tags="cop.ger_past.*"/>
      <cat-item tags="cop.*.ger_past.*"/>
      <cat-item tags="cop.ger_perf.*"/>
      <cat-item tags="cop.*.ger_perf.*"/>


        <cat-item tags="v.*.gpr_impf"/>
      <cat-item tags="v.*.gpr_impf.*"/>
      <cat-item tags="v.*.ger_impf"/>
      <cat-item tags="v.*.ger_impf.*"/>
      <cat-item tags="v.*.gpr_past"/>
      <cat-item tags="v.*.gpr_past.*"/>
      <cat-item tags="v.*.ger_past"/>
      <cat-item tags="v.*.ger_past.*"/>
      <cat-item tags="v.*.ger_perf"/>
      <cat-item tags="v.*.ger_perf.*"/>
      <cat-item tags="v.*.gpr_pot"/>
      <cat-item tags="v.*.gpr_pot.*"/>
      <cat-item tags="v.*.gpr_pot"/>
      <cat-item tags="v.*.gpr_pot.*"/>


    </def-cat>
    <def-cat n="verb-nonfin-gpr_fut">
      <cat-item tags="v.*.gpr_fut.*"/>
      <cat-item tags="v.*.*.gpr_fut.*"/>
    </def-cat>
<def-cat n="verb-nonfin-ger_past">
      <cat-item tags="v.*.ger_past.*"/>
      <cat-item tags="v.*.*.ger_past.*"/>
    </def-cat>

<def-cat n="kerek">
 <cat-item lemma="керек" tags="n"/>
      <cat-item lemma="керек" tags="n.*"/>
  <cat-item lemma="керек" tags="adj"/>
   <cat-item lemma="керек" tags="adj.*"/>
<cat-item lemma="керек" tags="vaux"/>
<cat-item lemma="керек" tags="vaux.*"/>
    </def-cat>
<def-cat n="cnjcoo">
      <cat-item tags="cnjcoo"/>
    </def-cat>
    <def-cat n="post">
      <cat-item tags="post"/>
    </def-cat>
    <def-cat n="post-or-npost">
      <cat-item tags="post"/>
      <cat-item tags="n.px3sp.*"/>
    </def-cat>
    <def-cat n="adv">
      <cat-item tags="adv"/>
      <cat-item tags="adv.itg"/>
    </def-cat>
    <def-cat n="qst">
      <cat-item tags="qst"/>
    </def-cat>
 <def-cat n="mod">
      <cat-item tags="mod"/>
    </def-cat>
 <def-cat n="mod_ass">
      <cat-item tags="mod_ass"/>
    </def-cat>
    <def-cat n="sent">
    <cat-item tags="sent"/>
    <cat-item tags="RESsent.sent"/>
  </def-cat>
  <def-cat n="any">
    <cat-item tags="*"/>
  </def-cat>
    <def-cat n="cm">
      <cat-item tags="cm"/>
    </def-cat>
<def-cat n="adj-subst">
<cat-item tags="adj.subst"/>
      <cat-item tags="adj.subst.*"/>
      <cat-item tags="adj.comp.subst"/>
      <cat-item tags="adj.comp.subst.*"/>
    </def-cat>
<def-cat n="adj-subst2">
     <cat-item tags="adj.subst.*"/>
      <cat-item tags="adj.subst.*.subst"/>
      <cat-item tags="adj.subst.*.subst.*"/>
    </def-cat>
<def-cat n="adj-comp">
      <cat-item tags="adj.comp.subst"/>
      <cat-item tags="adj.comp.subst.*"/>
      <cat-item tags="adj.comp.*"/>
      <cat-item tags="adj.comp"/>
    </def-cat>
 <def-cat n="postadv">
<cat-item tags="postadv"/>
    </def-cat>
 <def-cat n="verb-al">
	<cat-item lemma="ал" tags="v.iv.aor.*.*"/>
    </def-cat>
    <def-cat n="verb-al-ifi">
	<cat-item lemma="ал" tags="v.iv.ifi.*.*"/>
    </def-cat>
    <def-cat n="verb-al-neg">
	<cat-item lemma="ал" tags="v.iv.neg.aor.*.*"/>
    </def-cat>
    <def-cat n="verb-al-ifi-neg">
	<cat-item lemma="ал" tags="v.iv.neg.ifi.*.*"/>
    </def-cat>
 <def-cat n="vaux-pres">
      <cat-item tags="vaux.pres.*"/>
    </def-cat>

  </section-def-cats>

  <section-def-attrs>
    <def-attr n="a_n_poss">
      <attr-item tags="n"/>
      <attr-item tags="np"/>
      <attr-item tags="np.cog"/>
 <attr-item tags="np.ant"/>
      <attr-item tags="adj"/>
      <attr-item tags="adv"/>
      <attr-item tags="pred"/>
      <attr-item tags="pr"/>
      <attr-item tags="det"/>
      <attr-item tags="det.pos"/>
    </def-attr>
    <def-attr n="a_syntag">
      <attr-item tags="advl"/>
      <attr-item tags="attr"/>
      <attr-item tags="subst"/>
    </def-attr>
     <def-attr n="a_comp">
      <attr-item tags="comp"/>
    </def-attr>
    <def-attr n="a_SYNLABEL">
      <attr-item tags="@ADVL→"/>
    </def-attr>
 <def-attr n="a_postposition">
       <attr-item tags="post"/>
       <attr-item tags="n"/>
    </def-attr>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="np.ant"/>
      <attr-item tags="np.top"/>
      <attr-item tags="np.cog"/>
      <attr-item tags="prn.pers.p1"/>
      <attr-item tags="prn.pers.p2"/>
      <attr-item tags="prn.pers.p3"/>
      <attr-item tags="prn.dem"/>
      <attr-item tags="prn.def"/>
      <attr-item tags="prn.itg"/>
      <attr-item tags="prn.neg"/>
      <attr-item tags="prn.ind"/>
      <attr-item tags="prn.ref"/>
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.ref"/>
      <attr-item tags="num"/>
   <attr-item tags="abbr"/>
    </def-attr>
    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.def"/>
      <attr-item tags="num"/>
    </def-attr>
    <def-attr n="a_adj">
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
    </def-attr>
    <def-attr n="a_adv">
      <attr-item tags="adv"/>
    </def-attr>
 <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="det.ord"/>
    </def-attr>
    <def-attr n="a_pr">
      <attr-item tags="pr"/>
      <attr-item tags="adv.itg"/> <!-- for как -->
    </def-attr>
    <def-attr n="a_verb">
      <attr-item tags="vbmod"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vblex.impf"/>
      <attr-item tags="vblex.perf"/>
      <attr-item tags="vblex_dual"/>
      <attr-item tags="vbmod.impf.tv"/> <!-- Modal verbs already receive transitivity tags in rus.dix-->
      <attr-item tags="vbmod.impf.iv"/>
      <attr-item tags="vbmod.perf.tv"/>
      <attr-item tags="vbmod.perf.iv"/>
      </def-attr>

      <def-attr n="a_verb1">
      <attr-item tags="vbmod"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vblex.impf"/>
      <attr-item tags="vblex.perf"/>
      <attr-item tags="vblex_dual"/>
      <attr-item tags="vbmod.impf.tv"/> <!-- Modal verbs already receive transitivity tags in rus.dix-->
      <attr-item tags="vbmod.impf.iv"/>
      <attr-item tags="vbmod.perf.tv"/>
      <attr-item tags="vbmod.perf.iv"/>
      </def-attr>

      
<def-attr n="a_num_sp"> 
      <attr-item tags="sp"/>
 <attr-item tags="sp1"/>
    </def-attr>



<!--Zhadyra--><!--
<def-attr n="a_nonfin">
      <attr-item tags="prc_impf"/>
      <attr-item tags="prc_perf"/>
      <attr-item tags="prc_plan"/>

      <attr-item tags="gpr_past"/>
      <attr-item tags="gpr_impf"/>
      <attr-item tags="gpr_pot"/>
      <attr-item tags="gpr_ppot"/>
      <attr-item tags="gpr_fut"/>
      <attr-item tags="gpr_fut2"/>
      <attr-item tags="gpr_fut3"/>

      <attr-item tags="inf"/>
      <attr-item tags="ger1"/>
      <attr-item tags="ger"/>
      <attr-item tags="ger_past"/>
      <attr-item tags="ger_perf"/>
      <attr-item tags="ger_ppot"/>
      <attr-item tags="ger_abs"/>
      <attr-item tags="ger_fut"/>
      <attr-item tags="ger_fut2"/>
      <attr-item tags="ger_fut3"/>
      <attr-item tags="ger_impf"/>
      <attr-item tags="ger_abs"/>
    </def-attr>
-->

    <def-attr n="a_gender">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="nt"/>
      <attr-item tags="mf"/>
      <attr-item tags="mfn"/>
      <attr-item tags="GN"/>
    </def-attr>
    <def-attr n="a_anim">
      <attr-item tags="aa"/>
      <attr-item tags="nn"/>
      <attr-item tags="an"/>
    </def-attr>
    <def-attr n="a_poss">
      <attr-item tags="px1sg"/>
      <attr-item tags="px2sg"/>
      <attr-item tags="px3sg"/>
<attr-item tags="px4sg"/>
      <attr-item tags="px1pl"/>
      <attr-item tags="px2pl"/>
<attr-item tags="px3pl"/>
    </def-attr>
    <def-attr n="a_case">
      <attr-item tags="nom"/>
      <attr-item tags="gen"/>
      <attr-item tags="dat"/>
      <attr-item tags="acc"/>
      <attr-item tags="abl"/>
      <attr-item tags="loc"/>
      <attr-item tags="sim"/>
      <attr-item tags="ins"/>  <!-- what is this? -->
      <attr-item tags="prp"/>
      <attr-item tags="CD"/>
    </def-attr>
    <def-attr n="a_px">
      <attr-item tags="px"/>
    </def-attr>
    <def-attr n="a_nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="ND"/>
    </def-attr>
    <def-attr n="a_pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
      <attr-item tags="p4"/>
      <attr-item tags="p2.frm"/>
    </def-attr>
    <def-attr n="a_tense">
      <attr-item tags="pres"/>
      <attr-item tags="ifi"/>
      <attr-item tags="past"/>
      <attr-item tags="fut"/>
      <attr-item tags="fut2"/>
      <attr-item tags="ger"/>
      <attr-item tags="imp"/>
      <attr-item tags="cont"/>
      <attr-item tags="aor"/>
      <attr-item tags="pp"/>
      <attr-item tags="pprs"/>
      <attr-item tags="inf"/>
      <attr-item tags="ifi_evid"/>
      <attr-item tags="fut_plan"/>
      <attr-item tags="gna_impf"/>
      <attr-item tags="gna_perf"/>
    </def-attr>
    <def-attr n="a_kaz_perspron"> 
      <attr-item tags="prn.pers"/>
      <attr-item tags="prn.ind"/>
      <attr-item tags="prn.qnt"/>
    </def-attr>
    <def-attr n="a_neg">
      <attr-item tags="neg"/>
    </def-attr>
    <def-attr n="_neg">
      <attr-item tags="neg"/>
    </def-attr>
    <def-attr n="a_trans">
      <attr-item tags="tv"/>
      <attr-item tags="iv"/>
    </def-attr>
    <def-attr n="a_pass">
      <attr-item tags="pass"/>
    </def-attr>
     <def-attr n="a_coop">
      <attr-item tags="coop"/>
    </def-attr>
     <def-attr n="a_ord">
      <attr-item tags="ord"/>
    </def-attr>
    <def-attr n="a_aspec">
      <attr-item tags="perf"/>
      <attr-item tags="impf"/>
      <attr-item tags="dual"/>
    </def-attr>
    <def-attr n="a_formality">
      <attr-item tags="frm"/>
    </def-attr>

<def-attr n="a_pp-pprs">
      <attr-item tags="pp"/>
      <attr-item tags="pprs"/>
    </def-attr>


<def-attr n="a_tns">
      <attr-item tags="ifi"/>
      <attr-item tags="pres"/>
      <attr-item tags="aor"/>
      <attr-item tags="past"/>
      <attr-item tags="pri"/>
       <attr-item tags="prc_pers"/>
      <attr-item tags="imp"/>
      <attr-item tags="inf"/>
      <attr-item tags="ger"/>
      <attr-item tags="pprs"/>

      <attr-item tags="gna9"/>
      <attr-item tags="prc_impf"/>
      <attr-item tags="prc_perf"/>
      <attr-item tags="ger_past"/>
    </def-attr>
</section-def-attrs>

  <section-def-vars>
    <def-var n="sntype"/>
    <def-var n="number"/>
    <def-var n="negation"/>
    <def-var n="gender"/>
    <def-var n="case"/>
    <def-var n="tense"/>
    <def-var n="preposition"/>
    <def-var n="possessive"/>
<def-var n="pronoun"/>
    <def-var n="animacy"/>
    <def-var n="trans"/>
<def-var n="pptag"/> <!-- Will contain the tag of the next postpositional phrase generated (AdvP, GenP, etc.) -->
    <def-var n="genpp"/> <!-- yes: will generate postposition; no= won't -->
   <def-var n="postposition_lu"/>
  </section-def-vars>

  <section-def-lists>

    <def-list n="np-top-hypernym">
      <list-item v="шәһәр"/>
    </def-list>

    <def-list n="nouns-with-loc-case">
      <list-item v="год"/>
      <list-item v="сад"/>
      <list-item v="угол"/>
    </def-list>

    <def-list n="nouns-most-likely-used-with-ordinal-num">
      <list-item v="статья"/>
      <list-item v="глава"/>
      <list-item v="параграф"/>
    </def-list>

  </section-def-lists>

  <section-def-macros>
<def-macro n="f_bcond" npar="2">
<!--To test whether a blank contains format information.
If no format information is present it is removed. -->
  <choose>
    <when>
      <test>
        <not>
	 <equal>
	   <b pos="1"/>
	   <lit v=" "/>
	 </equal>
	 </not>
      </test>
      <out>
        <b pos="1"/>
      </out>
    </when>
  </choose>
</def-macro>


<def-macro n="f_genre_num" npar="1">
<!--To set the global value storing the TL genre of the last seen word. -->
  <choose>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_gender"/>
          <lit-tag v="m"/>
        </equal>
      </test>
      <let><var n="gender"/><lit-tag v="m"/></let>
    </when>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_gender"/>
          <lit-tag v="f"/>
        </equal>
      </test>
      <let><var n="gender"/><lit-tag v="f"/></let>
    </when>
  </choose>
  <choose>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="sg"/>
        </equal>
      </test>
      <let><var n="number"/><lit-tag v="sg"/></let>
    </when>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="pl"/>
        </equal>
      </test>
      <let><var n="number"/><lit-tag v="pl"/></let>
    </when>
  </choose>
</def-macro>


<def-macro n="f_set_genre_num" npar="1">
<!--To set the genre of those words with GD, and the number of those words with ND. -->
<!--This is only used in no alignment template at all is applied. -->
  <choose>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_gender"/>
          <lit-tag v="GD"/>
        </equal>
      </test>
      <choose>
        <when>
          <test>
            <equal>
              <var n="gender"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let><clip pos="1" side="tl" part="a_gender"/><lit-tag v="f"/></let>
        </when>
        <otherwise>
          <let><clip pos="1" side="tl" part="a_gender"/><lit-tag v="m"/></let>
        </otherwise>
      </choose>
    </when>
  </choose>
  <choose>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="ND"/>
        </equal>
      </test>
      <choose>
        <when>
          <test>
            <equal>
              <var n="number"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></let>
        </when>
        <otherwise>
          <let><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></let>
        </otherwise>
      </choose>
    </when>
  </choose>
</def-macro>


<def-macro n="remove-poss" npar="1"> 
     
                 <let><clip pos="1" side="tl" part="a_poss"/><lit v=""/></let>
            
</def-macro>


 <def-macro n="conv-temps1" npar="1">
          <choose> 
            <when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_tns"/><lit-tag v="ifi"/></equal>
               </test>
               <let><clip pos="1" side="tl" part="a_tns"/><lit-tag v="past"/></let>
              </when> 
            <when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_tns"/><lit-tag v="aor"/></equal>
               </test>
               <let><clip pos="1" side="tl" part="a_tns"/><lit-tag v="pres"/></let>
                </when>

               <when>
                   <test>
                   <equal><clip pos="1" side="sl" part="a_tns"/><lit-tag v="imp"/></equal>
                      </test>
                 <let><clip pos="1" side="sl" part="a_tns"/><lit-tag v="pres"/></let>

                </when>

          </choose> 
              

    </def-macro>

<!-- SECTION: Noun phrases -->

    <def-macro n="return-number-of-sl-word" npar="1">
      <!-- arg.1 any nominal -> v_number
           Sets the 'number' variable to '<pl>' if the word contains the '<pl>' tag,
           to '<sg>' otherwise (in context of Tatar, singular is the absence of the
           plural affix).
           GIVEN:  ^мектеп<n><nom>/школа<n><f><nn><nom>$
           EXPECT: number = "<sg>"
           GIVEN:  ^мектеп<n><pl><nom>/школа<n><f><nn><pl><nom>$
           EXPECT: number = "<pl>" -->
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/>
            </equal>
          </test>
          <let><var n="number"/><lit-tag v="pl"/></let>
        </when>
        <otherwise>
          <let><var n="number"/><lit-tag v="sg"/></let>
        </otherwise>   
      </choose>
    </def-macro>

    <def-macro n="set-animacy" npar="1">
      <!-- arg.1 noun -> v_animacy
	   Selects a value for the 'animacy' variable to be used later to build a determiner.
           (if gender is masculin or number is plural, in accusative we want to take the
           animacy tag of the noun, otherwise the variabe 'animacy' is set to 'an').-->
      <choose>
        <when>
          <test>
            <and>
              <equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="acc"/></equal>
              <or>
                <equal><clip pos="1" side="tl" part="a_gender"/><lit-tag v="m"/></equal>
                <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>
              </or>
            </and>
          </test>
          <let><var n="animacy"/><clip pos="1" side="tl" part="a_anim"/></let>
        </when>
        <otherwise>
          <let><var n="animacy"/><lit-tag v="an"/></let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="convert-poss-affix-to-poss-determiner" npar="1">
      <!-- arg.1 any nominal -> v_possessive
           Sets the value of the 'possessive' variable to a possessive determiner if the nominal
           contains a possessive affix.
           GIVEN:  ^абый<n><px1sg><nom>/брат<n><m><aa><px1sg><nom>$
           EXPECT: possessive = ^мой<det><pos><m><an><sg><nom>$
           GIVEN:  ^абый<n><px1sg><acc>/брат<n><m><aa><px1sg><acc>$
           EXPECT: possessive = ^мой<det><pos><m><aa><sg><acc>$ -->
      <let><var n="possessive"/><lit v=""/></let>
      <call-macro n="set-animacy">
	<with-param pos="1"/>
      </call-macro>
      <choose>
        <when>
          <test><and>
            <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>
            <equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px1sg"/></equal>
          </and></test>
          <let><var n="possessive"/>
          <concat><lu>
            <lit v="мой"/>
            <lit-tag v="det"/><lit-tag v="pos"/>
            <clip pos="1" side="tl" part="a_gender"/>
            <var n="animacy"/>
            <clip pos="1" side="tl" part="a_nbr"/>
            <clip pos="1" side="tl" part="a_case"/>
            </lu>
          </concat>
          </let>  
        </when>
        <when>
	  <test><and>
	    <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>
	    <equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px1pl"/></equal>
          </and></test>
          <let><var n="possessive"/>
          <concat><lu>
            <lit v="наш"/>
            <lit-tag v="det"/><lit-tag v="pos"/>
            <lit-tag v="mfn"/>
            <var n="animacy"/>
            <clip pos="1" side="tl" part="a_nbr"/>
            <clip pos="1" side="tl" part="a_case"/>
            </lu>
          </concat>
          </let>  
        </when>
        <when>
          <test><and>
            <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>
            <equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px2sg"/></equal>
          </and></test>
          <let><var n="possessive"/>
          <concat><lu>
            <lit v="твой"/>
            <lit-tag v="det"/><lit-tag v="pos"/>
            <clip pos="1" side="tl" part="a_gender"/>
            <var n="animacy"/>
            <clip pos="1" side="tl" part="a_nbr"/>
            <clip pos="1" side="tl" part="a_case"/>
            </lu>
          </concat>
          </let>  
        </when>
<when>
          <test><and>
            <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>
            <equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px4sg"/></equal>
          </and></test>
          <let><var n="possessive"/>
          <concat><lu>
            <lit v="ваш"/>
            <lit-tag v="det"/><lit-tag v="pos"/>
            <clip pos="1" side="tl" part="a_gender"/>
            <var n="animacy"/>
            <clip pos="1" side="tl" part="a_nbr"/>
            <clip pos="1" side="tl" part="a_case"/>
            </lu>
          </concat>
          </let>  
        </when>
        <when>
          <test><and>
            <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>
            <equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px2sg"/></equal>
          </and></test>
          <let><var n="possessive"/>
          <concat><lu>
            <lit v="ваш"/>
            <lit-tag v="det"/><lit-tag v="pos"/>
           <lit-tag v="mfn"/>
            <var n="animacy"/>
            <clip pos="1" side="tl" part="a_nbr"/>
            <clip pos="1" side="tl" part="a_case"/>
            </lu>
          </concat>
          </let>  
        </when>
 <when>
          <test><and>
            <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>
            <equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px3sg"/></equal>
          </and></test>
          <let><var n="possessive"/>
          <concat> <lu>
            <lit v="его"/>
            <lit-tag v="det"/><lit-tag v="pos"/>
            <clip pos="1" side="tl" part="a_gender"/>
            <var n="animacy"/>
            <clip pos="1" side="tl" part="a_nbr"/>
            <clip pos="1" side="tl" part="a_case"/>
            </lu>
          </concat>
          </let>  
        </when>
      </choose>
    </def-macro>

<def-macro n="convert-pers-affix-to-pers-determiner" npar="1">
      <!-- arg.1 any nominal -> v_pronoun
           Sets the value of the 'pronoun' variable to a pronoun determiner if the nominal
           contains a pronoun affix.
           GIVEN:  ^абый<n><px1sg><nom>/брат<n><m><aa><px1sg><nom>$
           EXPECT: pronoun = ^я<prn><pers><p1><mf><sg><nom>$
           GIVEN:  ^абый<n><px1sg><acc>/брат<n><m><aa><px1sg><acc>$
           EXPECT: pronoun = ^я<prn><pers><p1><aa><sg><acc>$ -->
      <let><var n="pronoun"/><lit v=""/></let>
      <call-macro n="set-animacy">
	<with-param pos="1"/>
      </call-macro>
      <choose>
        <when>
          <test><and>
            <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>
            <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
          </and></test>
          <let><var n="pronoun"/>
          <concat>
            <lit v="^я"/>
            <lit-tag v="prn"/><lit-tag v="pers"/>
            <clip pos="1" side="sl" part="a_pers"/>
            <lit-tag v="mf"/>
            <!--<var n="animacy"/>-->
            <clip pos="1" side="tl" part="a_nbr"/>
            <lit-tag v="nom"/>
            <lit v="$ "/>
          </concat>
          </let>  
        </when> 
<when>
	  <test><and>
	    <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>
	    <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
          </and></test>
          <let><var n="pronoun"/>
          <concat>
            <lit v="^ты"/>
            <lit-tag v="prn"/><lit-tag v="pers"/>
            <clip pos="1" side="sl" part="a_pers"/>
            <lit-tag v="mf"/>
            <!--<var n="animacy"/>-->
            <clip pos="1" side="tl" part="a_nbr"/>
            <lit-tag v="nom"/>
             <lit v="$ "/>
          </concat>
          </let>  
        </when>
<!--<otherwise>
<let><var n="pronoun"/>
          
            <lit v=""/>
            
          </let>  
</otherwise>-->
       </choose>
    </def-macro>


<def-macro n="num-gender" npar="1">
     <choose> 
<when>
          <test><equal><clip pos="1" side="sl" part="a_gender"/><lit v=""/></equal></test>
    
          <let><var n="gender"/><lit-tag v="m"/></let>
        </when>
<otherwise>
          <let><var n="gender"/><clip pos="1" side="sl" part="a_gender"/></let>
</otherwise>
</choose>
    </def-macro>

    <def-macro n="translate-noun" npar="1"> 
      <!-- arg.1 noun -> v_preposition v_possessive noun
           Translates ablative, locative, similiative cases with the variable 'preposition'
           and noun, <px><nom> with genitive, other cases remain as they are. If the noun
           has a possessive affix, stores a corresponding possessive determiner in 'possessive'
           variable.
           Modifies variables and TL noun so that they are generatable (or, in case of variables,
           empty). -->
      <call-macro n="return-number-of-sl-word">
        <with-param pos="1"/>
      </call-macro>
       <choose>
        <when>
          <test>
            <or>  <!--Zhadyra-->
              <equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="nom"/></equal>
              <equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="gen"/></equal>
              <!--<equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="dat"/></equal>-->
              <equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="acc"/></equal>
            </or>
          </test>
          <let><var n="preposition"/><lit v=""/></let>
          <let><var n="case"/><clip pos="1" side="tl" part="a_case"/></let>
        </when>
       <!-- <when>
          <test><equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="abl"/></equal></test>
          <let><var n="preposition"/><concat><lit v="из"/><lit-tag v="pr"/></concat></let>
          <let><var n="case"/><lit-tag v="gen"/></let>
        </when>-->

        <when>
          <test>
<and>
<equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="abl"/></equal>
<equal><clip pos="1" side="tl" part="a_anim"/><lit-tag v="nn"/></equal>
</and>
</test>

          <let><var n="preposition"/><concat><lit v="из"/><lit-tag v="pr"/></concat></let>
          <let><var n="case"/><lit-tag v="gen"/></let>

        </when>
<when>
          <test>
<and>
<equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="abl"/></equal>
<equal><clip pos="1" side="tl" part="a_anim"/><lit-tag v="aa"/></equal>
</and>
</test>
          <let><var n="preposition"/><concat><lit v="от"/><lit-tag v="pr"/></concat></let>
          <let><var n="case"/><lit-tag v="gen"/></let>

        </when>

	<when>
          <test><equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="ins"/></equal></test>
          <let><var n="preposition"/><concat><lit v="с"/><lit-tag v="pr"/></concat></let>
          <let><var n="case"/><lit-tag v="ins"/></let>
        </when>
        <!--<when>
          <test><equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="loc"/></equal></test>
	  <let><var n="preposition"/><concat><lit v="в"/><lit-tag v="pr"/></concat></let>
	  <choose>
	    <when>
	      <test><in caseless="yes"><clip pos="1" side="tl" part="lem"/><list n="nouns-with-loc-case"/></in></test>
              <let><var n="case"/><lit-tag v="loc"/></let>
            </when>
	    <otherwise>
              <let><var n="case"/><lit-tag v="prp"/></let>
	    </otherwise>
	  </choose>
	</when>-->

 <when>
          
 <test>
<and>
<equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="loc"/></equal>
<equal><clip pos="1" side="tl" part="a_anim"/><lit-tag v="nn"/></equal>
</and>
</test>
	  <let><var n="preposition"/><concat><lit v="в"/><lit-tag v="pr"/></concat></let>
<let><var n="case"/><lit-tag v="gen"/></let>
	  <choose>
	    <when>
	      <test><in caseless="yes"><clip pos="1" side="tl" part="lem"/><list n="nouns-with-loc-case"/></in></test>
              <let><var n="case"/><lit-tag v="loc"/></let>
            </when>
	    <otherwise>
              <let><var n="case"/><lit-tag v="prp"/></let>
	    </otherwise>
	  </choose>
	</when>

 <when>
          
<test>
<and>
<equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="loc"/></equal>
<equal><clip pos="1" side="tl" part="a_anim"/><lit-tag v="aa"/></equal>
</and>
</test>
	  <let><var n="preposition"/><concat><lit v="у"/><lit-tag v="pr"/></concat></let>
<let><var n="case"/><lit-tag v="gen"/></let>
</when>

<when>
          <test>
<and>
<equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="dat"/></equal>
<equal><clip pos="1" side="tl" part="a_anim"/><lit-tag v="aa"/></equal>
</and>
</test>

          <let><var n="preposition"/><concat><lit v="к"/><lit-tag v="pr"/></concat></let>
          <let><var n="case"/><lit-tag v="dat"/></let>

        </when>

<when>
          <test>
<and>
<equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="dat"/></equal>
<equal><clip pos="1" side="tl" part="a_anim"/><lit-tag v="nn"/></equal>
</and>
</test>

          <let><var n="preposition"/><concat><lit v="в"/><lit-tag v="pr"/></concat></let>
          <let><var n="case"/><lit-tag v="dat"/></let>

        </when>


        <when>
          <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="sim"/></equal></test>
          <let><var n="preposition"/><concat><lit v="как"/><lit-tag v="adv"/></concat></let>
          <let><var n="case"/><lit-tag v="nom"/></let>
        </when>
        <when>
          <test><equal><clip pos="1" side="sl" part="a_case"/><lit v=""/></equal></test>
          <let><var n="case"/><lit-tag v="nom"/></let>
        </when>
        <when>
          <test><equal><clip pos="1" side="sl" part="a_px"/><lit-tag v="px"/></equal></test>
          <let><var n="case"/><lit-tag v="gen"/></let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
	    <and>
              <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adj"/></equal>
	      <equal><var n="number"/><lit-tag v="pl"/></equal>
	    </and>
	  </test>
	  <let><clip pos="1" side="tl" part="a_gender"/><lit-tag v="mfn"/></let>
	</when>
      </choose>

      <choose>
        <when>

          <test>
	    <and>
	      <or>
		<equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adj"/></equal>
		<equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="det"/></equal>
	      </or>
              <equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="acc"/></equal>
	      <or>
		<equal><clip pos="1" side="tl" part="a_gender"/><lit-tag v="m"/></equal>
		<equal><clip pos="1" side="tl" part="a_gender"/><lit-tag v="mfn"/></equal>
	      </or>
	    </and>
	  </test>
	  <let><clip pos="1" side="tl" part="a_anim"/><lit-tag v="aa"/></let>
	</when>
      </choose>
      <choose>
        <when>
          <test>
	    <and>
              <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="np.cog"/></equal>
	      <equal><var n="number"/><lit-tag v="pl"/></equal>
	    </and>
	  </test>
	  <let><clip pos="1" side="tl" part="a_gender"/><lit-tag v="mf"/></let>
	</when>
      </choose>
      <let>
        <clip pos="1" side="tl" part="whole"/>
        <concat>
          <clip pos="1" side="tl" part="lemh"/>
          <clip pos="1" side="tl" part="a_nom"/>
          <clip pos="1" side="tl" part="a_gender"/>
          <clip pos="1" side="tl" part="a_anim"/>
          <var n="number"/>
          <var n="case"/>
          <clip pos="1" side="tl" part="lemq"/>
        </concat>
      </let>
      <call-macro n="convert-poss-affix-to-poss-determiner">
        <with-param pos="1"/>
      </call-macro>
<call-macro n="convert-pers-affix-to-pers-determiner">
        <with-param pos="1"/>
      </call-macro>
         </def-macro>

<!--<def-macro n="NEW-build-noun-lu-2-4-5-sg" npar="1">
 
     <let>
           <var n="NEW-noun_lu"/>
           <concat>
               <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_nom"/>
               <clip pos="1" side="tl" part="a_gender"/>
               <lit-tag v="sg"/>--> <!-- force singular number (used with numerals) -->
               <!-- no need to link person -->
              <!-- <lit-tag v="4"/> 
               <lit-tag v="5"/> 
           </concat>  
        </let>
   </def-macro>

 <def-macro n="build-possessive-from-pron" npar="1">
	<choose> 
	<when>
         <test>
          <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit  v="я"/></equal>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1sg"/></let>
	</when>
	<when>
         <test>
          <equal caseless="yes"><clip  pos="1" side="sl" part="lem"/><lit  v="мы"/></equal>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1pl"/></let>
	</when>
	<when>
         <test>
          <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit  v="ты"/></equal>
         </test>      
	<let><var  n="possessive"/><lit-tag v="px2sg"/></let>
	</when>
<when>
         <test>
          <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit  v="вы"/></equal>
         </test>      
	<let><var  n="possessive"/><lit-tag v="px2sg"/></let>
	</when>
	<otherwise>
	<let><var n="possessive"/><lit-tag v="px3sp"/></let> 
	</otherwise>
	</choose>
   </def-macro>-->


    <def-macro n="makeagree-det-noun" npar="2">
      <!-- arg.1 determiner arg.2 noun -> determiner noun
           Concords gender, animacy, number, case of the determiner with the head of the NP.
           Assumes that the head of the NP was already 'translated'. -->
      <!-- "First, copy everything from the noun -->
      <let><clip pos="1" side="tl" part="a_gender"/><clip pos="2" side="tl" part="a_gender"/></let>
      <let><clip pos="1" side="tl" part="a_anim"/><clip pos="2" side="tl" part="a_anim"/></let>
      <let><clip pos="1" side="tl" part="a_nbr"/><clip pos="2" side="tl" part="a_nbr"/></let>
      <let><clip pos="1" side="tl" part="a_case"/><clip pos="2" side="tl" part="a_case"/></let>
      <let> <var n="case"/><clip pos="2" side="tl" part="a_case"/></let>
      <!-- Now adjust -->

      <choose>
        <when>
          <test><equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
          <let><clip pos="1" side="tl" part="a_gender"/><lit-tag v="mfn"/></let>
        </when>
      </choose>
      <choose>
        <when c="If the gender is masculin or number is plural, in accusative we want to take the
                 animacy tag of the noun, otherwise it should be set to 'an'.">
          <test><not>
            <and>
              <or>
                <equal><clip pos="1" side="tl" part="a_gender"/><lit-tag v="m"/></equal>
                <equal><clip pos="1" side="tl" part="a_gender"/><lit-tag v="mfn"/></equal>
              </or>
              <equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="acc"/></equal>
            </and>
          </not></test>
          <let><clip pos="1" side="tl" part="a_anim"/><lit-tag v="an"/></let>
          <let><var n="animacy"/><lit-tag v="an"/></let>
        </when>
      </choose>
    </def-macro>

<def-macro n="choose_case_and_postposition2" npar="2">  
    <let><var n="pptag"/><lit-tag v="PP"/></let> 
    <let><var n="genpp"/><lit v="no"/></let> 
    <choose>
      <when> <!-- make genpp="yes" when a postposition is detected -->
        <test>
          <or>
            <equal>
               <clip pos="1" side="tl" part="a_postposition"/>
               <lit-tag v="n"/>
            </equal>
     
            <equal>
               <clip pos="1" side="tl" part="a_postposition"/>
               <lit-tag v="post"/>
            </equal>

          </or>  
        </test>
        <let><var n="genpp"/><lit v="yes"/></let> <!-- for simple cases -->
      </when>
    </choose>

    <choose>
      <when>
        <test>
          <equal><var n="genpp"/><lit v="no"/></equal>
        </test>
        <choose> <!-- no postpositions -->
          <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="loc"/>
              </equal>
            </test>
            <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="у"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
<let><var n="case"/>
                <lit-tag v="gen"/>
</let>
       </when> 

<when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="abl"/>
              </equal>
            </test>
            <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="из"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
<let><var n="case"/>   <lit-tag v="gen"/>     </let>
       </when> 
<when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="dat"/>
              </equal>
            </test>
            <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="к"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
          <let><var n="case"/><lit-tag v="dat"/></let>
       </when> 
<when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="gen"/>
              </equal>
            </test>
            <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="из"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
<let><var n="case"/>   <lit-tag v="gen"/>     </let>
       </when> 

     
  <when>   
        <test>
          <equal caseless="yes">
            <clip pos="1" side="sl" part="a_case"/>
            <lit-tag v="ins"/>
          </equal>
        </test>
       <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="с"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
<let><var n="case"/><lit-tag v="ins"/></let>
    </when> 
                  <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="dat"/>
              </equal>
            </test>
            <let>
              <var n="case"/>
              <lit v="в"/>
            </let>
      </when>    

           <when> 
             <test>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="a_case"/>
                  <lit-tag v="ins"/>
                </equal>
             </test>
             <let>
               <var n="case"/>
               <lit v="с"/>
             </let>
<let><var n="case"/><lit-tag v="ins"/></let>
              </when>    

           <when> 
             <test>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="a_case"/>
                  <lit-tag v="gen"/>
                 </equal>
              </test>
              <let>
                <var n="case"/>
                <lit-tag v="из"/>
              </let>
              <let>
                 <var n="pptag"/>
                 <lit v="GenP"/>   
              </let>
<let><var n="case"/>   <lit-tag v="gen"/>     </let>
       </when>    

           <otherwise>
              <let>
                <var n="case"/>
                <lit-tag v="nom"/> 
              </let>
              <let>
                <var n="pptag"/>
                <lit-tag v="PP"/>  
              </let>
<let><var n="postposition_lu"/> <!-- ready for lu -->

                       <lit v=""/>
                        
             </let>
            </otherwise>
    </choose>
      </when> 

      <when>  <!--- Now, with postpositions -->
        <test>
          <equal>
             <var n="genpp"/>
             <lit v="yes"/>
          </equal>
        </test>
        <choose> <!-- Generate postposition --> 
          <when> <!-- noun-based postpositions -->
             <test>
               <equal>
                 <clip side="tl" part="a_postposition" pos="1"/>
                 <lit-tag v="n"/>
           </equal>
             </test>
             <let><var n="case"/><lit-tag v="gen"/></let>
             <let><var n="pptag"/><lit-tag v="PP"/></let>
             <!-- we need to compute "possessive"  --> 
 
<let><var  n="possessive"/><lit-tag v="px3sp"/></let> <!-- default value -->

<choose> 
<when>
   <test>
      <and>
          <equal><clip pos="2" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
       </and>
    </test>      
          <let><var  n="possessive"/><lit-tag v="px1sg"/></let>
</when>


<when>
   <test>
      <and>
          <equal><clip  pos="2" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
       </and>
    </test>      
          <let><var  n="possessive"/><lit-tag v="px1pl"/></let>
</when>
               
             </choose>
             <let><var n="pptag"/><lit-tag v="PP"/></let>
             <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit-tag v="post"/>
                      </concat>
             </let>
      </when>
    </choose>
       </when>
     </choose>
    </def-macro>

<def-macro n="choose_case_and_postposition1" npar="1">  
    <let><var n="pptag"/><lit-tag v="PP"/></let> 
    <let><var n="genpp"/><lit v="no"/></let> 
    
    <choose>
      <when>
        <test>
          <equal><var n="genpp"/><lit v="no"/></equal>
        </test>
        <choose> <!-- no postpositions -->
          <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="loc"/>
              </equal>
            </test>
            <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="у"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
<let><var n="case"/>
                <lit-tag v="gen"/>
</let>
       </when> 

<when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="abl"/>
              </equal>
            </test>
            <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="из"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
<let><var n="case"/>   <lit-tag v="gen"/>     </let>
       </when> 
<when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="dat"/>
              </equal>
            </test>
            <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="к"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
          <let><var n="case"/><lit-tag v="dat"/></let>
       </when> 
<when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="gen"/>
              </equal>
            </test>
            <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="от"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
          <let><var n="case"/><lit-tag v="gen"/></let>
       </when> 

     
  <when>   
        <test>
          <equal caseless="yes">
            <clip pos="1" side="sl" part="a_case"/>
            <lit-tag v="ins"/>
          </equal>
        </test>
       <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                       <lit v="с"/>
                        <lit-tag v="pr"/>          
                      </concat>
             </let>
<let><var n="case"/><lit-tag v="ins"/></let>
    </when> 
                  <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="a_case"/>
                <lit-tag v="dat"/>
              </equal>
            </test>
            <let>
              <var n="case"/>
              <lit v="н"/>
            </let>
      </when>    

           <when> 
             <test>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="a_case"/>
                  <lit-tag v="ins"/>
                </equal>
             </test>
             <let>
               <var n="case"/>
               <lit v="с"/>
             </let>
<let><var n="case"/><lit-tag v="ins"/></let>
              </when>    

           <when> 
             <test>
                <equal caseless="yes">
                  <clip pos="1" side="sl" part="a_case"/>
                  <lit-tag v="gen"/>
                 </equal>
              </test>
              <let>
                <var n="case"/>
                <lit-tag v="из"/>
              </let>
              <let>
                 <var n="pptag"/>
                 <lit v="GenP"/>   
              </let>
       </when>    

           <otherwise>
              <let>
                <var n="case"/>
                <lit-tag v="nom"/> 
              </let>
              <let>
                <var n="pptag"/>
                <lit-tag v="PP"/>  
              </let>
<let><var n="postposition_lu"/> <!-- ready for lu -->

                       <lit v=""/>
                        
             </let>
            </otherwise>
    </choose>
      </when> 

      <when>  <!--- Now, with postpositions -->
        <test>
          <equal>
             <var n="genpp"/>
             <lit v="yes"/>
          </equal>
        </test>
        <choose> <!-- Generate postposition --> 
          <when> <!-- noun-based postpositions -->
             <test>
               <equal>
                 <clip side="tl" part="a_postposition" pos="1"/>
                 <lit-tag v="n"/>
           </equal>
             </test>
             <let><var n="case"/><lit-tag v="gen"/></let>
             <let><var n="pptag"/><lit-tag v="PP"/></let>
             <!-- we need to compute "possessive"  --> 
 
<let><var  n="possessive"/><lit-tag v="px3sp"/></let> <!-- default value -->

<choose> 
<when>
   <test>
      <and>
          <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
       </and>
    </test>      
          <let><var  n="possessive"/><lit-tag v="px1sg"/></let>
</when>


<when>
   <test>
      <and>
          <equal><clip  pos="1" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
       </and>
    </test>      
          <let><var  n="possessive"/><lit-tag v="px1pl"/></let>
</when>
               
             </choose>
             <let><var n="pptag"/><lit-tag v="PP"/></let>
             <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit-tag v="post"/>
                      </concat>
             </let>
      </when>
    </choose>
       </when>
     </choose>
    </def-macro>



    <def-macro n="makeagree-num-noun" npar="2">
      <!-- arg.1 numeral arg.2 noun -> numeral noun
           Assumes that the noun was already 'translated'.
	   GIVEN:  ^бер<num>/один<num><m><an><sg><nom>$ ^йорт<n><nom>/дом<n><m><nn><sg><nom>$
	   EXPECT: ^бер<num>/один<num><m><an><sg><nom>$ ^йорт<n><nom>/дом<n><m><nn><sg><nom>$
           GIVEN:  ^бер<num>/один<num><m><an><sg><nom>$ ^мәктәп<n><nom>/школа<n><f><nn><sg><nom>$
	   EXPECT: ^бер<num>/один<num><f><an><sg><nom>$ ^мәктәп<n><nom>/школа<n><f><nn><sg><nom>$
	   GIVEN:  ^бер<num>/один<num><m><an><sg><nom>$ ^йорт<n><dat>/дом<n><m><nn><sg><dat>$
	   EXPECT: ^бер<num>/один<num><m><an><sg><dat>$ ^йорт<n><dat>/дом<n><m><nn><sg><dat>$
           GIVEN:  ^ике<num>/два<num><m><an><sg><nom>$ ^йорт<n><nom>/дом<n><m><nn><sg><nom>$
           EXPECT: ^ике<num>/два<num><m><an><sg><nom>$ ^йорт<n><nom>/дом<n><m><nn><sg><gen>$
           GIVEN:  ^ике<num>/два<num><m><an><sg><nom>$ ^мәктәп<n><nom>/школа<n><f><nn><sg><gen>$
           EXPECT: ^ике<num>/два<num><f><an><sg><gen>$ ^мәктәп<n><nom>/школа<n><f><nn><pl><gen>$
           GIVEN:  ^биш<num>/пять<num><mfn><pl><nom>$ ^йорт<n><nom>/дом<n><m><nn><sg><nom>$
           EXPECT: ^биш<num>/пять<num><mfn><pl><nom>$ ^йорт<n><nom>/дом<n><m><nn><pl><gen>$
           GIVEN:  ^биш<num>/пять<num><mfn><pl><nom>$ ^йорт<n><acc>/дом<n><m><nn><sg><acc>$
           EXPECT: ^биш<num>/пять<num><mfn><pl><acc>$ ^йорт<n><nom>/дом<n><m><nn><pl><gen>$
                                  but 
           GIVEN:  ^2<num>/2<num><digit><m><an><sg><nom>$ ^статья<n><nom>/статья<n><f><nn><sg><nom>$
           EXPECT: ^2<num>/2<num><digit><m><an><sg><nom>$ ^статья<n><nom>/статья<n><f><nn><sg><nom>$ -->
      <choose>
	<when>
	  <test>
	    <not><equal><clip pos="1" side="tl" part="a_gender"/><lit-tag v="mfn"/></equal></not>
	  </test>
	  <let><clip pos="1" side="tl" part="a_gender"/><clip pos="2" side="tl" part="a_gender"/></let>
	</when>
      </choose>
      <let><clip pos="1" side="tl" part="a_case"/><clip pos="2" side="tl" part="a_case"/></let>
      <choose>
	<when>
	  <test><not>
	    <or>
	      <equal caseless="yes"><clip pos="1" side="tl" part="lem"/><lit v="один"/></equal>
	      <!-- Anything ending in 1 except 11, because 11 require genitive plural as well -->
	      <equal caseless="yes"><clip pos="1" side="tl" part="lem"/><lit v="1"/></equal>
	      <ends-with><clip pos="1" side="tl" part="lem"/><lit v="01"/></ends-with>
	      <ends-with><clip pos="1" side="tl" part="lem"/><lit v="21"/></ends-with>
	      <ends-with><clip pos="1" side="tl" part="lem"/><lit v="31"/></ends-with>
	      <ends-with><clip pos="1" side="tl" part="lem"/><lit v="41"/></ends-with>
	      <ends-with><clip pos="1" side="tl" part="lem"/><lit v="51"/></ends-with>
	      <ends-with><clip pos="1" side="tl" part="lem"/><lit v="61"/></ends-with>
	      <ends-with><clip pos="1" side="tl" part="lem"/><lit v="71"/></ends-with>
	      <ends-with><clip pos="1" side="tl" part="lem"/><lit v="81"/></ends-with>
	      <ends-with><clip pos="1" side="tl" part="lem"/><lit v="91"/></ends-with>
	      <in caseless="yes"><clip pos="2" side="tl" part="lem"/><list n="nouns-most-likely-used-with-ordinal-num"/></in>
	    </or>
	  </not></test>
	  <choose>
	    <when>
	      <test>
		<or>
		  <equal><clip pos="2" side="tl" part="a_case"/><lit-tag v="nom"/></equal>
		  <and>
		    <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>
		    <equal><clip pos="2" side="tl" part="a_case"/><lit-tag v="acc"/></equal>
		  </and>
		</or>
	      </test>
	      <let><clip pos="2" side="tl" part="a_nbr"/><clip pos="1" side="tl" part="a_nbr"/></let>
	      <let><clip pos="2" side="tl" part="a_case"/><lit-tag v="gen"/></let>
	    </when>
	    <otherwise>
	      <let><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="pl"/></let>
	    </otherwise>
	  </choose>
	</when>
      </choose>
      <choose>
        <when c="If the number of the numeral is singular, and the gender either masculine or mfn,
		 in accusative we want to take the animacy tag of the noun, otherwise it should remain 'an'.">
          <test>
            <and>
              <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>
              <equal><clip pos="1" side="tl" part="a_case"/><lit-tag v="acc"/></equal>
	      <or>
		<equal><clip pos="1" side="tl" part="a_gender"/><lit-tag v="m"/></equal>
		<equal><clip pos="1" side="tl" part="a_gender"/><lit-tag v="mfn"/></equal>
	      </or>
            </and>
          </test>
          <let><clip pos="1" side="tl" part="a_anim"/><clip pos="2" side="tl" part="a_anim"/></let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="leave-only-lemma-and-num-tag" npar="1">
      <!-- arg.1 numeral -> numeral
           Strips all "informative" tags from a digit which were added in bidix.
	   GIVEN:  ^1<num>/1<num><digit><m><an><sg><nom>$
	   EXPECT: ^1<num>/1<num>$ -->
      <let>
        <clip pos="1" side="tl" part="whole"/>
        <concat>
          <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="num"/>
        </concat>
      </let>
    </def-macro>



<def-macro n="makeagree-pr-n-adj" npar="3">
      <!-- arg.1 pr 2 noun arg.3 adj -> pr noun-->
      <let><clip pos="3" side="tl" part="a_case"/><clip pos="2" side="tl" part="a_case"/></let>
<choose> 
<when>
          <test><equal><clip pos="2" side="tl" part="a_case"/><lit-tag v="acc"/></equal></test>
    
          <let><var n="animacy"/><lit-tag v="nn"/></let>
        </when>
<otherwise>
          <let><var n="animacy"/><clip pos="2" side="tl" part="a_anim"/></let>
</otherwise>
</choose>
    </def-macro>

<!-- SECTION: Prepositional phrases -->

    <def-macro n="makeagree-pr-noun" npar="2">
      <!-- arg.1 pr arg.2 noun -> pr noun
           Assumes that the noun was already 'translated'.
           GIVEN:  ^сыз<post>/без<pr><gen>$ ^мәктәп<n>/школа<n><f><nn><sg><nom>$
           EXPECT: ^сыз<post>/без<pr>$ ^мәктәп<n>/школа<n><f><nn><sg><gen>$ -->
<choose> 
<when>
          <test><equal><clip pos="1" side="tl" part="a_case"/><lit v=""/></equal></test>
    
          <let><clip pos="2" side="tl" part="a_case"/><lit-tag v="prp"/></let>
        </when>
<otherwise>
 <let><clip pos="2" side="tl" part="a_case"/><clip pos="1" side="tl" part="a_case"/></let>
      <let>
        <clip pos="1" side="tl" part="whole"/>
        <concat>
          <clip pos="1" side="tl" part="lem"/>
          <clip pos="1" side="tl" part="a_pr"/>
        </concat>
      </let>
</otherwise>
     </choose>
    </def-macro>

<!-- SECTION: Verbs -->

    <def-macro n="convert-neg-to-ne.adv" npar="1">
      <!-- arg.1 verb -> v_negation
           Sets the 'negation' variable to '^не<adv>$ ' if the verb contains <neg> tag. -->
      <let><var n="negation"/><lit v=""/></let>
      <choose>
	<when>
	  <test>
            <equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	  </test>
          <let><var n="negation"/><concat><lit v="^не"/><lit-tag v="adv"/><lit v="$ "/></concat></let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="translate-verb-fin" npar="1">
      <!-- arg.1 finiteVerb -> v_negation finiteVerb
           Converts negation, tenses and features related to it (such as gender
           in the past tense). Strips transitivity tag (rus.dix doesn't support it yet).
           GIVEN:  ^ойна<v><tv><pres><p1><sg>/играть<vblex><impf><tv><pres><p1><sg>$
           EXPECT: ^ойна<v><tv><pres><p1><sg>/играть<vblex><impf><pres><p1><sg>$
           GIVEN:  ^ойна<v><tv><pres><p3><pl>/играть<vblex><impf><tv><pres><p3><pl>$
           EXPECT: ^ойна<v><tv><pres><p1><sg>/играть<vblex><impf><pres><p3><sg>$


           GIVEN:  ^ойна<v><tv><neg><ifi><p3><pl>/играть<vblex><impf><tv><neg><ifi><p3><pl>$
           EXPECT: ^ойна<v><tv><neg><ifi><p3><pl>/играть<vblex><impf><past><mfn><pl>$ negation = '^не<adv>$ ' -->
      <let><var n="gender"/><lit v=""/></let>
      <call-macro n="convert-neg-to-ne.adv">
        <with-param pos="1"/>
      </call-macro>
      <choose>
        <when>
          <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="ifi"/></equal></test>
          <let><clip pos="1" side="tl" part="a_tense"/><lit-tag v="past"/></let>
        </when>
        <when>
          <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="fut2"/></equal></test>
          <let><clip pos="1" side="tl" part="a_tense"/><lit-tag v="fut"/></let>
        </when>
      </choose>
      <choose>
	<when>
	  <test>
	    <not><equal><clip pos="1" side="sl" part="a_formality"/><lit v=""/></equal></not>
	  </test>
	  <let><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></let>
	</when>
      </choose>
                          <let><var n="gender"/><lit-tag v="3"/></let>
      <choose>
        <when>
          <test>
            <equal><clip pos="1" side="tl" part="a_tense"/><lit-tag v="ifi"/></equal>
          </test>
	  <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>

</when>
 <when>
          <test>
<equal><clip pos="1" side="tl" part="a_tense"/><lit-tag v="fut2"/></equal>
 </test>
	  <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>

</when>
</choose>
	  <choose>
	    <when>
	      <test>
	        <equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>
	      </test>
              <let><var n="gender"/><lit-tag v="mfn"/></let>
            </when>
</choose>
                
              <let><var n="number"/><lit-tag v="4"/></let>
      <let>
        <clip pos="1" side="tl" part="whole"/>
        <concat>
            <clip pos="1" side="tl" part="lemh"/>
            <clip pos="1" side="tl" part="a_verb"/>
            <clip pos="1" side="tl" part="a_trans"/>
            <clip pos="1" side="tl" part="a_tense"/>
            <var n="gender"/>
            <var n="number"/>

            <clip pos="1" side="tl" part="lemq"/>
        </concat>
      </let>
    </def-macro>

    <def-macro n="conv-case1" npar="1">
          <choose> 
            <when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="nom"/></equal>
               </test>
               <let><clip pos="1" side="tl" part="a_case"/><lit v=""/></let>
               <let><var n="sntype"/><lit-tag v="SN.NOM"/></let>
            </when> 
            <when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="acc"/></equal>
               </test>
               <let><clip pos="1" side="tl" part="a_case"/><lit v=""/></let>
               <let><var n="sntype"/><lit-tag v="SN.ACC"/></let>
            </when> 
            <when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal>
               </test>
               <let><clip pos="1" side="tl" part="a_case"/><lit v=""/></let>
               <let><var n="sntype"/><lit-tag v="SN.GEN"/></let>
            </when> 
            <when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="loc"/></equal>
               </test>
               <let><clip pos="1" side="tl" part="a_case"/><lit v=""/></let>
               <let><var n="sntype"/><lit-tag v="SN.LOC"/></let>
            </when> 
            <when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="abl"/></equal>
               </test>
               <let><clip pos="1" side="tl" part="a_case"/><lit v=""/></let>
               <let><var n="sntype"/><lit-tag v="SN.ABL"/></let>
            </when> 
            <when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal>
               </test>
               <let><clip pos="1" side="tl" part="a_case"/><lit v=""/></let>
               <let><var n="sntype"/><lit-tag v="SN.DAT"/></let>
            </when> 
            <when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal>
               </test>
               <let><clip pos="1" side="tl" part="a_case"/><lit v=""/></let>
               <let><var n="sntype"/><lit-tag v="SN.INS"/></let>
            </when> 
          </choose>
    </def-macro>

    <def-macro n="conv-number1" npar="1">
      <choose>
            <when>
               <test>
                  <not><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></not>
               </test>
               <let><var n="number"/><lit-tag v="sg"/></let>
            </when> 
</choose>
<choose>
<when>
               <test>
                  <equal><clip pos="1" side="sl" part="a_nom"/><lit-tag v="np"/></equal>
               </test>
               <let><var n="number"/><lit v=""/></let>
            </when> 
      </choose>
    </def-macro>


    <def-macro n="reset-vars1" npar="1">
          <let><var n="sntype"/><lit v=""/></let>
          <let><var n="number"/><lit v=""/></let>
<let><var n="possessive"/><lit v=""/></let>
<let><var n="pronoun"/><lit v=""/></let>
    </def-macro>

  </section-def-macros>

  <section-rules>





<rule comment="NEW RULE: verb"> <!-- Aliya 04.09.17 -->
  <pattern>
    <pattern-item n="verbsform"/>
  </pattern>
  <action>
 <choose>
      <when>
<test><and>
	<equal><clip pos="1" side="sl" part="a_verb"/><lit-tag v="vblex.perf"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="aor"/></equal>
      </and></test>
                <let><var n="tense"/><lit-tag v="fut"/></let>
      </when>
<otherwise>
                <let><var n="tense"/><lit-tag v="pres"/></let>
</otherwise>
 </choose>
    <choose>
      <when>
<test>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="aor"/></equal>
      </test>
    <out>
    <chunk name="verb-pres"> <!-- ойнаймын - сыграю -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_verb"/>
          <clip pos="1" side="sl" part="a_trans"/>
	  <var n="tense"/>
	  <clip pos="1" side="tl" part="a_pers"/>
	  <clip pos="1" side="tl" part="a_nbr"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal></test>
        <let><var n="tense"/><lit-tag v="past"/></let>
    <out>
    <chunk name="verb-past"> <!-- ойнағанмын - сыграла -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_verb"/>
          <clip pos="1" side="tl" part="a_trans"/>
	  <var n="tense"/>
	  <clip pos="1" side="tl" part="a_gender"/>
	  <clip pos="1" side="tl" part="a_nbr"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="ger"/></equal></test>
        <let><var n="tense"/><lit-tag v="inf"/></let>
    <out>
    <chunk name="verb-inf"> <!-- ойнау - сыграть -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_verb"/>
          <clip pos="1" side="sl" part="a_trans"/>
	  <var n="tense"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="imp"/></equal></test>
        <let><var n="tense"/><lit-tag v="imp"/></let>
    <out>
    <chunk name="verb-imp"> <!-- ойна - сыграй -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_verb"/>
          <clip pos="1" side="sl" part="a_trans"/>
	  <var n="tense"/>
          <lit-tag v="p2"/>
          <clip pos="1" side="tl" part="a_nbr"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="gna_impf"/></equal></test>
    <out>
    <chunk name="verb-pprs"> <!-- ойнай - сыграв 000-->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_verb"/>
          <clip pos="1" side="sl" part="a_trans"/>
          <!--clip pos="1" side="tl" part="a_pp-pprs"/-->
          <lit-tag v="pprs.adv"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="gna_perf"/></equal></test>
        <let><var n="tense"/><lit-tag v="pp"/></let>
    <out>
    <chunk name="verb-pp"> <!-- звав - шақырып 000 -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_verb"/>
          <clip pos="1" side="sl" part="a_trans"/>
          <!--clip pos="1" side="tl" part="a_pp-pprs"/-->
          <lit-tag v="pp.adv"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="verb">
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
	  <clip pos="1" side="tl" part="a_tense"/>
	  <clip pos="1" side="tl" part="a_pers"/>
	  <clip pos="1" side="tl" part="a_nbr"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
  </action>
</rule>


<rule comment="RULE: shakyr">  <!-- AS to be removed -->
<pattern>
 <pattern-item n="v-shakyr"/>
</pattern>
  <action>
    <out>
       <chunk name="v-coop-neg-ger_gpr+post" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>


<rule comment="RULE: shakyr v-vars">  <!-- AS to be removed -->
<pattern>
 <pattern-item n="v-shakyr"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>
    <out>
       <chunk name="v-coop-neg-ger_gpr+post" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>




<rule comment="RULE: v-coop-ger_gpr post">  <!-- Aliya "шақырысушылықсыз" -->
<pattern>
 <pattern-item n="v-coop-ger_gpr"/>
 <pattern-item n="post"/>
</pattern>
  <action>
    <out>
       <chunk name="v-coop-ger_gpr+post" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <lit v="без"/> <lit-tag v="pr"/> </lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: v-coop-neg-ger_gpr vars">  <!-- "шақырысарлардан ғой" -->
<pattern>
 <pattern-item n="v-coop-neg-ger_gpr"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>

    <out>
       <chunk name="v-coop-neg-ger_gpr+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <var n="pronoun"/> </lu> <b/>
 <lu><lit v="не"/><lit-tag v="adv"/></lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu><b/>
<lu>  <clip pos="2" side="tl" part="whole"/> </lu> 
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: v-coop-ger_gpr vars">  <!-- "шақырысарлардан ғой" -->
<pattern>
 <pattern-item n="v-coop-ger_gpr"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>

    <out>
       <chunk name="v-coop-ger_gpr+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <var n="pronoun"/> </lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu><b/>
<lu>  <clip pos="2" side="tl" part="whole"/> </lu> 
 </chunk>
  </out>
</action>
 </rule>


<rule comment="RULE: v-coop-neg-ger_gpr">  <!-- "шақырысарлардан" -->
<pattern>
 <pattern-item n="v-coop-neg-ger_gpr"/>

</pattern>
  <action>

    <out>
       <chunk name="v-coop-neg-ger_gpr" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <var n="pronoun"/> </lu> <b/>
 <lu><lit v="не"/><lit-tag v="adv"/></lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: v-coop-ger_gpr">  <!-- "шақырысарлардан" -->
<pattern>
 <pattern-item n="v-coop-ger_gpr"/>
</pattern>
  <action>

    <out>
       <chunk name="v-coop-ger_gpr" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <var n="pronoun"/> </lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: v-pass-neg-ger_gpr vars">  <!-- "шақырысарлардан ғой" -->
<pattern>
 <pattern-item n="v-pass-neg-ger_gpr"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>

    <out>
       <chunk name="v-pass-neg-ger_gpr+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <var n="pronoun"/> </lu> <b/>
 <lu><lit v="не"/><lit-tag v="adv"/></lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu><b/>
<lu>  <clip pos="2" side="tl" part="whole"/> </lu> 
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: v-pass-ger_gpr vars">  <!-- "шақырысарлардан ғой" -->
<pattern>
 <pattern-item n="v-pass-ger_gpr"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>

    <out>
       <chunk name="v-pass-ger_gpr+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <var n="pronoun"/> </lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu><b/>
<lu>  <clip pos="2" side="tl" part="whole"/> </lu> 
 </chunk>
  </out>
</action>
 </rule>


<rule comment="RULE: v-pass-ger_gpr ">  <!-- "шақырылушылықтарсыз" -->
<pattern>
 <pattern-item n="v-pass-ger_gpr"/>
 <pattern-item n="post"/>
</pattern>
  <action>

    <out>
       <chunk name="v-pass-ger_gpr+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <lit v="без"/> <lit-tag v="pr"/> </lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: v-pass-neg-ger_gpr vars">  <!-- "шақырысарлардан ғой" -->
<pattern>
 <pattern-item n="v-pass-neg-ger_gpr"/>
 <pattern-item n="post"/>
</pattern>
  <action>

    <out>
       <chunk name="v-pass-neg-ger_gpr+post" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
<lu> <lit v="без"/> <lit-tag v="pr"/> </lu> <b/>
 <lu><lit v="не"/><lit-tag v="adv"/></lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: v-pass-neg-ger_gpr">  <!-- "шақырысарлардан" -->
<pattern>
 <pattern-item n="v-pass-neg-ger_gpr"/>
</pattern>
  <action>

    <out>
       <chunk name="v-pass-neg-ger_gpr" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <var n="pronoun"/> </lu> <b/>
 <lu><lit v="не"/><lit-tag v="adv"/></lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: v-pass-ger_gpr">  <!-- "шақырысарлардан" -->
<pattern>
 <pattern-item n="v-pass-ger_gpr"/>
</pattern>
  <action>

    <out>
       <chunk name="v-pass-ger_gpr" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <var n="pronoun"/> </lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>


<rule comment="RULE: KE fut V+al"> <!-- ойнай аламын - смогу сыграть --> <!-- Aliya --> <!-- 20.05.17 -->
      <pattern>
        <pattern-item n="verb-nonfin"/>
        <pattern-item n="verb-al"/>
      </pattern>
      <action>       
        <call-macro n="conv-temps1"><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ke-futv-al" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_tns"/></tag>
              <tag><clip pos="2" side="tl" part="a_pers"/></tag>
              <tag><clip pos="2" side="tl" part="a_nbr"/></tag>		
            </tags>
            <lu>
              <lit v="смочь"/><lit-tag v="vblex"/>
	      <lit-tag v="perf"/><lit-tag v="iv"/><lit-tag v="fut"/>        
              <lit-tag v="3"/><lit-tag v="4"/>                       
            </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <lit-tag v="inf"/> 
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: KE past V+al"> <!-- ойнай алдым - смог сыграть -->  <!-- Aliya --> <!-- 20.05.17 -->
      <pattern>
        <pattern-item n="v-ing"/>
     <pattern-item n="verb-al-ifi"/>
      </pattern>
      <action>       
        <call-macro n="conv-temps1"><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ke-pastv-al" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_tns"/></tag>
              <tag><clip pos="2" side="tl" part="a_pers"/></tag>
              <tag><clip pos="2" side="tl" part="a_nbr"/></tag>		
            </tags>
            <lu>
              <lit v="смочь1"/><lit-tag v="vblex"/>
	      <lit-tag v="perf"/><lit-tag v="iv"/><lit-tag v="past"/>        
              <lit-tag v="m"/><lit-tag v="4"/>                       
            </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <lit-tag v="inf"/> 
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: KE past V+al-not"> <!-- ойнай алмадым - не смог сыграть -->  <!-- Aliya --> <!-- 20.05.17 -->
      <pattern>
        <pattern-item n="v-ing"/>
     <pattern-item n="verb-al-ifi-neg"/>
      </pattern>
      <action>       
        <call-macro n="conv-temps1"><with-param pos="2"/></call-macro>
        <out>
          <chunk name="ke-pastv-al-not" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="tl" part="a_tns"/></tag>
              <tag><clip pos="2" side="tl" part="a_pers"/></tag>
              <tag><clip pos="2" side="tl" part="a_nbr"/></tag>		
            </tags>
            <lu>
              <lit v="не"/>
              <lit-tag v="adv"/>                          
            </lu><b/>
            <lu>
              <lit v="смочь1"/><lit-tag v="vblex"/>
	      <lit-tag v="perf"/><lit-tag v="iv"/><lit-tag v="past"/>       
              <lit-tag v="m"/><lit-tag v="4"/>                       
            </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <lit-tag v="inf"/> 
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



  <rule comment="RULE:  VAUX pres"> <!-- жатырмын, тұрмын, отырмын, жүрмін. -->  <!-- Aliya --> <!-- 20.05.17 -->
      <pattern>        
        <pattern-item n="vaux-pres"/>
      </pattern>
      <action>        
        <call-macro n="conv-temps1"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="vaux-pres" case="caseFirstWord">
            <tags><tag><lit-tag v="SV-vaux"/></tag></tags>            
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
            </lu>            
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>

<rule comment="RULE: VP-mumkin"> <!-- айтуым мүмкін - возможно расскажу -->
      <pattern>
        <pattern-item n="v-gerund"/>
        <pattern-item n="mumkin"/>
      </pattern>
      <action>
        <call-macro n="conv-case1"><with-param pos="1"/></call-macro>
        <call-macro n="conv-number1"><with-param pos="1"/></call-macro>
 <choose>
               <when>
                   <test><equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px1sg"/></equal></test>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v="p1"/></let>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v="sg"/></let>
                </when>
               <when>
                   <test><equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px1pl"/></equal></test>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v="p1"/></let>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v="pl"/></let>
                </when>
               <when>
                   <test><equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px2sg"/></equal></test>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v="p2"/></let>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v="sg"/></let>
                </when>
               <when>
                   <test><equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px2pl"/></equal></test>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v="p2"/></let>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v="pl"/></let>
                </when>
               <when>
                   <test><equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px3sg"/></equal></test>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v="p3"/></let>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v="sg"/></let>
                </when>
               <when>
                   <test><equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="px3pl"/></equal></test>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v="p3"/></let>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v="pl"/></let>
                </when>
</choose>
        <out>
          <chunk name="ger-mumkin" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_pers"/></tag>
              <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
           </tags>
             <lu><lit v="Возможно"/><lit-tag v="adv"/></lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="vblex"/>
              <clip pos="1" side="tl" part="a_aspec"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tns"/>
              <lit-tag v="2"/>
              <lit-tag v="3"/>
            </lu>            
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: ger+acc - v">   <!-- жүгіруді жек көремін - презираю бегать -->
      <pattern>
        <pattern-item n="v-gerund-ing"/>
        <pattern-item n="v-fin"/>
      </pattern>
      <action>
<choose>
<when>
                   <test><equal><clip pos="1" side="sl" part="lem"/><lit v="бол"/></equal></test>
        <out>
          <chunk name="v-ger2-be" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag></tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="pres"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu><b/>
	    <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vbser"/>
              <lit-tag v="ger"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
</when>
<otherwise>
   <out>
          <chunk name="v-ger2" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag></tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <clip pos="2" side="tl" part="a_aspec"/>
              <lit-tag v="pres"/>
              <clip pos="2" side="tl" part="a_pers"/>
              <clip pos="2" side="tl" part="a_nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <clip pos="1" side="tl" part="a_aspec"/>
              <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
</otherwise>
</choose>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: KE prc v past"> <!-- айтып жібердім - рассказал -->
      <pattern>
        <pattern-item n="v-ing"/>
        <pattern-item n="v-fprc"/>
      </pattern>
      <action>       
        <call-macro n="conv-temps1"><with-param pos="2"/></call-macro>
        <out>
          <chunk name="prc-v-past" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="sl" part="a_nbr"/></tag>		
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="past"/>
              <lit-tag v="m"/>
              <lit-tag v="2"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: KE prc v pres"> <!-- айтып жіберемін - расскажу -->
      <pattern>
        <pattern-item n="v-ing"/>
        <pattern-item n="v-fprk"/>
      </pattern>
      <action>       
        <call-macro n="conv-temps1"><with-param pos="2"/></call-macro>
        <out>
          <chunk name="prc-v-pres" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="sl" part="a_pers"/></tag>		
              <tag><clip pos="2" side="sl" part="a_nbr"/></tag>		
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pres"/>
              <lit-tag v="2"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>


<rule comment="RULE: ger kerek"> <!-- "баруым керек - нужно идти -->
      <pattern>
	<pattern-item n="v-gerund"/>
        <pattern-item n="kerek"/>
        <pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="conv-case1"><with-param pos="1"/></call-macro>
        <call-macro n="conv-number1"><with-param pos="1"/></call-macro>
        <call-macro n="remove-poss"><with-param pos="1"/></call-macro>
 <choose>
               <when>
                   <test><and>
                       <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
                       <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v=""/></equal>
                   </and></test>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>
                </when>
               <when>
                   <test><and>
                       <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
                       <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v=""/></equal>
                   </and></test>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>
                </when>
               <when>
                   <test><and>
                       <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p3"/></equal>
                       <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v=""/></equal>
                   </and></test>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>
                </when>
</choose>
<choose>
<when>
                   <test><equal><clip pos="1" side="sl" part="lemh"/><lit v="бол"/></equal></test>
                 <out>
          <chunk name="have-to-inf-be" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag></tags>
	     <lu><lit v="нужно"/><lit-tag v="pred"/></lu><b/>
             <lu>
		<clip pos="1" side="tl" part="lem"/>
		<lit-tag v="vbser"/>
                <clip pos="1" side="tl" part="a_aspec"/>
               <lit-tag v="inf"/>
             </lu>
          </chunk>
        </out>
</when>
<otherwise>
        <out>
          <chunk name="ger-kerek" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag></tags>
	     <lu><lit v="нужно"/><lit-tag v="pred"/></lu><b/>
            <lu>
             <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="vblex"/>
             <clip pos="1" side="tl" part="a_aspec"/>
              <lit-tag v="inf"/>
            </lu>
          </chunk>
        </out>
</otherwise>
           </choose>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: ger-neg kerek"> <!-- "бармауым керек - не нужно идти -->
      <pattern>
	<pattern-item n="v-gerund-neg"/>
        <pattern-item n="kerek"/>
        <pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="conv-case1"><with-param pos="1"/></call-macro>
        <call-macro n="conv-number1"><with-param pos="1"/></call-macro>
        <call-macro n="remove-poss"><with-param pos="1"/></call-macro>
 <choose>
               <when>
                   <test><and>
                       <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
                       <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v=""/></equal>
                   </and></test>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>
                </when>
               <when>
                   <test><and>
                       <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
                       <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v=""/></equal>
                   </and></test>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>
                </when>
               <when>
                   <test><and>
                       <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p3"/></equal>
                       <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v=""/></equal>
                   </and></test>
                   <let><clip pos="1" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>
                </when>
</choose>
        <out>
          <chunk name="ger-neg-kerek" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag></tags>
            <lu><lit v="не"/><lit-tag v="adv"/></lu><b/>
	     <lu><lit v="нужно"/><lit-tag v="pred"/></lu><b/>
            <lu>
             <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="inf"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: kerek neg"> <!-- керек емес - не нужно -->
      <pattern>
         <pattern-item n="kerek"/>
        <pattern-item n="emes"/>
      </pattern>
      <action>
        <call-macro n="conv-case1"><with-param pos="1"/></call-macro>
        <call-macro n="conv-number1"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="kerek-emes" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag></tags>
            <lu><lit v="не"/><lit-tag v="adv"/></lu><b/>
	     <lu><lit v="нужно"/><lit-tag v="pred"/></lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>


<rule comment="RULE: kerek"> <!-- керек - нужно -->
      <pattern>
         <pattern-item n="kerek"/>
         <pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="conv-case1"><with-param pos="1"/></call-macro>
        <call-macro n="conv-number1"><with-param pos="1"/></call-macro>
        <out>
          <chunk name="kerek" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag></tags>
	     <lu><lit v="нужно"/><lit-tag v="pred"/></lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: Verb Kalau Rai"> <!-- жүгіргім келеді - хочу бежать -->
      <pattern>
	<pattern-item n="want"/>
	<pattern-item n="kel"/>        
      </pattern>
      <action>
        <call-macro n="conv-case1"><with-param pos="1"/></call-macro>
         <out>
          <chunk name="kalau-rai-pres" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_pers"/></tag>
              <tag><clip pos="1" side="sl" part="a_nbr"/></tag>	
              <tag><clip pos="1" side="tl" part="a_aspec"/></tag>	
            </tags> 
          <lu>
              <lit v="хотеть"/>  
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="pres"/>
              <lit-tag v="2"/>
              <lit-tag v="3"/>
           </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>             
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>


<rule comment="RULE: Verb Kalau Rai"> <!-- жүгіргім келді -  хотел бежать -->
      <pattern>
	<pattern-item n="want"/>
	<pattern-item n="kel-ifi"/>        
      </pattern>
      <action>
        <call-macro n="conv-case1"><with-param pos="1"/></call-macro>
         <out>
          <chunk name="kalau-rai-past" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_nbr"/></tag>	
              <tag><clip pos="1" side="sl" part="a_gender"/></tag>
              <tag><clip pos="1" side="tl" part="a_aspec"/></tag>	
            </tags> 
          <lu>
              <lit v="хотеть"/>  
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="past"/>
              <lit-tag v="m"/>
              <lit-tag v="2"/>
           </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>             
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: Verb Kalau Rai NEG"> <!-- жүгіргім келмейді - не хочу бежать -->
      <pattern>
	<pattern-item n="want"/>
	<pattern-item n="kel-neg"/>        
      </pattern>
      <action>
        <call-macro n="conv-case1"><with-param pos="1"/></call-macro>
         <out>
          <chunk name="kalau-rai-neg-pres" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_pers"/></tag>
              <tag><clip pos="1" side="sl" part="a_nbr"/></tag>	
              <tag><clip pos="1" side="tl" part="a_aspec"/></tag>	
            </tags> 
            <lu>
              <lit v="не"/>
              <lit-tag v="adv"/>                          
            </lu><b/>
          <lu>
              <lit v="хотеть"/>  
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="pres"/>
              <lit-tag v="2"/>
              <lit-tag v="3"/>
           </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>             
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>



<rule comment="RULE: Verb Kalau Rai NEG"> <!-- жүгіргім келмеді -  не хотел бежать -->
      <pattern>
	<pattern-item n="want"/>
	<pattern-item n="kel-ifi-neg"/>        
      </pattern>
      <action>
        <call-macro n="conv-case1"><with-param pos="1"/></call-macro>
         <out>
          <chunk name="kalau-rai-neg-past" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_nbr"/></tag>	
              <tag><clip pos="1" side="sl" part="a_gender"/></tag>
              <tag><clip pos="1" side="tl" part="a_aspec"/></tag>	
            </tags> 
            <lu>
              <lit v="не"/>
              <lit-tag v="adv"/>                          
            </lu><b/>
          <lu>
              <lit v="хотеть"/>  
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="past"/>
              <lit-tag v="m"/>
              <lit-tag v="2"/>
           </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/> 
              <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>             
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>




<rule comment="RULE: v-coop-neg-ger_gpr post">  <!-- Aliya "шақырыспаушылықсыз" -->
<pattern>
 <pattern-item n="v-coop-neg-ger_gpr"/>
 <pattern-item n="post"/>
</pattern>
  <action>
    <out>
       <chunk name="v-coop-neg-ger_gpr+post" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag></tags>   
 <lu> <lit v="без"/> <lit-tag v="pr"/> </lu> <b/>
 <lu> <lit v="не"/> <lit-tag v="adv"/> </lu> <b/>
    <lu> 
              <lit v="звание"/>
              <lit-tag v="n"/>
              <lit-tag v="nt"/>
              <lit-tag v="nn"/>
              <lit-tag v="sg"/>
              <lit-tag v="acc"/>
</lu>
 </chunk>
  </out>
</action>
 </rule>


<rule comment="RULE: V+pass+ifi+evid"> 
<!-- шақырыппын: -->
<pattern>
 <pattern-item n="v-pass-ifi"/>
 <pattern-item n="v_vars"/>
 </pattern>
  <action>
 <choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
 <choose>
 <when>
  <test><or>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
         <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal></or></test>
  
  <out>
       <chunk name="v+vars+pass+ifi1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu> <b/>
         <lu>
               <clip pos="2" side="tl" part="whole"/></lu>
<b/>
<lu>
<var n="negation"/>
</lu>
  <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/> 
     <lit-tag v="perf"/> 
     <lit-tag v="tv"/> 
     <lit-tag v="pp"/> 
     <lit-tag v="pasv"/> 
              <lit-tag v="short"/> 
              <lit-tag v="mfn"/>
              <lit-tag v="pl"/>
   

</lu>
 </chunk>
  </out>
</when>

<otherwise>
     <out>
       <chunk name="v+vars+pass+ifi2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu><b/><lu>
               <clip pos="2" side="tl" part="whole"/></lu>
<b/> <lu>
<var n="negation"/> </lu>
 <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
    <lit-tag v="vblex"/> 
     <lit-tag v="perf"/> 
     <lit-tag v="tv"/> 
     <lit-tag v="pp"/> 
     <lit-tag v="pasv"/> 
              <lit-tag v="short"/> 
              <lit-tag v="m"/>
              <lit-tag v="sg"/>
   
   

</lu>
 </chunk>
  </out>
 </otherwise>
  </choose>
</action>
 </rule>





<rule comment="RULE: V+ifi8"> 
<!-- шақырыппын; шақырысыппын: -->
<pattern>
 <pattern-item n="v-ing8"/>
 </pattern>
  <action>
 <choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
 
  <choose>
 <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
  </choose>
<choose>
  <when>
  <test> <equal><clip pos="1" side="sl" part="a_coop"/><lit-tag v="coop"/></equal></test>
 <choose>
  <when>
  <test><or>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
         <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>        
 </or></test>
  <out>
       <chunk name="V+ifi1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   

    <lu> 
      <lit v="помочь"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <lit-tag v="past"/>
              <lit-tag v="mfn"/>
              <lit-tag v="pl"/>
 </lu>
<b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <lit-tag v="inf"/> 
   </lu>
 </chunk>
  </out>
</when>
 <otherwise>
  <out>
       <chunk name="V+ifi2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  
    <lu> 
       <lit v="помочь"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <lit-tag v="past"/>
              <lit-tag v="m"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <lit-tag v="inf"/> 
   </lu>
    </chunk>
    </out>
    </otherwise>
</choose>
</when>
<otherwise>
 <choose>
 <when>
  <test><or>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
         <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal></or></test>
  
  <out>
       <chunk name="v+ifi4" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>

  <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <lit-tag v="past"/> 
              <lit-tag v="mfn"/>
              <lit-tag v="pl"/>
   

</lu>
 </chunk>
  </out>
 
</when>

<otherwise>
     <out>
       <chunk name="v+ifi3" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
 <b/>
  <lu>
       <clip pos="1" side="tl" part="lem"/>
         <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/> 
               <lit-tag v="m"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
   </lu>
 </chunk>
  </out>
</otherwise>
  </choose> 
 </otherwise>
  </choose>
</action>
 </rule>




<rule comment="RULE: V+ifi8"> 
<!-- шақырыппын: -->
<pattern>
 <pattern-item n="v-ing8"/>
 <pattern-item n="v_vars"/>
 </pattern>
  <action>
 
 
  <choose>
 <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
  </choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
         </when>
  </choose>
<choose>
  <when>
  <test> <equal><clip pos="1" side="sl" part="a_coop"/><lit-tag v="coop"/></equal></test>
 <choose>
  <when>
  <test><or>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
         <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>        
 </or></test>
  <out>
       <chunk name="V+vars+ifi1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu>
               <clip pos="2" side="tl" part="whole"/></lu>
           
  <b/>
    <lu> 
      <lit v="помочь"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <lit-tag v="past"/>
              <lit-tag v="mfn"/>
              <lit-tag v="pl"/>
 </lu>
<b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <lit-tag v="inf"/> 
   </lu>
 </chunk>
  </out>
</when>
 <otherwise>
  <out>
       <chunk name="V+vars+ifi2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu>
               <clip pos="2" side="tl" part="whole"/></lu>
    
  <b/><lu> 
       <lit v="помочь"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <lit-tag v="past"/>
              <lit-tag v="m"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <lit-tag v="inf"/> 
   </lu>
    </chunk>
    </out>
    </otherwise>
</choose>
</when>
<otherwise>
 <choose>
 <when>
  <test><or>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
         <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal></or></test>
  
  <out>
       <chunk name="v+vars+ifi4" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu> <b/>
         <lu>
               <clip pos="2" side="tl" part="whole"/></lu>
<b/>

  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <lit-tag v="past"/> 
              <lit-tag v="mfn"/>
              <lit-tag v="pl"/>
   

</lu>
 </chunk>
  </out>
 
</when>

<otherwise>
     <out>
       <chunk name="v+vars+ifi3" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu><b/><lu>
               <clip pos="2" side="tl" part="whole"/></lu>
<b/> 
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
    
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/> 
               <lit-tag v="m"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
   

</lu>
 </chunk>
  </out>
</otherwise>
  </choose> 
 </otherwise>
  </choose>
</action>
 </rule>



<rule comment="RULE: V+v_vars7"> 
<!-- шақырысқан екенбіз бе: 
     шақырысады екенбіз бе: 
      -->
<pattern>
 <pattern-item n="v-coop-evid"/>
 <pattern-item n="v_vars"/> 
</pattern>
  <action>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
 <choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="aor"/></equal>
	</test>
      <let><clip pos="1" side="tl" part="a_tense"/><lit-tag v="fut"/></let>
      
   </when>
  </choose>
  <choose>
 <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
  </choose>

  <choose>
<when>
  <test> <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal></test>
  
  <out>
       <chunk name="v+vars+coop+evid1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>

<b/>
<lu>
<clip pos="2" side="tl" part="whole"/>
</lu>
  <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     
     <lit-tag v="vblex"/>
     <lit-tag v="perf"/>
     <lit-tag v="iv"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/>
              <lit-tag v="mfn"/>
              <lit-tag v="pl"/>
   

</lu>
 </chunk>
  </out>
</when>
 <otherwise>
  <out>
       <chunk name="v+vars+coop+evid2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
<clip pos="2" side="tl" part="whole"/>
</lu>
<b/><lu>
<var n="negation"/></lu>
 <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
    <lit-tag v="vblex"/>
     <lit-tag v="perf"/>
    <lit-tag v="iv"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/>
              <var n="gender"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
   

</lu>
 </chunk>
  </out>
</otherwise>
  </choose>
</action>
 </rule>


<rule comment="RULE: V+v_vars7"> 
<!-- шақырады екенбіз бе: -->
<pattern>
 <pattern-item n="v-ing7"/>
 <pattern-item n="v_vars"/> 
</pattern>
  <action>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
 
  <choose>
 <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
  </choose>

 <choose>
 <when>
      <test>
	<and>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
      </and>
      </test>
 <out>
          <chunk name="v+vars+evid1">
            <tags><tag><lit-tag v="SV"/></tag>
            
              </tags>
          <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
<clip pos="2" side="tl" part="whole"/>
</lu>

<b/> <lu>
<var n="negation"/></lu>
  <b/>
           <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <clip pos="1" side="tl" part="a_tense"/>
              <var n="gender"/>
             <clip pos="1" side="sl" part="a_nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

  </when>
 <otherwise>


  <choose>
<when>
  <test><and>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
         <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal></and></test>
  
  <out>
       <chunk name="v+vars+evid4" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>

<b/>
<lu>
<clip pos="2" side="tl" part="whole"/>
</lu>
  <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <lit-tag v="past"/> 
              <lit-tag v="mfn"/>
              <lit-tag v="pl"/>
</lu>
 </chunk>
  </out>
 
</when>

   <when>
  <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
         </test>
  
  <out>
       <chunk name="v+vars+evid5" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>

<b/>
<lu>
<clip pos="2" side="tl" part="whole"/>
</lu>
  <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <lit-tag v="past"/> 
              <lit-tag v="mfn"/>
              <lit-tag v="pl"/>
</lu>
 </chunk>
  </out>
 
</when>

  <when>
  <test><equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal></test>
  
  <out>
       <chunk name="v+vars+evid2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
<clip pos="2" side="tl" part="whole"/>
</lu>

<b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/> 
              <var n="gender"/>
              <lit-tag v="p2"/>
              <lit-tag v="pl"/>
   

</lu>
 </chunk>
  </out>
 
</when>
   <when>
  <test><equal><clip pos="1" side="sl" part="a_pass"/><lit-tag v="pass"/></equal></test>
  
  <out>
       <chunk name="v+vars+evid4" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
<clip pos="2" side="tl" part="whole"/>
</lu>

<b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     
     <lit-tag v="vblex"/>
     <lit-tag v="perf"/>
              <lit-tag v="tv"/>
              <lit-tag v="fut"/> 
              <lit-tag v="p3"/>
              <lit-tag v="pl"/>
   

</lu>
 </chunk>
  </out>
 
</when>
 

<otherwise>
 
    <out>
       <chunk name="v+vars+evid3" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
<clip pos="2" side="tl" part="whole"/>
</lu>
<b/><lu>
<var n="negation"/></lu>
 <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
    
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/> 
           <!--   <var n="gender"/>  -->
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
   

</lu>
 </chunk>
  </out>
</otherwise>
  </choose>
 </otherwise>
  </choose>
 
</action>
 </rule>

<rule comment="RULE: V+evid7"> 
<!-- шақырады екенбіз: -->
<pattern>
 <pattern-item n="v-ing7"/>
 </pattern>
  <action>
 <choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
 
  <choose>
 <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
  </choose>

 <choose>
 <when>
      <test>
	<and>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
      </and>
      </test>
 <out>
          <chunk name="v-neg-past-evid">
            <tags><tag><lit-tag v="SV"/></tag>
            
              </tags>
          <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
<var n="negation"/>
</lu>
  <b/>
           <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <clip pos="1" side="tl" part="a_tense"/>
              <var n="gender"/>
             <clip pos="1" side="sl" part="a_nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>

  </when>
 <otherwise>


  <choose>
  <when>
  <test><and>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
         <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal></and></test>
  
  <out>
       <chunk name="V+evid1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
<var n="negation"/>
</lu>
  <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <lit-tag v="past"/> 
              <lit-tag v="mfn"/>
              <lit-tag v="pl"/>
   

</lu>
 </chunk>
  </out>
 
</when>
 <when>
  <test><equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal></test>
  
  <out>
       <chunk name="V+evid3" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
<var n="negation"/>
</lu>
  <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/> 
              
              <lit-tag v="p2"/>
              <lit-tag v="pl"/>
   

</lu>
 </chunk>
  </out>
 
</when>
<otherwise>
 
    <out>
       <chunk name="V+evid2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu> 
      <lit v="оказываться"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu><var n="negation"/>
</lu> <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
    
     <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/> 
              <var n="gender"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
   

</lu>
 </chunk>
  </out>
</otherwise>
  </choose>
 </otherwise>
  </choose>
</action>
 </rule>


<rule comment="RULE: V+v_vars1"> 

<pattern>
 <pattern-item n="v-ing1"/>
 <pattern-item n="v_vars"/> 
</pattern>
  <action>
<choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v="p2"/></let>
      <let><clip pos="1" side="tl" part="a_formality"/><lit-tag v=""/></let>
      <let><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></let>
   </when>
</choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="aor"/></equal>
	</test>
      <let><clip pos="1" side="tl" part="a_tense"/><lit-tag v="fut"/></let>
      </when>
  </choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_coop"/><lit-tag v="coop"/></equal>
	</test>
       <out>
       <chunk name="V+coop+v_vars1" case="caseFirstWord">  <!-- шақырысады да -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu><var n="negation"/>
    </lu> <b/> <lu>
    <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <clip pos="1" side="tl" part="a_tense"/>
              <clip pos="1" side="tl" part="a_gender"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/> 
     </lu>
             <b/>
            <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>

   </when>

    <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pass"/><lit-tag v="pass"/></equal>
	</test>
       <out>
       <chunk name="V+pass+v_vars1" case="caseFirstWord">  <!-- шақырылады да -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu><var n="negation"/>
    </lu> <b/> <lu>
    <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="tv"/>
              <lit-tag v="pp"/><lit-tag v="pasv"/><lit-tag v="short"/><lit-tag v="mfn"/><lit-tag v="pl"/>
             
     </lu>
             <b/>
            <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>

   </when>


  <otherwise>
    <out>
       <chunk name="V+v_vars1" case="caseFirstWord">  <!-- шақырады да -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu>
   
    <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="a_trans"/>
              <lit-tag v="pres"/>              
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/> 
     </lu>
             <b/>
            <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>
</otherwise>
</choose>
</action>
 </rule>



<rule comment="RULE: V+fut"> 

<pattern>
 <pattern-item n="v-pass-fut"/>
 <pattern-item n="v_vars"/> 
</pattern>
  <action>
<choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
      <let><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></let>
      <let><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></let>
   </when>
</choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
<choose>
   <when>
      <test><or>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
        <equal><clip pos="1" side="sl" part="a_coop"/><lit-tag v="coop"/></equal>
	</or></test>
    <out>
       <chunk name="V+neg-fut_vars1" case="caseFirstWord">  <!-- шақырмас та , шақырысар да -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu> 
      <lit v="мочь"/>
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/><lu><var n="negation"/></lu>
<b/>
<lu>
   
    <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="vblex"/><lit-tag v="perf"/><lit-tag v="iv"/>
              <lit-tag v="fut"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>
             <b/>
            <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>
</when>
<otherwise>
    <out>
       <chunk name="V+fut_vars1" case="caseFirstWord">  <!-- шақырар да -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu> 
      <lit v="мочь"/>
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
   
    <clip pos="1" side="tl" part="lem"/>
             <lit-tag v="vblex"/><lit-tag v="perf"/><lit-tag v="iv"/>
              <lit-tag v="pres"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>
             <b/>
            <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>
</otherwise>
</choose>
</action>
 </rule>

<rule comment="RULE: V+fut"> 

<pattern>
 <pattern-item n="v-pass-fut"/>
 
</pattern>
  <action>
<choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
      <let><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></let>
      <let><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></let>
   </when>
</choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
<choose>
   <when>
      <test><or>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
        <equal><clip pos="1" side="sl" part="a_coop"/><lit-tag v="coop"/></equal>
	</or></test>
    <out>
       <chunk name="V+neg-fut_pass1" case="caseFirstWord">  <!-- шақырмас та , шақырысар да -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu> 
      <lit v="мочь"/>
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/><lu><var n="negation"/></lu>
<b/>
<lu>
   
    <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="vblex"/><lit-tag v="perf"/><lit-tag v="iv"/>
              <lit-tag v="fut"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>
            
 </chunk>
  </out>
</when>
<otherwise>
    <out>
       <chunk name="V+fut_pass1" case="caseFirstWord">  <!-- шақырар да -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu> 
      <lit v="мочь"/>
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
   
    <clip pos="1" side="tl" part="lem"/>
             <lit-tag v="vblex"/><lit-tag v="perf"/><lit-tag v="iv"/>
              <lit-tag v="pres"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>
             
 </chunk>
  </out>
</otherwise>
</choose>
</action>
 </rule>




<rule comment="RULE: V+fut"> 

<pattern>
 <pattern-item n="v-fut"/>
 <pattern-item n="v_vars"/> 
</pattern>
  <action>
<choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
      <let><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></let>
      <let><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></let>
   </when>
</choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
<choose>
   <when>
      <test><or>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
        <equal><clip pos="1" side="sl" part="a_coop"/><lit-tag v="coop"/></equal>
	</or></test>
    <out>
       <chunk name="V+neg-fut_vars1" case="caseFirstWord">  <!-- шақырмас та , шақырысар да -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu> 
      <lit v="мочь"/>
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/><lu><var n="negation"/></lu>
<b/>
<lu>
   
    <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="sl" part="a_verb"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <lit-tag v="fut"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>
             <b/>
            <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>
</when>
<otherwise>
    <out>
       <chunk name="V+fut_vars1" case="caseFirstWord">  <!-- шақырар да -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu> 
      <lit v="мочь"/>
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
   
    <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="sl" part="a_verb"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <lit-tag v="pres"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>
             <b/>
            <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>
</otherwise>
</choose>
</action>
 </rule>


<rule comment="RULE: V+fut"> 

<pattern>
 <pattern-item n="v-fut"/>
</pattern>
  <action>
<choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
      <let><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></let>
      <let><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></let>
   </when>
</choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
<choose>
   <when>
      <test><or>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
        <equal><clip pos="1" side="sl" part="a_coop"/><lit-tag v="coop"/></equal>
	</or></test>
    <out>
       <chunk name="V+neg-fut1" case="caseFirstWord">  <!-- шақырмас  , шақырысар  -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu> 
      <lit v="мочь"/>
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/><lu><var n="negation"/></lu>
<b/>
<lu>
   
    <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="sl" part="a_verb"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <lit-tag v="fut"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>
            
 </chunk>
  </out>
</when>
<otherwise>
    <out>
       <chunk name="V+fut1" case="caseFirstWord">  <!-- шақырар -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   <lu> 
      <lit v="мочь"/>
              <lit-tag v="vbmod"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
 </lu>
<b/>
<lu>
   
    <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="sl" part="a_verb"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <lit-tag v="pres"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>
            
 </chunk>
  </out>
</otherwise>
</choose>
</action>
 </rule>


<rule comment="RULE: V+v_vars1"> 

<pattern>
 <pattern-item n="v-ing1"/>

</pattern>
  <action>
<choose>
 <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
      <let><clip pos="1" side="tl" part="a_pers"/><lit-tag v=""/></let>
   </when>
  </choose>

<choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
      <let><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></let>
      <let><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></let>
   </when>
</choose>
    <out>
       <chunk name="V+ing1" case="caseFirstWord">  <!-- шақырады  -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="sl" part="a_verb"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <lit-tag v="pres"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>
             
 </chunk>
  </out>
</action>
 </rule>


<!--
<rule comment="RULE: V+1"> 
 шақырса ма:шақыр<v><tv><prc_cond><p3><sg>+ма<qst> 
<pattern>
 <pattern-item n="v-ing1"/>
</pattern>
  <action>

    <out>
       <chunk name="V+present" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="sl" part="a_verb"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/>
              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
     </lu>           
 </chunk>
  </out>
</action>
 </rule>
-->


<rule comment="RULE: V"> 
<!-- шақырып:шақыр<v><tv><prc_perf> -->
<!-- шақырғалы:шақыр<v><tv><gna_after> -->
<pattern>
 <pattern-item n="v-ing5"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
<choose>
 <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_tns"/><lit-tag v="prc_impf"/></equal>
        <not><equal><clip pos="1" side="sl" part="a_pass"/><lit-tag v="pass"/></equal></not>        
	</and></test>
     <out>
       <chunk name="V+gna+vars1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   <lu>
 <var n="negation"/></lu>
<b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/>
     <lit-tag v="impf"/>
    <clip pos="1" side="sl" part="a_trans"/>
                  <lit-tag v="pprs"/>
                  <lit-tag v="adv"/>       
 </lu><b/><lu><clip pos="2" side="tl" part="whole"/></lu>
 </chunk>
  </out>
   </when>
  <otherwise>
    <out>
       <chunk name="V+gna+vars2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/>
     <lit-tag v="perf"/>
    <clip pos="1" side="sl" part="a_trans"/>
                  <lit-tag v="pp"/>
                  <lit-tag v="adv"/>       
 </lu><b/><lu><clip pos="2" side="tl" part="whole"/></lu>
 </chunk>
  </out></otherwise>
  </choose>
</action>
 </rule>


<rule comment="RULE: V"> 
<!-- шақырып:шақыр<v><tv><prc_perf> -->
<!-- шақырғалы:шақыр<v><tv><gna_after> -->
<pattern>
 <pattern-item n="v-ing5"/>
</pattern>
  <action>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_tns"/><lit-tag v="prc_impf"/></equal>
        
	</test>
     <out>
       <chunk name="V+gna1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   <lu>
 <var n="negation"/></lu>
<b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/>
     <lit-tag v="impf"/>
    <clip pos="1" side="sl" part="a_trans"/>
                  <lit-tag v="pprs"/>
                  <lit-tag v="adv"/>       
 </lu>
 </chunk>
  </out>
   </when>
  <otherwise>
    <out>
       <chunk name="V+gna2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   <lu>
 <var n="negation"/></lu>
<b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/>
     <lit-tag v="perf"/>
    <clip pos="1" side="sl" part="a_trans"/>
                  <lit-tag v="pp"/>
                  <lit-tag v="adv"/>       
 </lu>
 </chunk>
  </out></otherwise>
  </choose>
</action>
 </rule>


<rule comment="RULE: V+cond2"> 
<!-- шақырса:шақыр<v><tv><prc_cond><p3><sg> 
-->
<pattern>
 <pattern-item n="v-ing2"/>

</pattern>
  <action>
 <choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
      <let><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></let>
      <let><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></let>
   </when>
</choose>
    <out>
       <chunk name="V+v_vars2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu>
              <lit v="если"/>
              <lit-tag v="cnjsub"/>
 </lu>
 
 <b/>
  <lu>
    
    <clip pos="1" side="tl" part="lem"/>
    <lit-tag v="vblex"/>
    <lit-tag v="perf"/>
                
              <clip pos="1" side="sl" part="a_trans"/>
               <lit-tag v="fut"/>
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
      </lu>
 </chunk>
  </out>
</action>
 </rule>


<rule comment="RULE: V+v_vars2"> 
<!-- шақырса ма:шақыр<v><tv><prc_cond><p3><sg>+ма<qst> 
-->
<pattern>
 <pattern-item n="v-ing2"/>
 <pattern-item n="v_vars"/> 
</pattern>
  <action>
 <choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
      <let><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></let>
      <let><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></let>
   </when>
</choose>
    <out>
       <chunk name="V+v_vars2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
    <lu>
              <lit v="если"/>
              <lit-tag v="cnjsub"/>
 </lu>
  <b/>
 <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 <b/>
  <lu>
    
    <clip pos="1" side="tl" part="lem"/>
    <lit-tag v="vblex"/>
    <lit-tag v="perf"/>
                
              <clip pos="1" side="sl" part="a_trans"/>
               <lit-tag v="fut"/>
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
      </lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: V+v_vars3"> 
<!-- шақырайық-ақ:шақыр<v><tv><opt><p1><pl>+-ақ<postadv> -->
<pattern>
 <pattern-item n="v-ing3"/>
 <pattern-item n="v_vars"/> 
</pattern>
  <action>
    <out>
       <chunk name="V+v_vars3" case="caseFirstWord"> <!-- шақырайық-ақ:шақыр<v><tv><opt><p1><pl>+-ақ<postadv> -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   
 <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 <b/>
  <lu>
    
    <clip pos="1" side="tl" part="lem"/>
            <lit-tag v="vblex"/>
            <lit-tag v="perf"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <lit-tag v="fut"/>
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
   </lu>
 
 </chunk>
  </out>
</action>
 </rule>



<rule comment="RULE: V+fut"> 

<pattern>
 <pattern-item n="v-ing3"/>
 
</pattern>
  <action>
    <out>
       <chunk name="V-fut" case="caseFirstWord"> <!-- шақырайық:шақыр<v><tv><opt><p1><pl> -->
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
   

  <lu>
    
    <clip pos="1" side="tl" part="lem"/>
            <lit-tag v="vblex"/>
            <lit-tag v="perf"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <lit-tag v="fut"/>
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
   </lu>
 
 </chunk>
  </out>
</action>
 </rule>




<rule comment="RULE: V+v_vars"> 
<!-- шақыра да:шақыр<v><tv><prc_impf>+да<cnjcoo> -->
<pattern>
 <pattern-item n="v-ing"/>
 <pattern-item n="v_vars"/> 
</pattern>
  <action>
    <out>
       <chunk name="V+v_vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
<clip pos="2" side="tl" part="whole"/>
 </lu>
 <b/>
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
   <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="a_trans"/>
                  <lit-tag v="pprs"/>
                  <lit-tag v="adv"/>       
 </lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: V"> 
<!-- шақыра:шақыр<v><tv><prc_impf> -->
<pattern>
 <pattern-item n="v-ing"/>
</pattern>
  <action>
    <out>
       <chunk name="V+adv" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
 
  <lu>
   
    <clip pos="1" side="tl" part="lem"/>
   <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="a_trans"/>
                  <lit-tag v="pprs"/>
                  <lit-tag v="adv"/>       
 </lu>
 </chunk>
  </out>
</action>
 </rule>
  



<rule comment="RULE: V+past"> 
<!-- шақыратын ғой:шақыр<v><tv><pih><p3><pl>+ғой<mod_ass> -->
<pattern>
 <pattern-item n="v-ing4"/>

</pattern>
  <action>
<choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	      </test>
      <let><var n="gender"/><lit-tag v="m"/></let>
   </when>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	</test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
   </when>
<otherwise>
      <let><var n="gender"/><lit-tag v="5"/></let>
</otherwise>
</choose>
    <out>
       <chunk name="V+past" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>  
    
  <lu>
  
    <clip pos="1" side="tl" part="lem"/>
     <lit-tag v="vblex"/>
            <lit-tag v="perf"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <lit-tag v="past"/>
              <var n="gender"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
 </lu>
 </chunk>
  </out>
</action>
 </rule>







<rule comment="RULE:n-px postadv"> 
<!-- Ernur 
  ~мектебімдегіден-ақ:мектеп<n><px1sg><loc><subst><abl>+-ақ<postadv>
  ~мектептерімдегі-ақ:мектеп<n><pl><px1sg><loc><subst><nom>+-ақ<postadv> -->
<pattern>
 <pattern-item n="n-poss"/>
 <pattern-item n="cop"/>
 <pattern-item n="postadv"/> <!-- sozdan cat postadv -->
</pattern>
  <action>
    <out>
       <chunk name="n_px-postadv" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
              <lit v="даже"/>
              <lit-tag v="adv"/>
 </lu>
 <b/>
  <lu>
              <lit v="из"/>
              <lit-tag v="pr"/>
 </lu>
 <b/>
  <lu>
              <lit v="мой"/>
              <lit-tag v="det"/>
              <lit-tag v="pos"/>
              <lit-tag v="f"/>
              <lit-tag v="an"/>
              <lit-tag v="sg"/>
              <lit-tag v="gen"/>
 </lu>
 <b/>
  <lu>
  <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="sg"/>
              <lit-tag v="gen"/>
 </lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE:n-poss-nom postadv"> 

<!--  мектебім-ақ:мектеп<n><px1sg><nom>+-ақ<postadv>
 -->   
 <pattern>
 <pattern-item n="n-poss-nom"/>
 <pattern-item n="cop"/>
 <pattern-item n="postadv"/> <!-- sozdan cat postadv -->
</pattern>
  <action>
    <out>
       <chunk name="n_px-postadv" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags> 
      <lu>
              <lit v="даже"/>
              <lit-tag v="adv"/>
 </lu> 
 <b/>
   <lu>
  <lit v="мой"/>
              <lit-tag v="det"/>
              <lit-tag v="pos"/>
              <lit-tag v="f"/>
              <lit-tag v="an"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
</lu>
 <b/>
  <lu>
  <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
 </lu> 
 </chunk>
  </out>
</action>
 </rule>

  <rule comment="RULE:n-pos cnjcoo"> 
<!-- Ernur 
  ~мектебімдегі де:мектеп<n><px1sg><loc><subst><nom>+е<cop><aor><p3><sg>+да<cnjcoo>
-->
<pattern>
 <pattern-item n="n-poss"/>
 <pattern-item n="cop"/>
 <pattern-item n="cnjcoo"/> <!-- sozdan cat postadv -->
</pattern>
  <action>
    <out>
       <chunk name="n_poss-cnjcoo" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
      <lu>
              <lit v="из"/>
              <lit-tag v="pr"/>
 </lu>
<b/>  
   <lu>
  <lit v="мой"/>
              <lit-tag v="det"/>
              <lit-tag v="pos"/>
              <lit-tag v="f"/>
              <lit-tag v="an"/>
              <lit-tag v="sg"/>
              <lit-tag v="gen"/>
</lu>
 <b/>
  <lu>
  <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="pl"/>
              <lit-tag v="nom"/>
 </lu> 
 <b/>
   <lu>
              <lit v="тоже"/>
              <lit-tag v="adv"/>
 </lu>
 </chunk>
  </out>
</action>
 </rule>
<rule comment="RULE:Nums"> 
<!-- Ernur Nums-->
<pattern>
 <pattern-item n="num-subst"/>
 <pattern-item n="cop"/>
</pattern>
  <action>
    <out>
       <chunk name="Numdar" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
  <clip pos="1" side="tl" part="lem"/>
                <!--  
                 <clip pos="1" side="tl" part="a_gender"/>
                 <clip pos="1" side="tl" part="a_nbr"/> -->
               <!--   <clip pos="1" side="tl" part="a_case"/> -->
               
<lit-tag v="num"/>
<lit-tag v="m"/>
               <lit-tag v="an"/>
               <lit-tag v="sg"/>
                <lit-tag v="nom"/>


 </lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: ADJ sim"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-sim"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+sim" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="как"/>
  <lit-tag v="adv"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="nom"/>
 </lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+sim1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="как"/>
  <lit-tag v="adv"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="nom"/>
 </lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>


<rule comment="RULE: ADJ subst-subst"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-subst2"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+subst+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="gen"/>
 </lu><b/><lu><clip pos="2" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+subst1+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="gen"/>
 </lu><b/><lu><clip pos="2" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>

<rule comment="RULE: ADJ subst-subst"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-comp"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+comp1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="более"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="nom"/>
 </lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+comp2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="более"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="nom"/>
 </lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>

<rule comment="RULE: ADJ subst-subst"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-comp"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+comp+vars1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="более"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="nom"/>
 </lu><b/><lu><clip pos="2" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+comp+vars2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="более"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="nom"/>
 </lu><b/><lu><clip pos="2" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>

<rule comment="RULE: ADJ subst-subst"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-comp"/>
  <pattern-item n="cop"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+comp1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="более"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="nom"/>
 </lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+comp2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="более"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="nom"/>
 </lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>

<rule comment="RULE: ADJ subst-subst"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-comp"/>
  <pattern-item n="cop"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+comp+vars1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="более"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="nom"/>
 </lu><b/><lu><clip pos="3" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+comp+vars2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="более"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="nom"/>
 </lu><b/><lu><clip pos="3" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>






  <rule comment="RULE: ADJ+cnjcoo"> <!--  Ernur 
    ^жақсы<adj><subst><dat>+да<cnjcoo>$      ^хороший<adj><sint><subst><dat>$ ^тоже<postadv>$    #хороший\<adj\>\<sint\>\<dat\> #тоже -->

<pattern>
 <pattern-item n="adj"/>
<pattern-item n="cnjcoo"/>
</pattern>
  <action>
 <out>
       <chunk name="adj" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="dat"/>
 </lu>
 <b/>
<lu>
   <lit v="тоже"/>
  <lit-tag v="adv"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule>   

<rule comment="RULE:prn+postadv"> <!--  өздері мекен:өз<prn><ref><px3pl><nom>+ғана<postadv>
 -->
<pattern>
 <pattern-item n="prn"/>
 <pattern-item n="cop"/>
<pattern-item n="prn_vars1"/>
</pattern>
  <action>
 <out>
       <chunk name="prn+prn_vars1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu><!-- 
  det><ref><mfn><an><pl><nom -->
  <clip pos="1" side="tl" part="lem"/><!-- 
  <clip pos="1" side="tl" part="a_nom"/> -->
  <lit-tag v="det.pos"/>
 <!--  <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
      <clip pos="1" side="tl" part="a_nbr"/> 
        <clip pos="1" side="tl" part="a_case"/> -->
        <lit-tag v="mfn"/>
        <lit-tag v="an"/>
        <lit-tag v="pl"/>
 <lit-tag v="nom"/>
 </lu>
 <b/>
 <lu>
  <clip pos="3" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule>

<rule comment="RULE:prn+postadv"> <!--  өздері ғана:өз<prn><ref><px3pl><nom>+ғана<postadv>
 -->
<pattern>
 <pattern-item n="prn"/>
 <pattern-item n="cop"/>
<pattern-item n="prn_vars"/>
</pattern>
  <action>
 <out>
       <chunk name="prn+prn_vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <clip pos="3" side="tl" part="whole"/>
 </lu>
<b/>
<lu><!-- 
  det><ref><mfn><an><pl><nom -->
  <clip pos="1" side="tl" part="lem"/><!-- 
  <clip pos="1" side="tl" part="a_nom"/> -->
  <lit-tag v="det.pos"/>
 <!--  <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
      <clip pos="1" side="tl" part="a_nbr"/> 
        <clip pos="1" side="tl" part="a_case"/> -->
        <lit-tag v="mfn"/>
        <lit-tag v="an"/>
        <lit-tag v="pl"/>
<lit-tag v="nom"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule>

<rule comment="RULE: ADJ+сыз/сіз+cnjcoo"> <!--  ADJ Ernur 
жақсыдағыданбыз да:жақсы<adj><subst><loc><subst><abl>+е<cop><aor><p1><pl>+да<cnjcoo>
 -->
<pattern>
 <pattern-item n="adj-subst"/>
 <pattern-item n="cop"/>
<pattern-item n="cnjcoo"/>
</pattern>
  <action>
 <out>
       <chunk name="adj-subst сыз/сіз" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="без"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
   <lit-tag v="gen"/>
 </lu>
 <b/>
<lu>
   <lit v="тоже"/>
  <lit-tag v="adv"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule>

<rule comment="RULE:n-poss-nom cnjcoo"> 
<!-- Ernur 
  ~мектебі де:^мектеп<n><px3sp><nom>$ ^е<cop><aor><p3><sg>$ ^да<cnjcoo>$
-->
<pattern>
 <pattern-item n="n-poss-nom"/>
 <pattern-item n="cop"/>
 <pattern-item n="cnjcoo"/> 
</pattern>
  <action>
    <out>
       <chunk name="n-px3sp cnjcoo" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
  <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
  
<!--     <clip pos="1" side="tl" part="a_nbr"/>
    <clip pos="1" side="tl" part="a_case"/> -->
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>

 </lu>
  <b/>
  <lu>
              <lit v="тоже"/>
              <lit-tag v="adv"/>
 </lu>
 </chunk>
  </out>
</action>
 </rule>


 



<!-- SECTION: Noun phrases 
<rule comment="RULE:S-J">
<pattern>
 <pattern-item n="cat_prn"/>
</pattern>
  <action>
 <out>
       <chunk name="__S-J__" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <clip pos="1" side="tl" part="lem"/>
<clip pos="1" side="tl" part="_attr_prn_"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule> -->

    <rule comment="REGLA: N">
      <!--
      INPUT:  ^мектеп<n><attr>/школьный<adj><m><an><sg><nom>$
      OUTPUT: ^adj<AdjP>{^школьный<adj><m><an><sg><nom>$}$
      INPUT:  ^мектеп<n><nom>/школа<n><f><nn><nom>$
      OUTPUT: ^n<SN><nom>{^школа<n><f><nn><sg><2>$}$
      INPUT:  ^аға<n><px1sg><dat>/брат<n><m><aa><px1sg><dat>$
      OUTPUT: ^n<SN><dat>{^мой<det><pos><m><an><sg><dat>$ ^брат<n><m><aa><sg><dat>$}$
      INPUT:  ^мектеп<n><loc>/школа<n><f><nn><loc>$
      OUTPUT: ^pr_n<PP>{^в<pr>$ ^школа<n><f><nn><sg><prp>$}$
      INPUT:  ^жақсы<adj><subst><dat>/хороший<adj><sint><m><an><dat>$
      OUTPUT: ^n<SN><dat>{^хороший<adj><sint><m><an><sg><dat>$}$
      INPUT:  ^ол<prn><dem><gen>/его<det><pos>/он<prn><pers><p3><m><sg><gen>$ 
^ол<prn><dem><gen><@ADVL→>/он<prn><pers><p3><m><sg><gen><@ADVL→>$
      OUTPUT: ^n<SN><gen><@ADVL→>{^он<prn><pers><p3><m><sg><2>$}$
      -->
      <pattern>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
	      <and>
	        <equal><clip pos="1" side="sl" part="a_syntag"/><lit-tag v="attr"/></equal>
	        <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adj"/></equal>
	      </and>
	    </test>
            <out>
              <chunk name="adj2">
                <tags>
                  <tag><lit-tag v="AdjP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>

                </lu>
              </chunk>
            </out>
	  </when>
          <when c="similative is translated with an adverb (happens in case of pronouns
		   шундый->так)">
	    <test>
	      <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adv"/></equal>
	    </test>
	    <out>
	      <chunk name="adv">
                <tags>
                  <tag><lit-tag v="AdvP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
	      </chunk>
	    </out>
          </when>
          <when>
	    <test>
	      <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="det.pos"/></equal>
	    </test>
	    <out>
	      <chunk name="det">
                <tags>
                  <tag><lit-tag v="DET"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
	      </chunk>
	    </out>
          </when>
          <when c="n.px3sp.{dat/abl/loc} is translated with a preposition"><!--what is that?? /AS 10.05.2016 -->
            <test><equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="pr"/></equal></test>
            <out>
              <chunk name="pr">
                <tags>
                  <tag><lit-tag v="PREP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_pr"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
            <choose>
              <when>
                <test><equal><var n="preposition"/><lit v=""/></equal></test>
                <out>
                  <chunk name="n-dsfsd">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="a_case"/></tag>
                      <tag><clip pos="1" side="sl" part="a_SYNLABEL"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
                    </tags>
                     
                    <var n="possessive"/>
                     <b/>
                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			<lit-tag v="3"/>
		      <clip pos="1" side="tl" part="a_case"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

<otherwise>
            <call-macro n="convert-pers-affix-to-pers-determiner">
              <with-param pos="1"/>
            </call-macro>
            <choose>
              <when>
                <test><equal><var n="preposition"/><lit v=""/></equal></test>
                <out>
                  <chunk name="n_pers4">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="a_case"/></tag>
                      <tag><clip pos="1" side="sl" part="a_SYNLABEL"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
                    </tags>
			<lu>
                    <var n="pronoun"/>
			</lu>
<b/>
                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			<lit-tag v="3"/>
		      <clip pos="1" side="tl" part="a_case"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
          
              <otherwise>
                <out>
                  <chunk name="pr_n1">
                    <tags>
                      <tag><lit-tag v="PP"/></tag>
                    </tags>
 <lu><var n="pronoun"/></lu>
<b/>
<lu> <!-- put VARIABLES into lex units <lu> / AS-->
                    <var n="preposition"/>
</lu>
<b/>

                    <var n="possessive"/><b/> <!--what does it produce? tag or word? -->

<!-- need blank space here, I put /AS 10.05.2016-->

                    <lu>
		      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
 </otherwise>
        </choose>
      </action>
    </rule>

<rule comment="REGLA: N post">
    
      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="postadv"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
	      <and>
	        <equal><clip pos="1" side="sl" part="a_syntag"/><lit-tag v="attr"/></equal>
	        <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adj"/></equal>
	      </and>
	    </test>
            <out>
              <chunk name="adj2">
                <tags>
                  <tag><lit-tag v="AdjP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>

                </lu>
              </chunk>
            </out>
	  </when>
          <when c="similative is translated with an adverb (happens in case of pronouns
		   шундый->так)">
	    <test>
	      <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adv"/></equal>
	    </test>
	    <out>
	      <chunk name="adv">
                <tags>
                  <tag><lit-tag v="AdvP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
	      </chunk>
	    </out>
          </when>
          <when>
	    <test>
	      <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="det.pos"/></equal>
	    </test>
	    <out>
	      <chunk name="det">
                <tags>
                  <tag><lit-tag v="DET"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
	      </chunk>
	    </out>
          </when>
          <when c="n.px3sp.{dat/abl/loc} is translated with a preposition"><!--what is that?? /AS 10.05.2016 -->
            <test><equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="pr"/></equal></test>
            <out>
              <chunk name="pr">
                <tags>
                  <tag><lit-tag v="PREP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_pr"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
            <choose>
              <when>
                <test><equal><var n="preposition"/><lit v=""/></equal></test>
                <out>
                  <chunk name="n-postadv">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="a_case"/></tag>
                      <tag><clip pos="1" side="sl" part="a_SYNLABEL"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
                    </tags>
 			
                    <var n="possessive"/>
<b/>
                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			<lit-tag v="3"/>
		      <clip pos="1" side="tl" part="a_case"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>

<otherwise>
            <call-macro n="convert-pers-affix-to-pers-determiner">
              <with-param pos="1"/>
            </call-macro>
            <choose>
              <when>
                <test><equal><var n="preposition"/><lit v=""/></equal></test>
                <out>
                  <chunk name="n_pers5">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="a_case"/></tag>
                      <tag><clip pos="1" side="sl" part="a_SYNLABEL"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
                    </tags>
                    <lu>
                    <var n="pronoun"/>
                    </lu>
                      <b/>
                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			<lit-tag v="3"/>
		      <clip pos="1" side="tl" part="a_case"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
          
              <otherwise>
                <out>
                 <chunk name="pr_n3">
                    <tags>
                      <tag><lit-tag v="PP"/></tag>
                    </tags>
<lu>
<var n="pronoun"/>
</lu>
<b/>

 <lu> <!-- put VARIABLES into lex units <lu> / AS-->


                    <var n="preposition"/>


</lu>
<b/>


                    <var n="possessive"/> <!--what does it produce? tag or word? -->

<b/>


<!-- need blank space here, I put /AS 10.05.2016-->
   <lu>
		      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
 </otherwise>
        </choose>
      </action>
    </rule>

<rule comment="REGLA: N">
      <!--
      INPUT:  ^мектеп<n><attr>/школьный<adj><m><an><sg><nom>$
      OUTPUT: ^adj<AdjP>{^школьный<adj><m><an><sg><nom>$}$
      INPUT:  ^мектеп<n><nom>/школа<n><f><nn><nom>$
      OUTPUT: ^n<SN><nom>{^школа<n><f><nn><sg><2>$}$
      INPUT:  ^аға<n><px1sg><dat>/брат<n><m><aa><px1sg><dat>$
      OUTPUT: ^n<SN><dat>{^мой<det><pos><m><an><sg><dat>$ ^брат<n><m><aa><sg><dat>$}$
      INPUT:  ^мектеп<n><loc>/школа<n><f><nn><loc>$
      OUTPUT: ^pr_n<PP>{^в<pr>$ ^школа<n><f><nn><sg><prp>$}$
      INPUT:  ^жақсы<adj><subst><dat>/хороший<adj><sint><m><an><dat>$
      OUTPUT: ^n<SN><dat>{^хороший<adj><sint><m><an><sg><dat>$}$
      INPUT:  ^ол<prn><dem><gen>/его<det><pos>/он<prn><pers><p3><m><sg><gen>$ 
^ол<prn><dem><gen><@ADVL→>/он<prn><pers><p3><m><sg><gen><@ADVL→>$
      OUTPUT: ^n<SN><gen><@ADVL→>{^он<prn><pers><p3><m><sg><2>$}$
      -->
      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="cop"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
	      <and>
	        <equal><clip pos="1" side="sl" part="a_syntag"/><lit-tag v="attr"/></equal>
	        <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adj"/></equal>
	      </and>
	    </test>
            <out>
              <chunk name="adj3">
                <tags>
                  <tag><lit-tag v="AdjP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>

                </lu>
              </chunk>
            </out>
	  </when>
          <when c="similative is translated with an adverb (happens in case of pronouns
		   шундый->так)">
	    <test>
	      <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adv"/></equal>
	    </test>
	    <out>
	      <chunk name="adv">
                <tags>
                  <tag><lit-tag v="AdvP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
	      </chunk>
	    </out>
          </when>
          <when>
	    <test>
	      <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="det.pos"/></equal>
	    </test>
	    <out>
	      <chunk name="det">
                <tags>
                  <tag><lit-tag v="DET"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
	      </chunk>
	    </out>
          </when>
          <when c="n.px3sp.{dat/abl/loc} is translated with a preposition">
            <test><equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="pr"/></equal></test>
            <out>
              <chunk name="pr">
                <tags>
                  <tag><lit-tag v="PREP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_pr"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
<call-macro n="convert-pers-affix-to-pers-determiner">
              <with-param pos="2"/>
            </call-macro>

            <choose>
<when>
<test>
             
<and>
                <not><equal><var n="possessive"/><lit v=""/></equal></not>
                <not><equal><var n="pronoun"/><lit v=""/></equal></not>
</and>
</test>
 
                <out>
                  <chunk name="n-poss">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="a_case"/></tag>
                      <tag><clip pos="1" side="sl" part="a_SYNLABEL"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
                    </tags>

                    <var n="possessive"/>
                     <b/>
                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			<lit-tag v="3"/>
		      <clip pos="1" side="tl" part="a_case"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <when>

                <test><not><equal><var n="pronoun"/><lit v=""/></equal></not></test>

<call-macro n="choose_case_and_postposition1">
 <with-param pos="1"/>
            </call-macro>               
 <out>
                  <chunk name="n_pers1">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="a_case"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
                    </tags>
                      

                   <var n="pronoun"/>

<b/>
<lu>
                   <var n="postposition_lu"/>
</lu>
<b/>
                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			<lit-tag v="3"/>
			<var n="case"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
          
<when>

                <test><not><equal> <clip pos="1" side="tl" part="a_nom"/><lit-tag v="abbr"/></equal></not></test>
                <out>
                  <chunk name="n_pers2">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="a_case"/></tag>
                      <tag><clip pos="1" side="sl" part="a_SYNLABEL"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
                    </tags>
			<lu>
                   <var n="pronoun"/> </lu> <b/>

                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			<lit-tag v="3"/>
		      <clip pos="1" side="tl" part="a_case"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pr_n2">
                    <tags>
                      <tag><lit-tag v="PP"/></tag>
                    </tags>

<lu>
                   <var n="pronoun"/> </lu> <b/>


 <lu> <!-- put VARIABLES into lex units <lu> / AS-->


                    <var n="preposition"/>


</lu>
<b/>


                    <var n="possessive"/> <!--what does it produce? tag or word? -->

<b/>


<!-- need blank space here, I put /AS 10.05.2016-->
   <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>

                  </chunk>
                </out>
              </otherwise>
           </choose>
          </otherwise>
        </choose>
      </action>
    </rule>


<rule comment="REGLA: N cop post"> <!-- Bota 13.04  мектепсіз-ақ-->
 
      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="cop"/>
         <pattern-item n="postadv"/>
      </pattern>
      <action>
        <out>
                  <chunk name="n-postadv1">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                     
                    </tags>
                    
                    <var n="possessive"/><b/>
                    
                     <lu>
  <lit v="без"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <clip pos="1" side="tl" part="a_n_poss"/>
 <clip pos="1" side="tl" part="a_gender"/>
 <clip pos="1" side="tl" part="a_anim"/>
  <lit-tag v="sg"/>
 <lit-tag v="gen"/>
 </lu>
                  </chunk>
                </out>
                
      </action>
    </rule>
<rule comment="REGLA: N cop qst"> <!-- Bota 13.04  мектепсіз бе-->
 
      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="cop"/>
         <pattern-item n="qst"/>
      </pattern>
      <action>
        <out>
                  <chunk name="n-qst">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                    </tags>
                    <var n="possessive"/> <b/>
                     <lu>
  <lit v="без"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <clip pos="1" side="tl" part="a_n_poss"/>
 <clip pos="1" side="tl" part="a_gender"/>
 <clip pos="1" side="tl" part="a_anim"/>
  <lit-tag v="sg"/>
 <lit-tag v="gen"/>
 </lu>
                  </chunk>
                </out>
                
      </action>
    </rule>


<rule comment="REGLA: N cop cnjcoo"> <!-- Bota 13.04  мектебімдегі де-->
 
      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="cop"/>
         <pattern-item n="cnjcoo"/>
      </pattern>
      <action>
<call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
<call-macro n="convert-pers-affix-to-pers-determiner">
              <with-param pos="1"/>
            </call-macro>
        <out>
                    <chunk name="n-cnjcoo">
                    <tags>
                      <tag><lit-tag v="PP"/></tag>
                    </tags>

<lu>
                   <var n="pronoun"/> </lu> <b/>
                <lu> <!-- put VARIABLES into lex units <lu> / AS-->
                  <var n="preposition"/>
                  </lu>
                <b/>
                <var n="possessive"/> <!--what does it produce? tag or word? -->

                  <b/>


            <!-- need blank space here, I put /AS 10.05.2016-->
                  <lu>
		      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                  
               <b/>
                 <lu>
           <clip pos="3" side="tl" part="lem"/>
            <lit-tag v="adv"/>
             </lu>
</chunk>
</out>
</action>
</rule>

<rule comment="REGLA: N cnjcoo"> <!-- Bota 13.04  мектебімдегі де/-->
 
      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="cnjcoo"/>
      </pattern>
      <action>
<call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
<call-macro n="convert-pers-affix-to-pers-determiner">
              <with-param pos="1"/>
            </call-macro>
        <out>
                    <chunk name="n-cnjcoo2">
                    <tags>
                      <tag><lit-tag v="PP"/></tag>
                    </tags>

<lu>
                   <var n="pronoun"/> </lu> <b/>
                <lu> <!-- put VARIABLES into lex units <lu> / AS-->
                  <var n="preposition"/>
                  </lu>
                <b/>
                <var n="possessive"/> <!--what does it produce? tag or word? -->

                  <b/>


            <!-- need blank space here, I put /AS 10.05.2016-->
                  <lu>
		      <clip pos="1" side="tl" part="whole"/>
                    </lu>
                  
               <b/>
                 <lu>
           <clip pos="2" side="tl" part="lem"/>
            <lit-tag v="adv"/>
             </lu>
</chunk>
</out>
</action>
</rule>



<rule comment="NEW RULE: subj-pron">
  <pattern>
    <pattern-item n="subj-pron"/>
  </pattern>
  <action>
 
  <choose>
    <when>
      <test>
       <equal>
         <clip pos="1" side="sl" part="a_nbr"/>
         <lit-tag v="sp"/>
       </equal>
      </test>
       <let><var n="number"/><lit-tag v="sg"/></let> <!-- choosing singular in the absence of information -->
    </when>
       <otherwise>
         <let>
           <var n="number"/><clip pos="1" side="tl" part="a_nbr"/>
         </let>
       </otherwise>
  </choose>
  <choose>
    <when>
     <test>  
       <equal>
          <clip pos="1" side="sl" part="a_pers"/>
          <lit-tag v="p2"/>
       </equal>
     </test>
     <!--<let><var n="formality"/><lit-tag v="frm"/></let>-->
    </when>
     <!--<otherwise>
     <let><var n="formality"/><lit v="FD"/></let>
     </otherwise>-->
  </choose>
 <!-- <call-macro n="initialize_case_to_nominative"/> --> <!--will set it to nominative -->
  <out>
   <chunk name="subj-pron" case="caseFirstWord">
    <tags>
    <tag><lit-tag v="NP"/></tag>
    <tag><var n="number"/></tag>
    <tag><clip pos="1" side="sl" part="a_pers"/></tag> <!-- Formality 2nd will be set in .t4x -->
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
     
    </tags>
    <lu>
      <clip pos="1" side="tl" part="lem"/>
      <clip pos="1" side="tl" part="a_kaz_perspron"/>
      <clip pos="1" side="tl" part="a_pers"/>
      <lit-tag v="2"/> <!-- number -->
      <lit-tag v="4"/> <!-- possession -->
      <lit-tag v="5"/> <!-- case -->
    </lu>
  </chunk>
  </out>
 </action>
</rule>



<rule comment="NEW RULE: to be noun"> <!--I am a doctor - ^Мен/мен<post>/мен<prn><pers><p1><sg><nom>$ ^дәрігермін/дәрігер<n><nom>+е<cop><p1><sg>$^./.<sent>$
-->
  <pattern>
    <pattern-item n="pers-verb-to-be"/>
  </pattern>
  <action>
  <choose>
    <when>
      <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pres"/></equal></test>
        <out>
      <chunk name="verb-be">
      <tags>
        <tag><lit-tag v="VP_be"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><lit-tag v="aor"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag> <!-- negative -->
     </tags>
<lu>
<!--Tekseru-->
         <!--<lit v="е"/>
        <lit-tag v="cop"/>-->
       <lit-tag v="aor"/>
       <lit-tag v="evid"/>
        <lit-tag v="3"/>
         <lit-tag v="2"/>
       </lu>
      </chunk>
        </out>
      </when>
     <when>
      <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal></test>
        <out>
      <chunk name="verb-past-be">
      <tags>
        <tag><lit-tag v="VP_past_be"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><lit-tag v="ifi"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag> <!-- negative -->
<tag><lit-tag v="CD"/></tag>
      </tags>

          
       <lu>
<clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_verb"/>
          <lit-tag v="4"/>
         <lit-tag v="3"/>
         <lit-tag v="2"/>
         <lit-tag v="6"/>
          <lit-tag v="5"/>
          <lit-tag v="7"/>
         <lit-tag v="бол"/>  <!-- Note this is a cyrillic е -->
         <lit-tag v="vaux"/>
       </lu>
      </chunk>
        </out>
      </when>
       
    </choose>   
  </action>
</rule>

      
<rule comment="REGLA: NP N">
      <!--Қазақстан Республикасы - Республика Казахстан      -->
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="n-poss-nom"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
<call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
<out>
 <chunk name="np_n"> 
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                </tags>
                                         <lu>
<clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="a_gender"/>
                  <clip pos="2" side="tl" part="a_anim"/>
                  <var n="number"/>
<clip pos="2" side="tl" part="a_case"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="a_gender"/>
                  <clip pos="1" side="tl" part="a_anim"/>
                  <var n="number"/>
<clip pos="1" side="tl" part="a_case"/>
                </lu>
              </chunk>
            </out>
      </action>
  </rule>









   <rule comment="REGLA: NP cog NP ant"> <!-- 14.10.2017 Aliya -->
      <pattern>
        <pattern-item n="np-cog"/>
        <pattern-item n="np-ant"/>
        <pattern-item n="cop"/>
      </pattern>
      <action>
        
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="np_cog-ant">
            <tags><tag><lit-tag v="SN"/></tag></tags>
                <lu><var n="preposition"/></lu><b/>
            <lu><clip pos="2" side="tl" part="whole"/></lu><b/>
            <lu><clip pos="1" side="tl" part="whole"/></lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: N N">
      <!--
      INPUT:  ^орындық<n><attr>/стул<n><m><nn><attr>$ ^аст<n><pl><px3sp><acc>/низ<n><m><nn><pl><px3sp><acc>$
      OUTPUT: ^n_n<SN>{^низ<n><m><nn><pl><acc>$ ^стул<n><m><nn><sg><gen>$}$
      INPUT:  ^үй<n><attr>/Дом<n><m><nn><attr>$ ^алд<n><px3sp><loc>/перед<pr><ins>$
      OUTPUT: ^pr_n<PP>{^Перед<pr>$ ^дом<n><m><nn><sg><ins>$}$
      INPUT:  ^теңіз<n><attr>/морской<adj><m><an><sg><nom>$ ^флот<n><px3sp><acc>/флот<n><m><nn><px3sp><acc>$
      OUTPUT: ^adj_n<SN>{^морской<adj><m><nn><sg><acc>$ ^флот<n><m><nn><sg><acc>$}$
      INPUT:  ^Казан<np><top><attr>/Казань<np><top><f><attr>$ ^шаһар<n><px3sp><acc>/город<n><m><nn><px3sp><acc>$
      OUTPUT: ^n_n<SN>{^город<n><m><nn><sg><acc>$ ^Казань<np><top><f><sg><acc>$}$
      -->
      <pattern>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="n-px3sp"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
 <call-macro n="return-number-of-sl-word">
              <with-param pos="1"/>
            </call-macro>
        <choose>
          <when c="n.px3sp.{dat/abl/loc} is translated with a preposition">
            <test><equal><clip pos="2" side="tl" part="a_n_poss"/><lit-tag v="pr"/></equal></test>
            <out>
              <chunk name="pr_n3-1">  <!-- үйдің жанында -->
                <tags>
                  <tag><lit-tag v="PP"/></tag>
                </tags>
                <lu>
                  <get-case-from pos="1">
                    <clip pos="2" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="2" side="tl" part="a_pr"/>
                </lu>
                <b/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="a_gender"/>
                  <clip pos="1" side="tl" part="a_anim"/>
                  <var n="number"/>
             <clip pos="2" side="tl" part="a_case"/>
                </lu>
              </chunk>
            </out>
          </when>
	  <when c="n.attr is translated with an adjective">
	    <test>
	      <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adj"/></equal>
	    </test>
            <call-macro n="translate-noun">
              <with-param pos="2"/>
            </call-macro>
	    <call-macro n="makeagree-det-noun">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>
	    <out>
	      <chunk name="n_n_cop">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
	      </chunk>
	    </out>
          </when>
	  <when c="first word is a toponym and the second word is its hypernym">
	    <test>
	      <and>
		<equal><clip pos="1" side="tl" part="a_nom"/><lit-tag v="np.top"/></equal>	      
		<in caseless="yes"><clip pos="2" side="sl" part="lem"/><list n="np-top-hypernym"/></in>
		<not><equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal></not>
	      </and>
	    </test>
            <call-macro n="translate-noun">
              <with-param pos="2"/>
            </call-macro>
	    <out>
	      <chunk name="n_n">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="a_gender"/>
		  <lit-tag v="sg"/>
		  <clip pos="2" side="tl" part="a_case"/>
                </lu>
	      </chunk>
	    </out>
          </when>
	  <otherwise>
            <call-macro n="translate-noun">
              <with-param pos="2"/>
            </call-macro>
            <call-macro n="return-number-of-sl-word">
              <with-param pos="1"/>
            </call-macro>
	    <choose>
              <when>
		<test>
		  <and>
		    <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="np.cog"/></equal>
		    <equal><var n="number"/><lit-tag v="pl"/></equal>
		  </and>
		</test>
		<let><clip pos="1" side="tl" part="a_gender"/><lit-tag v="mf"/></let>
	      </when>
	    </choose>
            <out>
              <chunk name="n_n1"> <!-- Мәдинаның кітабы -->
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="a_gender"/>
                  <clip pos="1" side="tl" part="a_anim"/>
                  <var n="number"/>
                  <lit-tag v="gen"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>



    <rule comment="REGLA: N N N (2)">
      <!--
      INPUT:  ^үй<n><gen>/дом<n><m><nn><gen>$ ^алд<n><px3sp><loc><attr>/перед<pr><ins><attr>$ ^бақша<n><nom>/огород<n><m><nn><nom>$
      OUTPUT: ^n_pr_n<SN>{^в<pr>$ ^сад<n><m><nn><sg><loc>$ ^перед<pr>$ ^дом<n><m><nn><sg><ins>$}$
      -->
      <pattern>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="npost-loc-attr"/> <!--npost -->
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="n_pr_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_gender"/>
              <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="sg"/>
              <clip pos="2" side="tl" part="a_case"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>



 <rule comment="REGLA: N N N (3)"> <!-- Aliya --> <!-- оқушының кітабындағы сурет -->
      <!--
      INPUT:  ^оқушы<n><gen>/ученик<n><m><aa><gen>$ ^кітап<n><px3sp><loc><attr>/книга<n><f><nn><px3sp><loc><attr>$ ^сурет<n><nom>/рисунок<n><m><nn><nom>$
      OUTPUT: ^n_n-loc_n<SN>{^рисунок<n><m><nn><sg><nom>$ ^в<pr>$ ^книга<n><f><nn><sg><prp>$ ^ученик<n><m><aa><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="npost-loc"/>
        <pattern-item n="n"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
	<choose>
	  <when c="n.attr is translated with an adjective">
	    <test>
	      <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adj"/></equal>
	    </test>
            <call-macro n="translate-noun">
              <with-param pos="2"/>
            </call-macro>
            <call-macro n="translate-noun">
              <with-param pos="3"/>
            </call-macro>
            <let><clip pos="2" side="tl" part="a_case"/><lit-tag v="gen"/></let>
	    <call-macro n="makeagree-det-noun">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>
	    <out>
	      <chunk name="n_adj_n">
		<tags>
                  <tag><lit-tag v="SN"/></tag>
		</tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
		<lu>
                  <clip pos="3" side="tl" part="whole"/>
		</lu>
		<b/>
		<lu>
                  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b/>
		<lu>
                  <clip pos="2" side="tl" part="whole"/>
		</lu>
	      </chunk>
	    </out>
          </when>
	  <otherwise>
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
           
            <call-macro n="translate-noun">
              <with-param pos="3"/>
            </call-macro>
            <call-macro n="translate-noun">
              <with-param pos="2"/><!--oryn auystyrdy -->
            </call-macro>
            <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="gen"/></let>

            <out>
              <chunk name="n_n-loc_n">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		</tags>

		<lu>
		  <clip pos="3" side="tl" part="whole"/>
		</lu>
		<b/>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu>
		<b/>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
              </chunk>
            </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

   <rule comment="REGLA: N N N (1)">
      <!--
      INPUT:  ^Қазақстан<np><top><attr>/Казахстан<np><top><m><attr>$ ^Республика<n><px3sp><nom>/Республика<n><f><nn><px3sp><nom>$ ^закон<n><pl><px3sp><nom>/закон<n><m><nn><pl><px3sp><nom>$
      OUTPUT: ^n_n_n<SN>{^закон<n><m><nn><pl><nom>$ ^Республика<n><f><nn><sg><gen>$ ^Татарстан<np><top><m><sg><nom>$}$
      INPUT:  ^мемлекеттік<n><attr>/государственный<adj><m><an><sg><nom>$ ^<n><px3sp><nom>/управление<n><nt><nn><px3sp><nom>$ ^орган<n><pl><px3sp><nom>/орган<n><m><nn><pl><px3sp><nom>$
      OUTPUT: ^n_adj_n<SN>{^орган<n><m><nn><pl><nom>$ ^государственный<adj><nt><an><sg><gen>$ ^управление<n><nt><nn><sg><gen>$}$
      -->
     <pattern>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="n-px3sp"/>
        <pattern-item n="n-px3sp"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
	<choose>
	  <when c="n.attr is translated with an adjective">
	    <test>
	      <equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adj"/></equal>
	    </test>
            <call-macro n="translate-noun">
              <with-param pos="2"/>
            </call-macro>
            <call-macro n="translate-noun">
              <with-param pos="3"/>
            </call-macro>
            <let><clip pos="2" side="tl" part="a_case"/><lit-tag v="gen"/></let>
	    <call-macro n="makeagree-det-noun">
	      <with-param pos="1"/>
	      <with-param pos="2"/>
	    </call-macro>
	    <out>
	      <chunk name="n_adj_n">
		<tags>
                  <tag><lit-tag v="SN"/></tag>
		</tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
		<lu>
                  <clip pos="3" side="tl" part="whole"/>
		</lu>
		<b/>
		<lu>
                  <clip pos="1" side="tl" part="whole"/>
		</lu>
		<b/>
		<lu>
                  <clip pos="2" side="tl" part="whole"/>
		</lu>
	      </chunk>
	    </out>
          </when>
	  <otherwise>
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
            <call-macro n="translate-noun">
              <with-param pos="2"/>
            </call-macro>
            <call-macro n="translate-noun">
              <with-param pos="3"/>
            </call-macro>
            <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="nom"/></let>
            <let><clip pos="2" side="tl" part="a_case"/><lit-tag v="gen"/></let>
            <out>
              <chunk name="n_n_n">
		<tags>
		  <tag><lit-tag v="SN"/></tag>
		</tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
		<lu>
		  <clip pos="3" side="tl" part="whole"/>
		</lu>
		<b/>
		<lu>
		  <clip pos="2" side="tl" part="whole"/>
		</lu>
		<b/>
		<lu>
		  <clip pos="1" side="tl" part="whole"/>
		</lu>
              </chunk>
            </out>
	  </otherwise>
	</choose>
      </action>
    </rule>

    <rule comment="REGLA: N N N N">
      <!--
      INPUT:  ^Тукай<np><ant><m><nom>/Тукай<np><ant><m><nom>$ ^исем<n><px3sp><loc><attr>/имя<n><nt><nn><sg><px3sp><loc><attr>$ ^Дәүләт<n><attr>/Государственный<adj><sint><m><an><sg><nom>$ ^бүләк<n><px3sp><acc>/премия<n><f><nn><sg><px3sp><acc>$
      OUTPUT: ^adj_n_n_n<SN>{^Государственный<adj><sint><f><an><sg><acc>$ ^премия<n><f><nn><sg><acc>$ ^имя<n><nt><nn><sg><gen>$ ^Тукай<np><ant><m><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="npost-loc-attr"/>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="gen"/></let>
        <let><clip pos="2" side="tl" part="a_case"/><lit-tag v="gen"/></let>
        <out>
          <chunk name="adj_n_n_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>



<rule comment="RULE: V-ING VAUX - Nak Osy Shak"> 
<!-- Нақ осы шақ: жазып отыр - пишет -->
      <pattern>
        <pattern-item n="v-ing"/>
        <pattern-item n="vaux"/>
      </pattern>
      <action>       
        <call-macro n="conv-temps1"><with-param pos="2"/></call-macro>
<choose><when>
                 <test><equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p1"/></equal></test>
                 <let><clip pos="2" side="tl" part="a_nbr"/><lit-tag v=" "/></let>
                 <let><clip pos="2" side="tl" part="a_pers"/><lit-tag v="p1"/></let>
</when>
<when>
                 <test><equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p2"/></equal></test>
                 <let><clip pos="2" side="tl" part="a_nbr"/><lit-tag v=""/></let>
                 <let><clip pos="2" side="tl" part="a_pers"/><lit-tag v="p2"/></let>
</when>
<when>
                 <test><equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p3"/></equal></test>
                 <let><clip pos="2" side="tl" part="a_nbr"/><lit-tag v=""/></let>
                 <let><clip pos="2" side="tl" part="a_pers"/><lit-tag v="p3"/></let>
</when></choose>
<choose><when>
                 <test><equal><clip pos="1" side="sl" part="a_trans"/><lit-tag v="iv"/></equal></test>
                 <let><var n="trans"/><lit-tag v="iv"/></let>
</when>
<otherwise><let><var n="trans"/><lit-tag v="tv"/></let></otherwise>
</choose>
       <out>
          <chunk name="verb-ing-cont" case="caseFirstWord">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_verb"/></tag>
              <tag><clip pos="1" side="sl" part="a_tense"/></tag>
              <tag><clip pos="2" side="sl" part="a_pers"/></tag>
              <tag><clip pos="2" side="sl" part="a_nbr"/></tag>
              </tags> <lu>
          <var n="negation"/></lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pres"/>
              <lit-tag v="4"/>
              <lit-tag v="5"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1"><with-param pos="1"/></call-macro>
      </action>
    </rule>


    <rule comment="REGLA: N N ADJ N"> <!-- BA 2017-09-04 Қазақстан Республикасының атқарушылық билігін -->       
      <pattern>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="n-px3sp"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
          <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="n_n_adj_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
		<clip pos="3" side="tl" part="lem"/>
                 <clip pos="3" side="tl" part="a_adj"/>
                <clip pos="4" side="tl" part="a_gender"/>
		<var n="animacy"/>
         	 <clip pos="4" side="tl" part="a_nbr"/>
		 <var n="case"/>
                 </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


<rule comment="REGLA: N N ADJ N"> <!-- BA 2017-09-04 оқушының кітабының соңғы басылымы -->
           <pattern>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="n-px3sp"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
        
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="n_n_adj_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
		<clip pos="3" side="tl" part="lem"/>
                 <clip pos="3" side="tl" part="a_adj"/>
                <clip pos="4" side="tl" part="a_gender"/>
		<var n="animacy"/>
         	 <clip pos="4" side="tl" part="a_nbr"/>
		 <var n="case"/>
                 </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: N ADJ N"> <!-- Aliya --> <!-- суреті әдемі кітап -->
      <!--
      INPUT:  ^сурет<n><px3sp><nom>/рисунок<n><m><nn><px3sp><nom>$ ^әдемі<adj>/красивый<adj><sint><m><an><sg><nom>$ ^кітап<n><nom>/книга<n><f><nn><nom>$
      OUTPUT: ^adj_n_n-nom<SN>{^имя<n><nt><nn><sg><nom>$ ^известный<adj><sint><m><an><sg><gen>$ ^поэт<n><m><aa><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="n-px3sp"/>
        <pattern-item n="adj"/>
        <pattern-item n="n-nom"/>
      </pattern>
      <action>
       
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>
        
          <let><var n="preposition"/><concat><lit v="^с"/><lit-tag v="pr"/><lit v="$ "/></concat></let>
          <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="ins"/></let>
          <let><clip pos="2" side="tl" part="a_case"/><lit-tag v="ins"/></let>
          <let><clip pos="2" side="tl" part="a_gender"/><clip pos="1" side="tl" part="a_gender"/></let>
        <out>

          <chunk name="n_adj_n-nom">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
           <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
           <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: N ADJ">  <!-- 03/10/2017  BA  бойы ұзын - с длинным ростом-->
      <!--
      INPUT:  ^бой<n><px3sp><nom>/рост<n><m><nn><px3sp><nom>$ ^ұзын<adj>/длинный<adj><sint><m><an><sg><nom>$
      OUTPUT: ^n_adj<SN>{^с<pr>$ ^длинный<adj><sint><m><an><sg><ins>$ ^рост<n><m><nn><sg><ins>$}$
      -->
      <pattern>
        <pattern-item n="n-px3sp"/>
        <pattern-item n="adj"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>
        
         <let><var n="preposition"/><concat><lit v="с"/><lit-tag v="pr"/></concat></let>
          <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="ins"/></let>
          <let><clip pos="2" side="tl" part="a_case"/><lit-tag v="ins"/></let>
          <let><clip pos="2" side="tl" part="a_gender"/><clip pos="1" side="tl" part="a_gender"/></let>
        <out>

          <chunk name="n_adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
           <lu>
 <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="1" side="tl" part="a_gender"/>
<var n="animacy"/>
<var n="number"/>
                  <clip pos="1" side="tl" part="a_case"/>
            </lu>
            <b/>
           <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: N ADJ N (2)"> <!-- 03/10/2017 BA оқушының әдемі кітабы - красивая книга ученика -->
           <pattern>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="adj"/>
        <pattern-item n="n-px3sp"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="n_adj_n-px3sp">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
 <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="a_gender"/>
		<var n="animacy"/>
                  <clip pos="3" side="tl" part="a_nbr"/>
                  <var n="case"/>
                </lu>
                       <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


<rule comment="RULE: ADJ subst-subst"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-subst2"/>
 <pattern-item n="cop"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+subst" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="gen"/>
 </lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+subst1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="gen"/>
 </lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>

<rule comment="RULE: ADJ subst-subst"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-subst2"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+subst" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="gen"/>
 </lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+subst1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="gen"/>
 </lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>



<rule comment="RULE: ADJ subst-subst"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-subst2"/>
 <pattern-item n="cop"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+subst+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="gen"/>
 </lu><b/><lu><clip pos="3" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+subst1+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="gen"/>
 </lu><b/><lu><clip pos="3" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>


<rule comment="RULE: ADJ subst-subst"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-subst2"/>
 <pattern-item n="v_vars"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal></test>
<out>
       <chunk name="adj+subst+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <lit-tag v="gen"/>
 </lu><b/><lu><clip pos="3" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="adj+subst1+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="gen"/>
 </lu><b/><lu><clip pos="3" side="tl" part="whole"/></lu>
 </chunk>
  </out>
</otherwise>
</choose>
 </action>
 </rule>



<rule comment="RULE: ADJ+сыз/сіз"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-subst"/>
 <pattern-item n="cop"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
<let><var n="case"/><lit-tag v="dat"/></let>
</when>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="acc"/></equal></test>
<let><var n="case"/><lit-tag v="gen"/> </let>
</when>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="abl"/></equal></test>
<let><var n="preposition"/><concat><lit v="^от"/><lit-tag v="pr"/><lit v="$"/></concat></let>
<let><var n="case"/><lit-tag v="ins"/></let>
</when>
<otherwise>
<let><var n="case"/><lit-tag v="nom"/></let>
</otherwise>
</choose>


 <out>
       <chunk name="adj-subst" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="без"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
<var n="case"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule>



<rule comment="RULE: ADJ+сыз/сіз-ақ"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-subst"/>
 <pattern-item n="cop"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
<let><var n="case"/><lit-tag v="dat"/></let>
</when>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="acc"/></equal></test>
<let><var n="case"/><lit-tag v="gen"/> </let>
</when>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="abl"/></equal></test>
<let><var n="preposition"/><concat><lit v="^от"/><lit-tag v="pr"/><lit v="$"/></concat></let>
<let><var n="case"/><lit-tag v="ins"/></let>
</when>
<otherwise>
<let><var n="case"/><lit-tag v="nom"/></let>
</otherwise>
</choose>
 <out>
       <chunk name="adj-subst1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="без"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <var n="case"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule> 

<rule comment="RULE: ADJ+сыз/сіз-ақ"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-subst"/>
 <pattern-item n="cop"/>
<pattern-item n="postadv"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
<let><var n="case"/><lit-tag v="dat"/></let>
</when>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="acc"/></equal></test>
<let><var n="case"/><lit-tag v="gen"/> </let>
</when>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="abl"/></equal></test>
<let><var n="preposition"/><concat><lit v="^от"/><lit-tag v="pr"/><lit v="$"/></concat></let>
<let><var n="case"/><lit-tag v="ins"/></let>
</when>
<otherwise>
<let><var n="case"/><lit-tag v="nom"/></let>
</otherwise>
</choose>
 <out>
       <chunk name="adj-subst1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="без"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
 <var n="case"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule> 



<rule comment="RULE: ADJ+vars"> <!-- Akbota  -->
<pattern>
 <pattern-item n="adj-subst"/>
<pattern-item n="v_vars"/>
</pattern>
  <action>
<choose>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
<let><var n="case"/><lit-tag v="dat"/></let>
</when>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="acc"/></equal></test>
<let><var n="case"/><lit-tag v="gen"/> </let>
</when>
<when>
<test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="abl"/></equal></test>
<let><var n="preposition"/><concat><lit v="^от"/><lit-tag v="pr"/><lit v="$"/></concat></let>
<let><var n="case"/><lit-tag v="ins"/></let>
</when>
<otherwise>
<let><var n="case"/><lit-tag v="nom"/></let>
</otherwise>
</choose>
 <out>
       <chunk name="adj+vars" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="case"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule> 

      <rule comment="REGLA: N POST">
      <!--
      INPUT:  ^мектеп<n>/школа<n><f><nn>$ ^сіз<post>/без<pr><gen>$
      OUTPUT: ^pr_n<PP>{^без<pr>$ ^школа<n><f><nn><sg><gen>$}$
      INPUT:  ^жақсы<adj><subst><pl>/хороший<adj><m><an><pl>$ ^сыз<post>/без<pr><gen>$
      OUTPUT: ^pr_n<PP>{^без<pr>$ ^хороший<adj><mfn><an><pl><gen>$}$
      -->

      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="post"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>

        <call-macro n="makeagree-pr-noun">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="n_post" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
              </lu>
              <b/>
              <lu>
                <clip pos="1" side="tl" part="whole"/>
              </lu>
            </chunk>
          </out>
      </action>
    </rule>


      <rule comment="REGLA: N N POST"> <!-- BA 2017-09-04 Мәдинаның кітабы туралы -->
      <!--
      INPUT:  ^оқушы<n><gen>/ученик<n><m><aa><gen>$ ^кітап<n><px3sp><nom>/книга<n><f><nn><px3sp><nom>$ ^бойынша<post>/по<pr><dat>$
      OUTPUT: ^n_n_post<PP>{^по<pr>$ ^книга<n><f><nn><sg><dat>$ ^ученик<n><m><aa><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="n-px3sp"/>
        <pattern-item n="post"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>

 <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-pr-noun">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
               <out>
          <chunk name="n_n_post" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
              </lu>
              <b/>
              <lu>
 <clip pos="2" side="tl" part="lem"/>
  <clip pos="2" side="tl" part="a_nom"/>
 <clip pos="1" side="tl" part="a_gender"/>
 <clip pos="2" side="tl" part="a_anim"/>
  <clip pos="1" side="tl" part="a_nbr"/>
<clip pos="2" side="tl" part="a_case"/>

             <!--   <clip pos="2" side="tl" part="whole"/>-->
              </lu>
              <b/>
              <lu>
                <clip pos="1" side="tl" part="whole"/>
              </lu>
            </chunk>
          </out>
      </action>
    </rule>


      <rule comment="REGLA: NUM POST">
      <!--
      INPUT:  ^жүз<num><subst><dat>/сто<num><m><an><sg><nom><subst><dat>/сто<num><m><an><sg><det><subst><dat>/сто<num><m><an><sg><ord><subst><dat>$ ^жуық<post>/около<pr><gen>$
      OUTPUT: ^num_post<PP>{^около<pr><nom>$ ^сто<num><m><an><gen><subst><dat>$}$
      -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="post"/>
      </pattern>
      <action>
        <call-macro n="makeagree-num-noun">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_post" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
              </lu>
              <b/>
              <lu>
                <clip pos="1" side="tl" part="whole"/>
              </lu>
            </chunk>
          </out>
      </action>
    </rule>

<rule comment="REGLA: N POST N">
      <!--
      INPUT:  ^азатлык<n><nom>/свобода<n><f><nn><sg><nom>$ ^өчен<post>/за<pr><acc>$ ^көрәш<n><loc>/борьба<n><f><nn><sg><loc>$
      OUTPUT: ^n_pr_n<SN>{^в<pr>$ ^борьба<n><f><nn><sg><prp>$ ^за<pr>$ ^свобода<n><f><nn><sg><acc>$}$
      -->
      <pattern>
        <pattern-item n="n-nom"/>
        <pattern-item n="post"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="n_pr_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_gender"/>
              <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="sg"/>
              <clip pos="2" side="tl" part="a_case"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <!--<rule comment="REGLA: N POST N">--> <!-- Aliya --> <!-- тақырып бойынша мысал -->
      <!--
      INPUT:  ^тақырып<n><nom>/тема<n><f><nn><nom>$ ^бойынша<post>/по<pr><dat>$ ^мысал<n><nom>/пример<n><m><nn><nom>$
      OUTPUT: ^n_post_n<SN>{^пример<n><m><nn><sg><nom>$ ^по<pr>$ ^тема<n><f><nn><sg><dat>$}$
      -->
      <!--<pattern>
        <pattern-item n="n"/>
        <pattern-item n="post"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="n_post_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
            <var n="preposition"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_gender"/>
              <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="sg"/>
              <clip pos="2" side="tl" part="a_case"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>-->

    <rule comment="REGLA: DET N N"> <!-- Aliya --> <!-- менің үйімнің есігі -->
      <!--
      INPUT:  ^мен<prn><pers><p1><sg><gen>/мой<det><pos><m><an><sg><nom>$ ^үй<n><px1sg><gen>/дом<n><m><nn><px1sg><gen>$ ^есік<n><px3sp><nom>/дверь<n><f><nn><px3sp><nom>$
      OUTPUT: ^prn_n_n<SN>{^дверь<n><f><nn><sg><nom>$ ^мой<det><pos><m><an><sg><gen>$ ^дом<n><m><nn><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="prn-gen"/>
        <pattern-item n="n-px"/>
        <pattern-item n="n-px3sp"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="prn_n_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET N N (2)"> <!-- Aliya --> <!-- осы үйдің есігі -->
      <!--
      INPUT:  ^осы<det><dem>/этот<det><dem><m><an><sg><nom>$ ^үй<n><gen>/дом<n><m><nn><gen>$ ^есік<n><px3sp><nom>/дверь<n><f><nn><px3sp><nom>$
      OUTPUT: ^det_n_n<SN>{^дверь<n><f><nn><sg><nom>$ ^этот<det><dem><m><an><sg><gen>$ ^дом<n><m><nn><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="n-px3sp"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_n_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

      <rule comment="REGLA: DET POST"> <!-- Aliya --> <!-- осы бойынша -->
      <!--
      INPUT:  ^осы<det><dem>/этот<det><dem><m><an><sg><nom>$ ^бойынша<post>/по<pr><dat>$
      OUTPUT: ^det_post<PP>{^по<pr>$ ^этот<det><dem><m><an><sg><dat>$}$
      -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="post"/>
      </pattern>
      <action>
        <call-macro n="makeagree-pr-noun">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_post" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
              </lu>
              <b/>
              <lu>
                <clip pos="1" side="tl" part="whole"/>
              </lu>
            </chunk>
          </out>
      </action>
    </rule>


    <rule comment="PRN N"> <!-- Aliya --> <!-- менің кітабым -->
      <!--
      INPUT:  ^мен<prn><pers><p1><sg><gen>/мой<det><pos><m><an><sg><nom>$ ^кітап<n><px1sg><nom>/книга<n><f><nn><px1sg><nom>$
      OUTPUT: ^det_n_other_poss<SN><nom>{^мой<det><pos><f><an><sg><2>$ ^книга<n><f><nn><sg><nom>$}$
      -->
      <pattern>
        <pattern-item n="prn-gen"/>
        <pattern-item n="n-px"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
            <call-macro n="translate-noun">
              <with-param pos="2"/>
            </call-macro>
            <call-macro n="makeagree-det-noun">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
                <out>
                  <chunk name="det_n_other_poss">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
		      <tag><clip pos="1" side="tl" part="a_case"/></tag>
                    </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_det"/>
                      <clip pos="1" side="tl" part="a_gender"/>
                      <clip pos="1" side="tl" part="a_anim"/>

                      <clip pos="1" side="tl" part="a_nbr"/>
			<lit-tag v="2"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                  </chunk>
                </out>
      </action>
    </rule>

    <rule comment="PRN N POST"> <!-- Aliya --> <!-- менің жоспарым бойынша -->
      <!--
      INPUT:  ^мен<prn><pers><p1><sg><gen>/мой<det><pos><m><an><sg><nom>$ ^жоспар<n><px1sg><nom>/план<n><m><nn><px1sg><nom>$ ^бойынша<post>/по<pr><dat>$
      OUTPUT: ^pr_det_n<PP>{^по<pr>$ ^мой<det><pos><m><an><sg><dat>$ ^план<n><m><nn><sg><dat>$}$
      -->
      <pattern>
        <pattern-item n="prn-gen"/>
        <pattern-item n="n"/>
        <pattern-item n="post"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-pr-noun">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="pr_det_n">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET N">
      <!--
      INPUT:  ^һәр<det><qnt>/каждый<det><def><m><an><sg><nom>$ ^иртә<n><nom>/утро<n><nt><nn><nom>$
      OUTPUT: ^det_n<SN>{^каждый<det><def><nt><an><sg><nom>$ ^утро<n><nt><nn><sg><nom>$}$
      -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_n"> <!--BA 2017-09-05 әр таң-->
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
		<clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
 		<clip pos="2" side="tl" part="a_gender"/>
		<var n="animacy"/>
        	  <clip pos="2" side="tl" part="a_nbr"/>
 		<var n="case"/>
                          </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>



    <rule comment="REGLA: DET N COP">
      <!--
      INPUT:  ^һәр<det><qnt>/каждый<det><def><m><an><sg><nom>$ ^иртә<n><nom>/утро<n><nt><nn><nom>$
      OUTPUT: ^det_n<SN>{^каждый<det><def><nt><an><sg><nom>$ ^утро<n><nt><nn><sg><nom>$}$
      -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="n"/>
 <pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_n-cop"> <!--BA 2017-09-05 әр облыстан-->
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
		<clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
 		<clip pos="2" side="tl" part="a_gender"/>
		<var n="animacy"/>
        	  <clip pos="2" side="tl" part="a_nbr"/>
 		<var n="case"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: DET N POST "> <!-- Aliya --> <!-- осы кітап бойынша -->
      <!--
      INPUT:  ^осы<det><dem>/этот<det><dem><m><an><sg><nom>$ ^кітап<n><nom>/книга<n><f><nn><nom>$ ^бойынша<post>/по<pr><dat>$
      OUTPUT: ^det_n_post<PP>{^по<pr>$ ^этот<det><dem><f><an><sg><dat>$ ^книга<n><f><nn><sg><dat>$}$
      -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="n"/>
        <pattern-item n="post"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-pr-noun">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det_n_post">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET N ADJ N"> <!-- Aliya --> <!-- осы кітаптың соңғы басылымы -->
      <!--
      INPUT:  ^осы<det><dem>/этот<det><dem><m><an><sg><nom>$ ^кітап<n><gen>/книга<n><f><nn><gen>$ ^соңғы<adj>/последний<adj><sint><m><an><sg><nom>$ ^басылым<n><px3sp><nom>/издание<n><nt><nn><px3sp><nom>$
      OUTPUT: ^det_n_adj_n<SN>{^последний<adj><sint><nt><an><sg><nom>$ ^издание<n><nt><nn><sg><nom>$ ^этот<det><dem><f><an><sg><gen>$ ^книга<n><f><nn><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="n"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="det_n_adj_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>



  <rule comment="RULE:n-px postadv"> 
<!-- Ernur 
  ~мектебімдегіден-ақ:мектеп<n><px1sg><loc><subst><abl>+-ақ<postadv>
Правильный вывод: даже из моей школы -->
<pattern>
 <pattern-item n="n-px"/>
 <pattern-item n="cop"/>
 <pattern-item n="postadv"/> <!-- sozdan cat postadv -->
</pattern>
  <action>
    <out>
       <chunk name="n_px-postadv" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
              <lit v="даже"/>
              <lit-tag v="adv"/>
 </lu>
 <b/>
  <lu>
              <lit v="из"/>
              <lit-tag v="pr"/>
 </lu>
 <b/>
  <lu>
  <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="sg"/>
              <lit-tag v="gen"/>
 </lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE: ADJ+cnjcoo"> <!--  Ernur 
    ^жақсы<adj><subst><dat>+да<cnjcoo>$      ^хороший<adj><sint><subst><dat>$ ^тоже<postadv>$    #хороший\<adj\>\<sint\>\<dat\> #тоже -->

<pattern>
 <pattern-item n="adj-subst"/>
<pattern-item n="cnjcoo"/>
</pattern>
  <action>
 <out>
       <chunk name="adj-subst" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="m"/>
 <lit-tag v="an"/>
 <lit-tag v="sg"/>
 <lit-tag v="dat"/>
 </lu>
 <b/>
<lu>
   <lit v="тоже"/>
  <lit-tag v="adv"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule>      


<rule comment="RULE: ADJ+сыз/сіз+cnjcoo"> <!--  ADJ Ernur 
жақсыдағыданбыз да:жақсы<adj><subst><loc><subst><abl>+е<cop><aor><p1><pl>+да<cnjcoo>
 -->
<pattern>
 <pattern-item n="adj-subst"/>
 <pattern-item n="cop"/>
<pattern-item n="cnjcoo"/>
</pattern>
  <action>
 <out>
       <chunk name="adj-subst сыз/сіз" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <lit v="без"/>
  <lit-tag v="pr"/>
 </lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <lit-tag v="adj"/>
 <lit-tag v="sint"/>
 <lit-tag v="mfn"/>
 <lit-tag v="an"/>
 <lit-tag v="pl"/>
   <lit-tag v="gen"/>
 </lu>
 <b/>
<lu>
   <lit v="тоже"/>
  <lit-tag v="adv"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule> 



    <rule comment="RULE:n-px postadv"> 
<!--  Ernur мектептеріңіздей ғана:мектеп<n><pl><px2sg><frm><sim>+ғана<postadv>-->
<pattern>
 <pattern-item n="n-px"/>
 <pattern-item n="postadv"/> 
</pattern>
  <action>
    <out>
       <chunk name="n-px px2sp postadv" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
       <lit v="только"/>
              <lit-tag v="adv"/>
 </lu>
 <b/>
  <lu>
              <lit v="как"/>
              <lit-tag v="adv"/>
 </lu>
 <b/>
  <lu>  <clip pos="1" side="tl" part="lem"/>

    <clip pos="1" side="tl" part="a_nom"/>
              <lit-tag v="f"/>
              <lit-tag v="an"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
  </lu>
  <b/>
    <lu> 
   <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/></lu> </chunk></out>
</action></rule> 

<rule comment="RULE:Nums"> 
<!-- Ernur Nums-->
<pattern>
 <pattern-item n="num-subst"/>
 <pattern-item n="cop"/>
</pattern>
  <action>
    <out>
       <chunk name="Numdar" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
  <clip pos="1" side="tl" part="lem"/>
                <!--  
                 <clip pos="1" side="tl" part="a_gender"/>
                 <clip pos="1" side="tl" part="a_nbr"/> -->
               <!--   <clip pos="1" side="tl" part="a_case"/> -->
               
               <clip pos="1" side="tl" part="a_num"/>
               <lit-tag v="mfn"/>
                <lit-tag v="pl"/>
               <clip pos="1" side="tl" part="a_case"/>


 </lu>
 </chunk>
  </out>
</action>
 </rule>

  <rule comment="RULE:n-px cnjcoo"> 
<!-- Ernur 
  ~мектебімдегі де:мектеп<n><px1sg><loc><subst><nom>+е<cop><aor><p3><sg>+да<cnjcoo>
-->
<pattern>
 <pattern-item n="n-px"/>
 <pattern-item n="cop"/>
 <pattern-item n="cnjcoo"/> <!-- sozdan cat postadv -->
</pattern>
  <action>
    <out>
       <chunk name="n_px-cnjcoo" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
      <lu>
              <lit v="в"/>
              <lit-tag v="pr"/>
 </lu>
 <b/>  
  <lu>
   <!--  <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/> -->
<!--     prn.pers.p1
prn-gen
 --> <lit v="моей"/>
              <lit-tag v="prn-gen"/>
</lu>
 <b/>
  <lu>
  <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="sg"/>
              <lit-tag v="dat"/>
 </lu> 
 <b/>
   <lu>
              <lit v="тоже"/>
              <lit-tag v="adv"/>
 </lu>
 </chunk>
  </out>
</action>
 </rule>

<rule comment="RULE:n-px3sp cnjcoo"> 
<!-- Ernur 
  ~мектебі де:^мектеп<n><px3sp><nom>$ ^е<cop><aor><p3><sg>$ ^да<cnjcoo>$
-->
<pattern>
 <pattern-item n="n-px3sp"/>
 <pattern-item n="cop"/>
 <pattern-item n="cnjcoo"/> 
</pattern>
  <action>
    <out>
       <chunk name="n-px3sp cnjcoo" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
  <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
  
<!--     <clip pos="1" side="tl" part="a_nbr"/>
    <clip pos="1" side="tl" part="a_case"/> -->
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>

 </lu>
  <b/>
  <lu>
              <lit v="тоже"/>
              <lit-tag v="adv"/>
 </lu>
 </chunk>
  </out>
</action>
 </rule>



<rule comment="RULE:n-px3sp postadv"> 
<!-- Ernur 
  ~мектептерінікін-ақ:мектеп<n><px1sg><loc><subst><abl>+-ақ<postadv> 
                      мектеп<n><pl><px3sp><gen><subst><nom>+е<cop><aor><p3><pl>+-ақ<postadv>-->
<pattern>
 <pattern-item n="n-px3sp"/>
 <pattern-item n="postadv"/> 
</pattern>
  <action>
    <out>
       <chunk name="n-px3sp postadv" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>
      </tags>   
  <lu>
              <lit v="даже"/>
              <lit-tag v="adv"/>
 </lu>
 <b/>
  <lu>
              <lit v="у"/>
              <lit-tag v="pr"/>
 </lu>
 <b/>
  <lu>
  <clip pos="1" side="tl" part="lem"/>
    <clip pos="1" side="tl" part="a_nom"/>
    <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
              <lit-tag v="pl"/>
              <lit-tag v="gen"/>
 </lu>
 </chunk>
  </out>
</action>
 </rule>

        


    <rule comment="REGLA: ADJ N">
      <!--
      INPUT:  ^карт<adj>/старый<adj><sint><m><an><sg><nom>$ ^агач<n><nom>/дерево<n><nt><nn><nom>$
      OUTPUT: ^adj_n<SN>{^старый<adj><sint><nt><an><sg><nom>$ ^дерево<n><nt><nn><sg><nom>$}$
      INPUT:  ^карт<adj>/старый<adj><sint><m><an><sg><nom>$ ^агач<n><nom>/дерево<n><nt><nn><dat>$
      OUTPUT: ^adj_n<SN>{^старый<adj><sint><nt><an><sg><dat>$ ^дерево<n><nt><nn><sg><dat>$}$
      INPUT:  ^соң<adv><attr>/последний<adj><m><an><sg><nom>$ ^хат<n><nom>/письмо<n><nt><nn><nom>$
      OUTPUT: ^adj_n<SN>{^последний<adj><nt><an><sg><nom>$ ^письмо<n><nt><nn><sg><nom>$}$
      -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
       <call-macro n="set-animacy">
          <with-param pos="2"/>
        </call-macro>
<choose>
<when>
	      <test>
	        <equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>
	      </test>
              <let><var n="gender"/><lit-tag v="mfn"/></let>
            </when>
<otherwise>
           <let><var n="gender"/><clip pos="2" side="tl" part="a_gender"/></let>
</otherwise>
</choose>
        <out>
          <chunk name="adj_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
<!--AS 2016-08-15: check all <var> should be in lu
before output:
        <var n="preposition"/>

^adj_n<SN>{к<pr>^дорогой<adj><sint><m><an><sg><dat>$ ^гусь<n><m><aa><sg><dat>$}$

after putting 
<lu>
            <var n="preposition"/>
</lu>
<b/>

^adj_n<SN>{^к<pr>$ ^дорогой<adj><sint><m><an><sg><dat>$ ^гусь<n><m><aa><sg><dat>$}$
 -->
<lu>
            <var n="preposition"/>
</lu>
<b/>
           <!-- <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>-->
<lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                   <var n="gender"/>
                <var n="animacy"/>
                  <clip pos="2" side="tl" part="a_nbr"/>
                <var n="case"/>
                </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: ADJ N">
      <!--
      INPUT:  ^карт<adj>/старый<adj><sint><m><an><sg><nom>$ ^агач<n><nom>/дерево<n><nt><nn><nom>$
      OUTPUT: ^adj_n<SN>{^старый<adj><sint><nt><an><sg><nom>$ ^дерево<n><nt><nn><sg><nom>$}$
      INPUT:  ^карт<adj>/старый<adj><sint><m><an><sg><nom>$ ^агач<n><nom>/дерево<n><nt><nn><dat>$
      OUTPUT: ^adj_n<SN>{^старый<adj><sint><nt><an><sg><dat>$ ^дерево<n><nt><nn><sg><dat>$}$
      INPUT:  ^соң<adv><attr>/последний<adj><m><an><sg><nom>$ ^хат<n><nom>/письмо<n><nt><nn><nom>$
      OUTPUT: ^adj_n<SN>{^последний<adj><nt><an><sg><nom>$ ^письмо<n><nt><nn><sg><nom>$}$
      -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
<choose>
<when>
	      <test>
	        <equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>
	      </test>
              <let><var n="gender"/><lit-tag v="mfn"/></let>
            </when>
<otherwise>
           <let><var n="gender"/><clip pos="2" side="tl" part="a_gender"/></let>
</otherwise>
</choose>
        <out>
          <chunk name="adj_n_cop">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
<!--2016-08-09 AS: put vars into <lu> </lu> 
before output:
^adj_n_cop<SN>{из<pr>^старший<adj><sint><m><an><sg><gen>$ ^город<n><m><nn><sg><gen>$}$^dot<SENT>{^.<sent>$}$

after:
^adj_n_cop<SN>{^из<pr>$  ^старший<adj><sint><m><an><sg><gen>$ ^город<n><m><nn><sg><gen>$}$^dot<SENT>{^.<sent>$}$

-->
            <lu>
            <var n="preposition"/>

            </lu>
            <b pos="1"/>
  <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                <var n="gender"/>
<var n="animacy"/>
          <clip pos="2" side="tl" part="a_nbr"/>
 <var n="case"/>
                </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>

          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: ADJ N ADJ N"> <!-- Aliya --> <!-- қызыл кітаптың соңғы басылымы -->
      <!--
      INPUT:  ^қызыл<adj>/красный<adj><sint><m><an><sg><nom>$ ^кітап<n><gen>/книга<n><f><nn><gen>$ ^соңғы<adj>/последний<adj><sint><m><an><sg><nom>$ ^басылым<n><px3sp><nom>/издание<n><nt><nn><px3sp><nom>$
      OUTPUT: ^adj_n_adj_n<SN>{^последний<adj><sint><nt><an><sg><nom>$ ^издание<n><nt><nn><sg><nom>$ ^красный<adj><sint><f><an><sg><gen>$ ^книга<n><f><nn><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <out>
          <chunk name="adj_n_adj_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: ADJ N PR">  <!-- BA 2017-02-17 әдемі бақшаның үстінде / жақсы бақшаның жанында-->
         <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="n-px3sp"/>
         <pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
 <call-macro n="makeagree-pr-noun">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="adj_n_pr"> 
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                  <lu>
<clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="pr"/>
 </lu>
            <b/>
<lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="a_gender"/>
                  <var n="animacy"/>
                <!--  <clip pos="1" side="tl" part="a_anim"/>-->
                  <clip pos="2" side="tl" part="a_nbr"/>
                  <var n="case"/>
                </lu>
                     <b/>
        <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu> 
          </chunk>
        </out>
      </action>
    </rule>   

 <rule comment="REGLA: ADJ N N">  <!-- қалалық ақынның есімі-->
      <!--
      INPUT:  ^қалалық<adj>/городской<adj><sint><m><an><sg><nom>$ ^ақын<n><gen>/поэт<n><m><aa><gen>$ ^есім<n><px3sp><nom>/имя<n><nt><nn><px3sp><nom>$
      OUTPUT: ^adj_n_n<SN>{^имя<n><nt><nn><sg><nom>$ ^известный<adj><sint><m><an><sg><gen>$ ^поэт<n><m><aa><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="n-attr-or-gen"/>
        <pattern-item n="n-px3sp"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
<call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
 
        <out>
          <chunk name="adj_n_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
               <lu>
                <var n="preposition"/>
                </lu> 
                <b/>

                <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>

           <!-- <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>-->
<lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                   <clip pos="1" side="tl" part="a_gender"/>
                  <clip pos="1" side="tl" part="a_anim"/>
                  <clip pos="1" side="tl" part="a_nbr"/>
 <var n="case"/>
                </lu>
            <b/>
 
       <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


   <rule comment="REGLA: ADJ N N (2)">  <!-- BA 2017-09-04 әдемі қаладағы базар -->
      <!--
      INPUT:  ^үлкен<adj>/большой<adj><sint><m><an><sg><nom>$ ^қала<n><loc><attr>/город<n><m><nn><loc><attr>$ ^базар<n><nom>/рынок<n><m><nn><nom>$
      OUTPUT: ^adj_n-loc_n<SN>{^рынок<n><m><nn><sg><nom>$ ^в<pr>$  ^большой<adj><sint><m><an><sg><prp>$ ^город<n><m><nn><sg><prp>$}$
      -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
        <pattern-item n="n"/>
      <pattern-item n="cop"/> 
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="adj_n-loc_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
<!--AS 2016-08-15: 
output before:
^adj_n-loc_n<SN>{^Казахстан<np><top><m><sg><gen>$ в<pr> ^международный<adj><sint><mfn><an><pl><prp>$ ^общение<n><nt><nn><pl><prp>$}$ 

output after:
^adj_n-loc_n<SN>{^Казахстан<np><top><m><sg><gen>$ ^в<pr>$ ^международный<adj><sint><mfn><an><pl><prp>$ ^общение<n><nt><nn><pl><prp>$}$ ^

 -->
<lu><!--just put var in <lu> -->
            <var n="preposition"/>
</lu>
            <b/>
            <lu>
<clip pos="1" side="tl" part="lem"/>
                <clip pos="1" side="tl" part="a_adj"/>
                 <clip pos="2" side="tl" part="a_gender"/>
		<var n="animacy"/>
                 <clip pos="2" side="tl" part="a_nbr"/>
		 <var n="case"/>
                        </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: ADJ ADJ N">
      <!--
      INPUT:  ^тез<adj>/быстрый<adj><sint><m><an><sg><nom>$ ^қоңыр<adj>/коричневый<adj><sint><m><an><sg><nom>$ ^түлкі<n><nom>/лиса<n><f><aa><sg><nom>$
      OUTPUT: ^adj_adj_n<SN><nom>{^быстрый<adj><sint><f><an><sg><nom>$ ^коричневый<adj><sint><f><an><sg><nom>$ ^лиса<n><f><aa><sg><nom>$}$
      -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
        <pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="adj_adj_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="a_case"/></tag>
              <tag><clip pos="3" side="sl" part="a_SYNLABEL"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
		<clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="a_gender"/>
		<var n="animacy"/>
          <clip pos="3" side="tl" part="a_nbr"/>
 		<var n="case"/>

            </lu>
            <b/>
            <lu>
		<clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="a_gender"/>
		<var n="animacy"/>
          <clip pos="3" side="tl" part="a_nbr"/>
 		<var n="case"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET ADJ N"> <!-- Aliya --> <!-- менің қызыл сөмкем -->
      <!--
      INPUT:  ^мен<prn><pers><p1><sg><gen>/мой<det><pos><m><an><sg><nom>$ ^қызыл<adj>/красный<adj><sint><m><an><sg><nom>$ ^сөмке<n><px1sg><nom>/сумка<n><f><nn><px1sg><nom>$
      OUTPUT: ^prn_adj_n<SN>{^мой<det><pos><f><an><sg><nom>$ ^красный<adj><sint><f><an><sg><nom>$ ^сумка<n><f><nn><sg><nom>$}$
      -->
      <pattern>
        <pattern-item n="prn-gen"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="prn_adj_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET ADJ N (2)"> <!-- BA мынау әдемі үй- этот красивый дом-->
      <!--
      INPUT:  ^осы<det><dem>/этот<det><dem><m><an><sg><nom>$ ^әдемі<adj>/красивый<adj><sint><m><an><sg><nom>$ ^үй<n><nom>/дом<n><m><nn><nom>$
      OUTPUT: ^det_adj_n<SN>{^этот<det><dem><m><an><sg><nom>$ ^красивый<adj><sint><m><an><sg><nom>$ ^дом<n><m><nn><sg><nom>$}$
      -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det_adj_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
		<clip pos="2" side="tl" part="lem"/>
                <clip pos="2" side="tl" part="a_adj"/>
                 <clip pos="3" side="tl" part="a_gender"/>
		<var n="animacy"/>
                 <clip pos="3" side="tl" part="a_nbr"/>
		 <var n="case"/>
                        </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: ADJ+post">
      <pattern>
        <pattern-item n="adj"/>
<pattern-item n="post"/>
      </pattern>
      <action>
       
 <choose>
          <when>
   <test><equal><clip pos="1" side="tl" part="a_case"/><lit v=""/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
          </when>
<otherwise>
           <let><var n="case"/><clip pos="1" side="tl" part="a_case"/></let>
</otherwise>
 </choose>
            <out>
              <chunk name="adj+post">
                <tags>
                  <tag><lit-tag v="AdjP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                    <lit-tag v="m"/> 
                    <lit-tag v="an"/> 
                   <lit-tag v="sg"/> 
                   <var n="case"/>
                </lu>
              </chunk>
            </out>
        
      </action>
    </rule>

<rule comment="REGLA: ADJ+case">
      <pattern>
        <pattern-item n="adj"/>
      </pattern>
      <action>
       
 <choose>
          <when>
   <test><equal><clip pos="1" side="tl" part="a_case"/><lit v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
          </when>
<otherwise>
           <let><var n="case"/><clip pos="1" side="tl" part="a_case"/></let>
</otherwise>
 </choose>
            <out>
              <chunk name="adj+case">
                <tags>
                  <tag><lit-tag v="AdjP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                    <lit-tag v="m"/> 
                    <lit-tag v="an"/> 
                   <lit-tag v="sg"/> 
                   <lit-tag v="nom"/>
                </lu>
              </chunk>
            </out>
        
      </action>
    </rule>




<rule comment="REGLA: ADJ+post+cnjcoo">
      <pattern>
        <pattern-item n="adj"/>
<pattern-item n="post"/>
<pattern-item n="cnjcoo"/>
      </pattern>
      <action>
   
 <choose>
          <when>
   <test><equal><clip pos="1" side="tl" part="a_case"/><lit v=""/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
          </when>
<otherwise>
           <let><var n="case"/><clip pos="1" side="tl" part="a_case"/></let>
</otherwise>
 </choose>
            <out>
              <chunk name="adj+post+cnj">
                <tags>
                  <tag><lit-tag v="AdjP"/></tag>
                </tags>
                 <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                    <lit-tag v="m"/> 
                    <lit-tag v="an"/> 
                   <lit-tag v="sg"/> 
                   <var n="case"/>
                </lu>
                 <b/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="adv"/>
                  </lu>

              </chunk>
            </out>
         
      </action>
    </rule>

<rule comment="REGLA: n+cnjcoo"> <!--Bota 13.04-->
      <pattern>
        <pattern-item n="n"/>
<pattern-item n="cop"/>
<pattern-item n="cnjcoo"/>
      </pattern>
      <action>
   
   <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
<call-macro n="convert-pers-affix-to-pers-determiner">
              <with-param pos="2"/>
            </call-macro>

            <choose>
<when>
<test>
             
<and>
                <not><equal><var n="possessive"/><lit v=""/></equal></not>
                <not><equal><var n="pronoun"/><lit v=""/></equal></not>
</and>
</test>
 
                <out>
                  <chunk name="n-poss">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="a_case"/></tag>
                      <tag><clip pos="1" side="sl" part="a_SYNLABEL"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
                    </tags>

                    <var n="possessive"/>
<b/>
                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			<lit-tag v="3"/>
		      <clip pos="1" side="tl" part="a_case"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <when>

                <test><not><equal><var n="pronoun"/><lit v=""/></equal></not></test>
                <out>
                  <chunk name="n_pers3">
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      <tag><clip pos="1" side="tl" part="a_case"/></tag>
                      <tag><clip pos="1" side="sl" part="a_SYNLABEL"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
                    </tags>

<lu>
                   <var n="pronoun"/> </lu> <b/>

                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			<lit-tag v="3"/>
		      <clip pos="1" side="tl" part="a_case"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
          
              <otherwise>
                <out>
                  <chunk name="n+cnj">
                    <tags>
                      <tag><lit-tag v="PP"/></tag>
                    </tags>

<lu>
                   <var n="pronoun"/> </lu> <b/>


 <lu> <!-- put VARIABLES into lex units <lu> / AS-->


                    <var n="preposition"/>


</lu>
<b/>


                    <var n="possessive"/> <!--what does it produce? tag or word? -->

<b/>


<!-- need blank space here, I put /AS 10.05.2016-->
   <lu>
		      <clip pos="1" side="tl" part="whole"/>
                    </lu>
   <b/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="adv"/>
                  </lu>
                  </chunk>
                </out>
              </otherwise>
           </choose>
      </action>
    </rule>



<rule comment="REGLA: ADJ+comp">
      <pattern>
        <pattern-item n="adj-comp"/>
        <pattern-item n="cop"/>
        <pattern-item n="postadv"/>
      </pattern>
      <action>
       
 <choose>
          <when>
   <test><equal><clip pos="1" side="tl" part="a_case"/><lit v=""/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
          </when>
<otherwise>
           <let><var n="case"/><clip pos="1" side="tl" part="a_case"/></let>
</otherwise>
 </choose>
            <out>
              <chunk name="adj+comp">
                <tags>
                  <tag><lit-tag v="AdjP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="tl" part="a_gender"/>
                  <clip pos="1" side="tl" part="a_anim"/>
                  <clip pos="1" side="tl" part="a_nbr"/>
                  <var n="case"/>
                </lu>
              </chunk>
            </out>
        
      </action>
    </rule>



    <rule comment="REGLA: NUM N">
      <!--
      INPUT:  ^бес<num>/пять<num><mfn><pl><nom>$ ^жыл<n><nom>/год<n><m><nn><nom>$
      OUTPUT: ^num_n<SN>{^пять<num><mfn><pl><nom>$ ^год<n><m><nn><pl><gen>$}$
      INPUT:  ^бес<num>/пять<num><mfn><pl><nom>$ ^жыл<n><dat>/год<n><m><nn><dat>$
      OUTPUT: ^num_n<SN>{^пять<num><mfn><pl><dat>$ ^год<n><m><nn><pl><dat>$}$
      -->
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="n"/>
<pattern-item n="cop"/>

      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-num-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test><equal><clip pos="1" side="tl" part="a_num"/><lit-tag v="num.digit"/></equal></test>
	    <call-macro n="leave-only-lemma-and-num-tag">
              <with-param pos="1"/>
            </call-macro>
	  </when>
	</choose>
        <out>
	  <chunk name="num_n">
	    <tags>
	      <tag><lit-tag v="SN"/></tag>
	    </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
	    <lu>
<clip pos="1" side="tl" part="lem"/>
<clip pos="1" side="tl" part="a_num"/>
<clip pos="1" side="tl" part="a_gender"/>
<clip pos="1" side="tl" part="a_nbr"/>
<clip pos="1" side="tl" part="a_case"/>
	    </lu>
	    <b/>
	    <lu>
	      <clip pos="2" side="tl" part="whole"/>
	    </lu>
	  </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: NUM N N">
      <!--
      INPUT:  ^бір<num>/один<num><m><an><sg><nom>$ ^шелек<n><nom>/ведро<n><nt><nn><nom>$ ^су<n><nom>/вода<n><f><nn><nom>$
      OUTPUT: ^num_n_n<SN>{^один<num><nt><an><sg><nom>$ ^ведро<n><nt><nn><sg><nom>$ ^вода<n><f><nn><sg><gen>$}$
      INPUT:  ^бес<num>/пять<num><mfn><pl><nom>$ ^шелек<n><nom>/ведро<n><nt><nn><nom>$ ^су<n><nom>/вода<n><f><nn><nom>$
      OUTPUT: ^num_n_n<SN>{^пять<num><mfn><pl><nom>$ ^ведро<n><nt><nn><pl><gen>$ ^вода<n><f><nn><sg><gen>$}$
      INPUT:  ^бес<num>/пять<num><mfn><pl><nom>$ ^шелек<n><nom>/ведро<n><nt><nn><nom>$ ^су<n><loc>/вода<n><f><nn><loc>$
      OUTPUT: ^num_n_n<SN>{^в<pr>$ ^пять<num><mfn><pl><prp>$ ^ведро<n><nt><nn><pl><prp>$ ^вода<n><f><nn><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="num-det"/>
        <pattern-item n="n-nom"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <let><clip pos="2" side="tl" part="a_case"/><clip pos="3" side="tl" part="a_case"/></let>
        <let><clip pos="3" side="tl" part="a_case"/><lit-tag v="gen"/></let>
        <call-macro n="makeagree-num-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test><equal><clip pos="1" side="tl" part="a_num"/><lit-tag v="num.digit"/></equal></test>
	    <call-macro n="leave-only-lemma-and-num-tag">
              <with-param pos="1"/>
            </call-macro>
	  </when>
	</choose>
        <out>
          <chunk name="num_n_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="REGLA: NUM NUM N">
      <!--
      INPUT:  ^100<num>/100<num><digit><mfn><pl><nom>/100<num><digit><m><an><sg><nom>$ ^мең<num>/тысяча<num><f><nn><sg><nom>$ ^сум<n><nom>/рубль<n><m><nn><sg><nom>$
      OUTPUT: ^num_num_n<SN>{^100<num>$ ^тысяча<num><f><nn><pl><gen>$ ^рубль<n><m><nn><pl><gen>$}$
      -->
      <pattern>
        <pattern-item n="num-det"/>
        <pattern-item n="thousand-etc"/>
        <pattern-item n="n"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <let><clip pos="2" side="tl" part="a_case"/><clip pos="3" side="tl" part="a_case"/></let>
        <let><clip pos="3" side="tl" part="a_case"/><lit-tag v="gen"/></let>
        <let><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="pl"/></let>
        <call-macro n="makeagree-num-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test><equal><clip pos="1" side="tl" part="a_num"/><lit-tag v="num.digit"/></equal></test>
	    <call-macro n="leave-only-lemma-and-num-tag">
              <with-param pos="1"/>
            </call-macro>
	  </when>
	</choose>
        <out>
          <chunk name="num_num_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
 <rule comment="REGLA: NUM ORD"> <!-- Akbota -->
      
      <pattern>
        <pattern-item n="num-ord"/>
        <pattern-item n="cop"/>
      </pattern>
      <action>
<call-macro n="makeagree-num-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
       <!-- <choose>
          <when>
            <test>   
             <equal><clip pos="1" side="tl" part="a_num"/><lit-tag v="num"/></equal>
            </test>
	    <let><var n="case"/><lit-tag v="num"/></let>
	  </when>
	</choose>
-->
<call-macro n="num-gender">
          <with-param pos="1"/>
        </call-macro>
<!-- <choose> 
<when>
          <test><equal><clip pos="1" side="sl" part="a_case"/><lit v=""/></equal></test>
          <let><var n="case"/><lit-tag v="nom"/></let>
        </when>
<otherwise>
          <let><var n="case"/><clip pos="1" side="sl" part="a_case"/></let>
</otherwise>
</choose> -->
        <out>
          <chunk name="num ord">
            <tags>
              <tag><lit-tag v="DET"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
               <lit-tag v="det"/>
              <lit-tag v="ord"/>
               <var n="gender"/>
               <lit-tag v="an"/>
              <lit-tag v="sg"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>           


<!--
      INPUT:  ^100<num>/100<num><digit><mfn><pl><nom>/100<num><digit><m><an><sg><nom>$ ^мең<num>/тысяча<num><f><nn><sg><nom>$ ^сум<n><nom>/рубль<n><m><nn><sg><nom>$
      OUTPUT: ^num_num_n<SN>{^100<num>$ ^тысяча<num><f><nn><pl><gen>$ ^рубль<n><m><nn><pl><gen>$}$

    <rule comment="REGLA: NUM NUM N">
      <pattern>
        <pattern-item n="num-det"/>
        <pattern-item n="thousand-etc"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <let><clip pos="2" side="tl" part="a_case"/><clip pos="3" side="tl" part="a_case"/></let>
        <let><clip pos="3" side="tl" part="a_case"/><lit-tag v="gen"/></let>
        <let><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="pl"/></let>
        <call-macro n="makeagree-num-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test><equal><clip pos="1" side="tl" part="a_num"/><lit-tag v="num.digit"/></equal></test>
	    <call-macro n="leave-only-lemma-and-num-tag">
              <with-param pos="1"/>
            </call-macro>
	  </when>
	</choose>
        <out>
          <chunk name="num_num_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
            <var n="preposition"/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>
-->
    <rule comment="NUM N NUM N">
      <!--
      INPUT:  ^1918<num>/1918<num><digit><mfn><pl><nom>$ ^ел<n><gen>/год²<n><m><nn><sg><gen>$ ^28<num>/28<num><digit><mfn><pl><nom>$ ^май<n><px3sp><loc>/май<n><m><nn><sg><px3sp><loc>$
      OUTPUT: ^num_n_num_n<SN>{^в<pr>$ ^28<num>$ ^май<n><m><nn><sg><prp>$ ^1918<num>$ ^год²<n><m><nn><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="num-det"/>
        <pattern-item n="n-gen"/>
        <pattern-item n="num-det"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="translate-noun">
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test><equal><clip pos="1" side="tl" part="a_num"/><lit-tag v="num.digit"/></equal></test>
	    <call-macro n="leave-only-lemma-and-num-tag">
              <with-param pos="1"/>
            </call-macro>
	  </when>
	</choose>
        <choose>
          <when>
            <test><equal><clip pos="3" side="tl" part="a_num"/><lit-tag v="num.digit"/></equal></test>
	    <call-macro n="leave-only-lemma-and-num-tag">
              <with-param pos="3"/>
            </call-macro>
	  </when>
	</choose>
        <out>
          <chunk name="num_n_num_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
            </tags>
                <lu>
                <var n="preposition"/>
                </lu>
                <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
	    <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="ADJ N POST"> <!-- Aliya --> <!-- қызыл кітап туралы -->
      <!--
      INPUT:  ^қызыл<adj>/красный<adj><sint><m><an><sg><nom>$ ^кітап<n><nom>/книга<n><f><nn><nom>$ ^туралы<post>/о<pr><prp>$
      OUTPUT: ^pr_adj_n<PP>{^о<pr>$ ^красный<adj><sint><f><an><sg><prp>$ ^книга<n><f><nn><sg><prp>$}$
      -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
        <pattern-item n="post"/>
      </pattern>
      <action>

        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-pr-noun">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
 <call-macro n="makeagree-pr-n-adj">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="pr_adj_n">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b/>
           
           <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="a_gender"/>
                 <var n="animacy"/>
                  <clip pos="2" side="tl" part="a_nbr"/>
                  <var n="case"/>
                </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="NUM ADJ N POST"> 
      <pattern>
      <pattern-item n="num"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
        <pattern-item n="post"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-pr-noun">
          <with-param pos="4"/>
          <with-param pos="3"/>
        </call-macro>
 <call-macro n="makeagree-pr-n-adj">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
 <call-macro n="num-gender">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_adj_n_pr">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <var n="gender"/>
              <var n="animacy"/>
 <var n="number"/>
             <!-- <clip pos="1" side="tl" part="a_nbr"/>-->
<var n="case"/>
            </lu>
<b/>
           <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="3" side="tl" part="a_gender"/>
                 <var n="animacy"/>
                  <clip pos="3" side="tl" part="a_nbr"/>
                  <var n="case"/>
                </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="ADJ ADJ N POST/NPOST">
      <!--
      INPUT:  ^зур<adj>/большой<adj><sint><m><an><sg><nom>$ ^карт<adj>/старый<adj><sint><m><an><sg><nom>$ ^агач<n><gen>/дерево<n><nt><nn><gen>$ ^арт<n><px3sp><abl>/из-за<pr><gen>$
      OUTPUT: ^pr_adj_adj_n<PP>{^из-за<pr>$ ^большой<adj><sint><nt><an><sg><gen>$ ^старый<adj><sint><nt><an><sg><gen>$ ^дерево<n><nt><nn><sg><gen>$}$
      -->
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
        <pattern-item n="post-or-npost"/>
<pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-pr-noun">
          <with-param pos="4"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="pr_adj_adj_n">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="DET ADJ N POST/NPOST">
      <!--
      INPUT:  ^бер<det><ind>/один<num><m><an><sg><nom>$ ^зур<adj>/большой<adj><sint><m><an><sg><nom>$ ^агач<n><dat>/дерево<n><nt><nn><sg><dat>$ ^таба<post>/к<pr><dat>$
      OUTPUT: ^pr_det_adj_n<PP>{^к<pr>$ ^один<num><nt><an><sg><dat>$ ^большой<adj><sint><nt><an><sg><dat>$ ^дерево<n><nt><nn><sg><dat>$}$
      -->
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
        <pattern-item n="n"/>
        <pattern-item n="post-or-npost"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-pr-noun">
          <with-param pos="4"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="makeagree-det-noun">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="pr_det_adj_n">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<!-- SECTION: Verbs -->



<rule comment="RULE: VP-cop-neg">  <!-- Aliya --> <!-- Мен оқушы емеспін-->

      <!--
      INPUT:  ^мен<prn><pers><p1><sg><nom>/я<prn><pers><p1><mf><sg><nom>$ ^дәрігер<n><nom>/врач<n><m><aa><nom>$ ^е<cop><neg><aor><p1><sg>/<neg><aor><p1><sg>$
      OUTPUT: ^vP-cop-neg<SV-cop><p1><sg>{^я<prn><pers><p1><mf><sg><nom>$ ^не<adv>$ ^врач<n><m><aa><sg><nom>$}$
      -->

      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="n"/>
        <pattern-item n="cop-neg"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>


<call-macro n="convert-pers-affix-to-pers-determiner">
              <with-param pos="2"/>
            </call-macro>


        <call-macro n="conv-case1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="conv-number1">
          <with-param pos="3"/>
        </call-macro>
 <choose><!-- choosing correct to be-->
               <when>
                   <test>
                   <and>
                       <equal><clip pos="3" side="sl" part="a_pers"/><lit-tag v="p3"/></equal>
                       <equal><clip pos="3" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
                   </and>
                   </test>
                   <let><clip pos="3" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="3" side="tl" part="a_pers"/><lit v=""/></let>
               </when>
               <when>
                   <test>
                   <and>
                       <equal><clip pos="3" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
                       <equal><clip pos="3" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
                   </and>
                   </test>
                   <let><clip pos="3" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="3" side="tl" part="a_pers"/><lit v=""/></let>
               </when>
<when>
                   <test>
                   <and>
                       <equal><clip pos="3" side="sl" part="a_pers"/><lit-tag v="p4"/></equal>
                       <equal><clip pos="3" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
                   </and>
                   </test>
                   <let><clip pos="3" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="3" side="tl" part="a_pers"/><lit v=""/></let>
               </when>
               <when>
                   <test>
                   <and>
                       <equal><clip pos="3" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
                       <equal><clip pos="3" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
                   </and>
                   </test>
                   <let><clip pos="3" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="3" side="tl" part="a_pers"/><lit v=""/></let>
                </when>
           </choose>
        <out>
          <chunk name="VP-cop-neg" case="caseFirstWord">
            <tags>
              <tag> <lit-tag v="SV-cop"/></tag>
              <tag><clip pos="1" side="tl" part="a_pers"/></tag>
              <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
            </tags>
            <lu>
                  <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
            <lu>
              <lit v="не"/>
              <lit-tag v="adv"/>
            </lu>
            <b/>
            <lu>
                  <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1">
          <with-param pos="3"/>
        </call-macro>
      </action>
    </rule>


<rule comment="RULE: VP-cop-pres"> <!-- Aliya --> <!-- Мен оқушымын-->

      <!--
      INPUT:  ^мен<prn><pers><p1><sg><nom>/я<prn><pers><p1><mf><sg><nom>$ ^оқушы<n><nom>/ученик<n><m><aa><nom>$ ^е<cop><aor><p1><sg>/@е<cop><aor><p1><sg>$
      OUTPUT: ^vP-cop-present<SV-cop>{^я<prn><pers><p1><mf><sg><nom>$ ^ученик<n><m><aa><sg><nom>$ }$
      -->

      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="n"/>
<pattern-item n="cop"/>
        
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="conv-case1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="conv-number1">
          <with-param pos="3"/>
        </call-macro>
           <choose><!-- choosing correct to be-->
               <when>
                   <test>
                   <and>
                       <equal><clip pos="3" side="sl" part="a_pers"/><lit-tag v="p3"/></equal>
                       <equal><clip pos="3" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
                       <!-- <equal><clip pos="2" side="sl" part="a_gender"/><lit v="pl"/></equal> -->
                   </and>
                   </test>
                   <let><clip pos="3" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="3" side="tl" part="a_pers"/><lit v=""/></let>
                   <!-- <let><clip pos="2" side="tl" part="a_gender"/><lit v=""/></let> -->
               </when>
               <when>
                   <test>
                   <and>
                       <equal><clip pos="3" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
                       <equal><clip pos="3" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
                   </and>
                   </test>
                   <let><clip pos="3" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="3" side="tl" part="a_pers"/><lit v=""/></let>
                   <!-- <let><clip pos="2" side="tl" part="a_gender"/><lit v=""/></let> -->
               </when>
 <when>
                   <test>
                   <and>
                       <equal><clip pos="3" side="sl" part="a_pers"/><lit-tag v="p4"/></equal>
                       <equal><clip pos="3" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
                   </and>
                   </test>
                   <let><clip pos="3" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="3" side="tl" part="a_pers"/><lit v=""/></let>
                   <!-- <let><clip pos="2" side="tl" part="a_gender"/><lit v=""/></let> -->
               </when>
               <when>
                   <test>
                   <and>
                       <equal><clip pos="3" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
                       <equal><clip pos="3" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
                       <!-- <equal><clip pos="2" side="sl" part="a_gender"/><lit v="pl"/></equal> -->
                   </and>
                   </test>
                   <let><clip pos="3" side="tl" part="a_nbr"/><lit v=""/></let>
                   <let><clip pos="3" side="tl" part="a_pers"/><lit v=""/></let>
                   <!-- <let><clip pos="2" side="tl" part="a_gender"/><lit v=""/></let> -->
                </when>
           </choose>

          <let><clip pos="2" side="tl" part="a_nbr"/><clip pos="1" side="tl" part="a_nbr"/></let>
        <out>
          <chunk name="VP-cop-present" case="caseFirstWord">
            <tags>
              <tag> <lit-tag v="SV-cop"/></tag>
            </tags>
            <lu>
                  <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
          <lu>
                  <clip pos="2" side="tl" part="whole"/>
            </lu> 
  <!--<lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                   <clip pos="2" side="tl" part="a_gender"/>
                   <clip pos="2" side="tl" part="a_anim"/>
                  <clip pos="2" side="tl" part="a_nbr"/>
                 <clip pos="2" side="tl" part="a_syntag"/>
<lit-tag v="nom"/>
                </lu> -->
            <b/>
            <lu>
              <clip pos="3" side="tl" part="a_verb"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1">
          <with-param pos="3"/>
        </call-macro>
      </action>
    </rule>



<!--
INPUT:  ^и<cop><p3><sg>/быть<vbser><p3><sg>$
OUTPUT: ^cop-pres<VBSER>{^быть<vbser><pres><p3><sg>$}$
-->
    <rule comment="">
      <pattern>
        <pattern-item n="cop-pres"/>
      </pattern>
      <action>
        <call-macro n="convert-neg-to-ne.adv">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="cop-pres">
            <tags>
              <tag><lit-tag v="VBSER"/></tag>
            </tags>
            <lu><var n="negation"/></lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <lit-tag v="pres"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>



 <!--<rule comment="PRN N"> --><!-- Zhadyra --> <!-- менің атым NP -->
      
     <!-- <pattern>
        <pattern-item n="subj-pron"/>
        <pattern-item n="NP"/>
<pattern-item n="atym_pers-verb"/>
      </pattern>
      <action>
            <call-macro n="build-possessive-from-pron">
              <with-param pos="2"/>
<call-macro n="NEW-build-noun-lu-2-4-5-sg">
      <with-param pos="3"/>
    </call-macro>
            </call-macro>
                <out>
                  <chunk name="subj-pron-atym">
<tags>
                    <tag><clip pos="2" side="sl" part="a_pers"/></tag>
              <tag><clip pos="2" side="sl" part="a_nbr"/></tag>

              </tags>

            <lu>
                                <clip pos="1" side="tl" part="whole"/>
            </lu>
<b/>
             <lu>
              <lit v="звать"/>
              <lit-tag v="vblex"/>
              <lit-tag v="possessive"/>
<lit-tag v="nom"/>
 <lit-tag v="2"/>
 <lit-tag v="3"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_pers"/>
              <lit-tag v="inf"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1">
          <with-param pos="1"/>
        </call-macro>
      </action>
    </rule>-->




<!--etistik shaktary-->



    <rule comment="REGLA: V1 - Buryngy Otken Shak">
<!-- шақырған, шақырмаған --> 
      <pattern>
        <pattern-item n="verb-past"/>
      </pattern>
      <action>
        <call-macro n="translate-verb-fin"><with-param pos="1"/></call-macro>
<choose>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
   </when>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
   </when>
<otherwise>
      <let><var n="gender"/><lit-tag v="5"/></let>
</otherwise>
</choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
<choose>
 <when>
      <test><or>
	<equal><clip pos="1" side="sl" part="a_coop"/><lit-tag v="coop"/></equal>
        <equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal></or>
	</test>
        <out>
          <chunk name="v-coop-past">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_verb"/></tag>
              <tag><clip pos="1" side="sl" part="a_trans"/></tag>
              <tag><clip pos="1" side="sl" part="a_pers"/></tag>
              <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
              </tags>
       <lu>   <var n="negation"/></lu><b/>
           <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
              <clip pos="1" side="tl" part="a_tense"/>
              <var n="gender"/>
             <clip pos="1" side="sl" part="a_nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
 </when>
 <otherwise>
      <out>
          <chunk name="v-past">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_verb"/></tag>
              <tag><clip pos="1" side="sl" part="a_trans"/></tag>
              <tag><clip pos="1" side="sl" part="a_pers"/></tag>
              <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
              </tags>
       
           <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <lit-tag v="impf"/>
              <lit-tag v="iv"/>
              <clip pos="1" side="tl" part="a_tense"/>
              <var n="gender"/>
             <clip pos="1" side="sl" part="a_nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
</otherwise>
  </choose>
      </action>
    </rule>

    <rule comment="REGLA: V2">
      <pattern>
        <pattern-item n="n"/>
        <pattern-item n="verb-fut"/>
      </pattern>
      <action>
        <call-macro n="translate-noun">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="translate-verb-fin">
          <with-param pos="2"/>
        </call-macro>
<choose>
   <when>
      <test><and>
	<equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="aor"/></equal>
	<equal><clip pos="2" side="sl" part="a_aspec"/><lit-tag v="perf"/></equal>
      </and></test>
      <let><clip pos="2" side="tl" part="a_tense"/><lit-tag v="fut"/></let>
   </when>
</choose>

<choose>
   <when>
      <test><and>
	<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="fut"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
   </when>

   <when>
      <test><and>
	<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="fut"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
   </when>

<otherwise>
      <let><var n="gender"/><lit-tag v="5"/></let>
</otherwise>
</choose>

        <out>
          <chunk name="v-neg-fut">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="2" side="sl" part="a_verb"/></tag>
              <tag><clip pos="2" side="sl" part="a_trans"/></tag>
              <tag><clip pos="2" side="sl" part="a_pers"/></tag>
              <tag><clip pos="2" side="sl" part="a_nbr"/></tag>
              </tags>
          <lu><var n="negation"/></lu><b/>

             <lu>
              <lit v="Возможно"/>
              <lit-tag v="adv"/>
            </lu>
             <lu>
              <lit v=","/>
              <lit-tag v="cm"/>
            </lu>
            <b/>
            <lu>
                  <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b/>
             <lu>
              <lit v="быть"/>
              <lit-tag v="vbser"/>
              <lit-tag v="fut"/>
              <lit-tag v="4"/>
              <lit-tag v="5"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: V - Jedel Otken Shak, Auyspaly Osy Shak">
<!-- Жедел өткен шақ: жазды - писал 
       Ауыспалы осы шақ: жазады - пишет -->
      <pattern>
        <pattern-item n="verb-fin"/>
      </pattern>
      <action>
        <call-macro n="translate-verb-fin"><with-param pos="1"/></call-macro>
<choose>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="aor"/></equal>
	<equal><clip pos="1" side="sl" part="a_aspec"/><lit-tag v="perf"/></equal>
      </and></test>
      <let><clip pos="1" side="tl" part="a_tense"/><lit-tag v="fut"/></let>
   </when>
</choose>
<choose>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="ifi"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
   </when>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="ifi"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
   </when>
<otherwise><let><var n="gender"/><lit-tag v="5"/></let></otherwise>
</choose>
<choose>
   <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
      <let><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></let>
      <let><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></let>
   </when>
</choose>
        <out>
          <chunk name="v-neg-fin">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_verb"/></tag>
              <tag><clip pos="1" side="sl" part="a_trans"/></tag>
              <tag><clip pos="1" side="sl" part="a_pers"/></tag>
              <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
              </tags>
          <lu><var n="negation"/></lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
             <clip pos="1" side="sl" part="a_verb"/>
              <clip pos="1" side="sl" part="a_trans"/>
              <clip pos="1" side="tl" part="a_tense"/>              
              <clip pos="1" side="sl" part="a_pers"/>
              <clip pos="1" side="sl" part="a_nbr"/> 
            
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


<rule comment="REGLA: V-imp">
         <pattern>
        <pattern-item n="verb-fin-imp"/>
      </pattern>
      <action>
        <call-macro n="translate-verb-fin">
          <with-param pos="1"/>
        </call-macro>
<choose>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="aor"/></equal>
	<equal><clip pos="1" side="sl" part="a_aspec"/><lit-tag v="perf"/></equal>
      </and></test>
      <let><clip pos="1" side="tl" part="a_tense"/><lit-tag v="fut"/></let>
   </when>
</choose>

<choose>
   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="ifi"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="m"/></let>
   </when>

   <when>
      <test><and>
	<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
	<equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="ifi"/></equal>
      </and></test>
      <let><var n="gender"/><lit-tag v="mfn"/></let>
   </when>

<otherwise>
      <let><var n="gender"/><lit-tag v="4"/></let>
</otherwise>
</choose>

        <out>
          <chunk name="v-neg-fin-imp">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_verb"/></tag>
              <tag><clip pos="1" side="sl" part="a_pers"/></tag>
              <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
              </tags>
          <lu><var n="negation"/></lu><b/>

            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>



   <rule comment="RULE: V-future"> <!--Zhadyra: keler shak "budu"- Мен ертең ойнаймын-->
            <pattern>
        <pattern-item n="tomorrow-adv"/>
        <pattern-item n="verb-fin"/>
      </pattern>
      <action>
      <call-macro n="translate-verb-fin">
          <with-param pos="2"/>
       </call-macro>
<choose>
<when>
<test>
<and>
<equal>
              <clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/>
</equal>

<equal>
              <clip pos="1" side="sl" part="a_tense"/><lit-tag v="ifi"/>
</equal>
</and>
</test>

<let>
<var n="gender"/><lit-tag v="m"/>
</let>
</when>


<otherwise>
<let>
<var n="gender"/><lit-tag v="4"/>
</let>
</otherwise>
</choose>
<out>
         <chunk name="v-neg-fin1">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="sl" part="a_verb"/></tag>
                <tag><clip pos="1" side="sl" part="a_trans"/></tag>
              <tag><clip pos="2" side="sl" part="a_pers"/></tag>
              <tag><clip pos="2" side="sl" part="a_nbr"/></tag>

              </tags>

            <lu>

                                <clip pos="1" side="tl" part="whole"/>
            </lu>
<b/><lu>
<var n="negation"/></lu><b/>

             <lu>
              <lit v="быть"/>
              <lit-tag v="vbser"/>
              <lit-tag v="fut"/>
 <lit-tag v="2"/>
 <lit-tag v="3"/>
<var n="gender"/>
<lit-tag v="5"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <lit-tag v="inf"/>
<clip pos="2" side="tl" part="a_tense"/>
<clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="reset-vars1">
          <with-param pos="1"/>
        </call-macro>
      </action>
    </rule>           


<!--extraction rules for kaz-rus-->
       
<!--<rule>
  <pattern>
    <pattern-item n="CAT__adj_"/>
  </pattern>
  <action>
    <choose>
      <when>--><!--12 | көркем<adj><empty_tag_isadjsint><*iscmp><*isshort><*attruse><*issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><*possessive><empty_tag_case><*atadvl> | прекрасный<adj><sint><(000iscmp><(000isshort><(000attruse><(000issim><nt><an><sg><(000possessive><nom><(000atadvl> действительность<n><(000issim><f><nn><sg><(000possessive><nom><(000attruse> | 0:0 0:1 | <adj><sint><m><an><sg><gen>-->
       <!-- <test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="көркем"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Көркем"/>
            </equal>
            </or>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="прекрасный"/>
            <lit-tag v="adj"/>
            <lit-tag v="sint"/>
            <clip pos="1" side="sl" part="learned_iscmp"/>
            <clip pos="1" side="sl" part="learned_isshort"/>
            <clip pos="1" side="sl" part="learned_attruse"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <lit-tag v="nt"/>
            <lit-tag v="an"/>
            <lit-tag v="sg"/>
            <clip pos="1" side="sl" part="learned_possessive"/>
            <lit-tag v="nom"/>
            <clip pos="1" side="sl" part="learned_atadvl"/>
            <lit v=""/>
          </lu>
          <b/>
          <lu>
            <lit v="действительность"/>
            <lit-tag v="n"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <lit-tag v="f"/>
            <lit-tag v="nn"/>
            <lit-tag v="sg"/>
            <clip pos="1" side="sl" part="learned_possessive"/>
            <lit-tag v="nom"/>
            <clip pos="1" side="sl" part="learned_attruse"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule1"/></lu></out></when>
      <when>--><!--11 | ұлттық<adj><empty_tag_isadjsint><*iscmp><*isshort><*attruse><*issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><*possessive><empty_tag_case><*atadvl> | национальный<adj><sint><(000iscmp><(000isshort><(000attruse><(000issim><nt><an><sg><(000possessive><nom><(000atadvl> блюдо<n><(000issim><nt><nn><sg><(000possessive><nom><(000attruse> | 0:0 0:1 | <adj><sint><m><an><sg><gen>-->
       <!-- <test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="ұлттық"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Ұлттық"/>
            </equal>
            </or>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="национальный"/>
            <lit-tag v="adj"/>
            <lit-tag v="sint"/>
            <clip pos="1" side="sl" part="learned_iscmp"/>
            <clip pos="1" side="sl" part="learned_isshort"/>
            <clip pos="1" side="sl" part="learned_attruse"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <lit-tag v="nt"/>
            <lit-tag v="an"/>
            <lit-tag v="sg"/>
            <clip pos="1" side="sl" part="learned_possessive"/>
            <lit-tag v="nom"/>
            <clip pos="1" side="sl" part="learned_atadvl"/>
            <lit v=""/>
          </lu>
          <b/>
          <lu>
            <lit v="блюдо"/>
            <lit-tag v="n"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <lit-tag v="nt"/>
            <lit-tag v="nn"/>
            <lit-tag v="sg"/>
            <clip pos="1" side="sl" part="learned_possessive"/>
            <lit-tag v="nom"/>
            <clip pos="1" side="sl" part="learned_attruse"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule2"/></lu></out></when>
      <when>--><!--10 | <adj><empty_tag_isadjsint><empty_tag_iscmp><empty_tag_isshort><advl><*issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><*possessive><empty_tag_case><*atadvl> | <adj><sint><(000issim><f><an><sg><(000possessive><nom><(000atadvl> | 0:0 | <adj><sint><empty_tag_iscmp><empty_tag_isshort><advl><m><an><sg><gen>-->
       <!--<test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_iscmp"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_isshort"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_attruse"/>
                 <lit-tag v="advl"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_iscmp" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_isshort" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_attruse" />
              <lit-tag v="advl"/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <clip pos="1" side="tl" part="lemh"/>
            <lit-tag v="adj"/>
            <lit-tag v="sint"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <lit-tag v="f"/>
            <lit-tag v="an"/>
            <lit-tag v="sg"/>
            <clip pos="1" side="sl" part="learned_possessive"/>
            <lit-tag v="nom"/>
            <clip pos="1" side="sl" part="learned_atadvl"/>
            <clip pos="1" side="tl" part="lemq"/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule3"/></lu></out></when>
      <when>--><!--9 | сау<adj><empty_tag_isadjsint><empty_tag_iscmp><empty_tag_isshort><empty_tag_attruse><empty_tag_issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><empty_tag_possessive><empty_tag_case><*atadvl> | до<pr> | 0:0 | <adj><sint><empty_tag_iscmp><empty_tag_isshort><empty_tag_attruse><empty_tag_issim><m><an><sg><empty_tag_possessive><gen>-->
        <!--<test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_iscmp"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_isshort"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_attruse"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_issim"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_possessive"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="сау"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Сау"/>
            </equal>
            </or>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_iscmp" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_isshort" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_attruse" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_issim" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_gender" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_reltype" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_numberat" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_possessive" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_case" />
              <lit v=""/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="до"/>
            <lit-tag v="pr"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule4"/></lu></out></when>
      <when>--><!--8 | Сау<adj><empty_tag_isadjsint><empty_tag_iscmp><empty_tag_isshort><empty_tag_attruse><empty_tag_issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><empty_tag_possessive><empty_tag_case><*atadvl> | До<pr> | 0:0 | <adj><sint><empty_tag_iscmp><empty_tag_isshort><empty_tag_attruse><empty_tag_issim><m><an><sg><empty_tag_possessive><gen>-->
        <!--<test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_iscmp"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_isshort"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_attruse"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_issim"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_possessive"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Сау"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Сау"/>
            </equal>
            </or>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_iscmp" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_isshort" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_attruse" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_issim" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_gender" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_reltype" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_numberat" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_possessive" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_case" />
              <lit v=""/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="До"/>
            <lit-tag v="pr"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule5"/></lu></out></when>
      <when>--><!--7 | Жаңа<adj><empty_tag_isadjsint><*iscmp><*isshort><*attruse><*issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><*possessive><empty_tag_case><*atadvl> | Новый<adj><sint><(000iscmp><(000isshort><(000attruse><(000issim><f><an><sg><(000possessive><nom><(000atadvl> | 0:0 | <adj><sint><m><an><sg><gen>-->
        <!--<test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Жаңа"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Жаңа"/>
            </equal>
            </or>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="Новый"/>
            <lit-tag v="adj"/>
            <lit-tag v="sint"/>
            <clip pos="1" side="sl" part="learned_iscmp"/>
            <clip pos="1" side="sl" part="learned_isshort"/>
            <clip pos="1" side="sl" part="learned_attruse"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <lit-tag v="f"/>
            <lit-tag v="an"/>
            <lit-tag v="sg"/>
            <clip pos="1" side="sl" part="learned_possessive"/>
            <lit-tag v="nom"/>
            <clip pos="1" side="sl" part="learned_atadvl"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule6"/></lu></out></when>
      <when>--><!--6 | сүйікті<adj><empty_tag_isadjsint><*iscmp><*isshort><*attruse><*issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><*possessive><empty_tag_case><*atadvl> | любимый<adj><sint><(000iscmp><(000isshort><(000attruse><(000issim><nt><an><sg><(000possessive><nom><(000atadvl> | 0:0 | <adj><sint><m><an><sg><gen>-->
        <!--<test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="сүйікті"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Сүйікті"/>
            </equal>
            </or>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="любимый"/>
            <lit-tag v="adj"/>
            <lit-tag v="sint"/>
            <clip pos="1" side="sl" part="learned_iscmp"/>
            <clip pos="1" side="sl" part="learned_isshort"/>
            <clip pos="1" side="sl" part="learned_attruse"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <lit-tag v="nt"/>
            <lit-tag v="an"/>
            <lit-tag v="sg"/>
            <clip pos="1" side="sl" part="learned_possessive"/>
            <lit-tag v="nom"/>
            <clip pos="1" side="sl" part="learned_atadvl"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule7"/></lu></out></when>
      <when>--><!--5 | танымал<adj><empty_tag_isadjsint><*iscmp><*isshort><*attruse><*issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><*possessive><empty_tag_case><*atadvl> | известный<adj><sint><(000iscmp><(000isshort><(000attruse><(000issim><nt><an><sg><(000possessive><nom><(000atadvl> | 0:0 | <adj><sint><m><an><sg><gen>-->
        <!--<test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="танымал"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Танымал"/>
            </equal>
            </or>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="известный"/>
            <lit-tag v="adj"/>
            <lit-tag v="sint"/>
            <clip pos="1" side="sl" part="learned_iscmp"/>
            <clip pos="1" side="sl" part="learned_isshort"/>
            <clip pos="1" side="sl" part="learned_attruse"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <lit-tag v="nt"/>
            <lit-tag v="an"/>
            <lit-tag v="sg"/>
            <clip pos="1" side="sl" part="learned_possessive"/>
            <lit-tag v="nom"/>
            <clip pos="1" side="sl" part="learned_atadvl"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule8"/></lu></out></when>
      <when>--><!--4 | қарапайым<adj><empty_tag_isadjsint><empty_tag_iscmp><empty_tag_isshort><empty_tag_attruse><empty_tag_issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><empty_tag_possessive><empty_tag_case><*atadvl> | о<pr> | 0:0 | <adj><sint><empty_tag_iscmp><empty_tag_isshort><empty_tag_attruse><empty_tag_issim><m><an><sg><empty_tag_possessive><gen>-->
        <!--<test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_iscmp"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_isshort"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_attruse"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_issim"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_possessive"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="қарапайым"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Қарапайым"/>
            </equal>
            </or>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_iscmp" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_isshort" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_attruse" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_issim" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_gender" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_reltype" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_numberat" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_possessive" />
              <lit v=""/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="learned_case" />
              <lit v=""/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="о"/>
            <lit-tag v="pr"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule9"/></lu></out></when>
      <when>--><!--3 | <adj><empty_tag_isadjsint><*iscmp><*isshort><*attruse><*issim><empty_tag_gender><empty_tag_reltype><empty_tag_numberat><*possessive><empty_tag_case><*atadvl> | <adj><sint><(000iscmp><(000isshort><(000attruse><(000issim><m><an><sg><(000possessive><nom><(000atadvl> | 0:0 | <adj><sint><m><an><sg><gen>-->
        <!--<test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_isadjsint"/>
                 <lit-tag v="sint"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_gender"/>
                 <lit-tag v="m"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_reltype"/>
                 <lit-tag v="an"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_numberat"/>
                 <lit-tag v="sg"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="gen"/>
               </equal>
           </and>
            <equal>
              <clip pos="1" side="sl" part="learned_isadjsint" />
              <lit v=""/>
            </equal>
        </and>
        </test>
       <out>
       <chunk name="__adj_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <clip pos="1" side="tl" part="lemh"/>
            <lit-tag v="adj"/>
            <lit-tag v="sint"/>
            <clip pos="1" side="sl" part="learned_iscmp"/>
            <clip pos="1" side="sl" part="learned_isshort"/>
            <clip pos="1" side="sl" part="learned_attruse"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <lit-tag v="m"/>
            <lit-tag v="an"/>
            <lit-tag v="sg"/>
            <clip pos="1" side="sl" part="learned_possessive"/>
            <lit-tag v="nom"/>
            <clip pos="1" side="sl" part="learned_atadvl"/>
            <clip pos="1" side="tl" part="lemq"/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule10"/></lu></out></when>
      <otherwise>
        <reject-current-rule shifting="no" />
<out><lu><lit v="*wordforword1"/></lu></out></otherwise>
    </choose>
  </action>
</rule>-->
 


<rule>
  <pattern>
    <pattern-item n="CAT__ND_GD"/>
  </pattern>
  <action>
  <call-macro n="f_set_genre_num">
    <with-param pos="1"/>
  </call-macro>
  <out>
    <lu>
      <clip pos="1" side="tl" part="whole"/>
    </lu>
  </out>
<out><lu><lit v="*isolatedword"/></lu></out></action><!--isolated word-->
</rule>


<!--<rule>
<pattern><pattern-item n="sent"/></pattern><action> <let><var n="number"/> <lit-tag v="sg"/></let><let><var n="gender"/><lit-tag v="m"/></let> <out><lu><clip pos="1" side="tl" part="whole"/></lu></out><out><lu><lit v="*isolatedword"/></lu></out></action>
</rule>--><!--
<rule>
<pattern><pattern-item n="any"/></pattern><action>  <out><chunk name="any" case="caseFirstWord"><tags>             <tag><lit-tag v="LRN"/></tag>       </tags>   <lu><clip pos="1" side="tl" part="whole"/></lu></chunk></out> <out><lu><lit v="*isolatedword"/></lu></out></action>
</rule>

<rule>
  <pattern>
    <pattern-item n="CAT__post_"/>
    <pattern-item n="CAT__n_"/>
  </pattern>
  <action>
    <choose>
      <when>
        <test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="pr"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="learned_case"/>
                 <lit-tag v="prp"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="туралы"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Туралы"/>
            </equal>
            </or>
          
           <and>
            <begins-with>
              <clip pos="2" side="tl" part="tags" />
              <lit-tag v="n"/>
            </begins-with>
               <equal>
                 <clip pos="2" side="tl" part="learned_gender"/>
                 <lit-tag v="f"/>
               </equal>
               <equal>
                 <clip pos="2" side="tl" part="learned_reltype"/>
                 <lit-tag v="nn"/>
               </equal>
               <equal>
                 <clip pos="2" side="tl" part="learned_numberat"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="2" side="tl" part="learned_case"/>
                 <lit-tag v="acc"/>
               </equal>
           </and>
          
        </and>
        </test>
       <out>
       <chunk name="__post___n_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <lit-tag v="n"/>
            <clip pos="2" side="sl" part="learned_issim"/>
            <lit-tag v="f"/>
            <lit-tag v="nn"/>
            <lit-tag v="sg"/>
            <clip pos="2" side="sl" part="learned_possessive"/>
            <clip pos="2" side="sl" part="learned_form"/>
            <lit-tag v="gen"/>
            <clip pos="2" side="sl" part="learned_attruse"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
          <b pos="1"/>
      </chunk>
      </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
<out><lu><lit v="*executedtule8"/></lu></out></when>
      <otherwise>
        <reject-current-rule shifting="no" />
<out><lu><lit v="*wordforword3"/></lu></out></otherwise>
    </choose>
  </action>
</rule>-->


 


          

<rule comment="RULE: verb-need"> <!--Magan kitap kerek-->
      <pattern>
        <pattern-item n="kerek"/>
      </pattern>
      <action>
        <call-macro n="conv-case1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="conv-number1">
          <with-param pos="1"/>
        </call-macro>
<call-macro n="remove-poss">
          <with-param pos="1"/>
        </call-macro>
 <choose>
               <when>
                   <test>
                   
                       <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
                      </test>
                 <let><clip pos="1" side="tl" part="a_nbr"/><lit v=""/></let>
           <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>

                </when>
<when>
                   <test>
                   
                       <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p4"/></equal>
                      </test>
                 <let><clip pos="1" side="tl" part="a_nbr"/><lit v=""/></let>
           <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>

                </when>
<when>
                   <test>
                   <and>
                       <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
                       <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
                     </and>
                      </test>
                 <let><clip pos="1" side="tl" part="a_nbr"/><lit v=""/></let>
           <let><clip pos="1" side="tl" part="a_pers"/><lit v=""/></let>
                </when>

           </choose>
        <out>
          <chunk name="verb-need" case="caseFirstWord">
            <tags>
              <tag> <lit-tag v="SV-kerek"/></tag>
<tag> <lit-tag v="ND"/></tag>
 <tag> <lit-tag v="PD"/></tag>
 
</tags>
<lu>
              <lit v="нужна"/>
              <lit-tag v="vblex"/>
             <lit-tag v="pres"/>

  <lit-tag v="2"/>
              <lit-tag v="3"/>
<lit-tag v="4"/>
            
</lu>

          </chunk>
        </out>
        <call-macro n="reset-vars1">
          <with-param pos="1"/>
        </call-macro>
      </action>
    </rule>



   <rule comment="REGLA: V - Maksatty Keler Shak">
      <!-- шақырмақ  - собирается позвать -->
      <pattern>
        <pattern-item n="verb-fin-fut-plan"/>
      </pattern>
      <action>
	<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
     <choose>
	  <when>
	    <test><equal><clip pos="1" side="sl" part="a_nbr"/><lit v=""/></equal></test>
	    <out>
          <chunk name="verb-prc-plan">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_aspec"/></tag>
            </tags> <lu><var n="negation"/></lu><b/>
        
            <lu>
	      <lit v="собираться"/>
	      <lit-tag v="vblex"/>
	      <lit-tag v="impf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
            </lu>
             <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
	      <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
	  </when>
	<otherwise>
    <choose>
      <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2.frm"/></equal>
	</test>
        <out>
          <chunk name="verb-fin-fut-plan2">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_aspec"/></tag>
            </tags> <lu><var n="negation"/></lu><b/>
            <lu>
	      <lit v="собираться"/>
	      <lit-tag v="vblex"/>
	      <lit-tag v="impf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="pres"/>
              <lit-tag v="p2"/>
              <lit-tag v="pl"/>
            </lu>
               <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
	      <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          </out>
      </when>
   <otherwise>
        <out>
          <chunk name="verb-fin-fut-plan">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_aspec"/></tag>
            </tags> <lu><var n="negation"/></lu><b/>
            <lu>
	      <lit v="собираться"/>
	      <lit-tag v="vblex"/>
	      <lit-tag v="impf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="pres"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
            </lu>
               <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
	      <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          </out>
         </otherwise>
         </choose>
       </otherwise>
     </choose>
      </action>
    </rule>
 <rule comment="REGLA: V - Maksatty Keler Shak">
      <!-- шақырмақ та - тоже собирается позвать -->
      <pattern>
        <pattern-item n="verb-fin-fut-plan"/>
        <pattern-item n="v_vars"/>
      </pattern>
      <action>
	<choose>
	  <when>
	    <test><not><equal><clip pos="1" side="sl" part="a_formality"/><lit v=""/></equal></not></test>
	    <let><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></let>
            <let><clip pos="1" side="tl" part="a_formality"/><lit-tag v=""/></let>
	  </when>
	</choose>
<choose>
 <when>
      <test>
	<equal><clip pos="1" side="sl" part="a_neg"/><lit-tag v="neg"/></equal>
	</test>
      <let><var n="negation"/><concat><lit v="не"/><lit-tag v="adv"/></concat></let>
      
   </when>
  </choose>
        <choose>
	  <when>
	    <test><equal><clip pos="1" side="sl" part="a_nbr"/><lit v=""/></equal></test>
	    <out>
          <chunk name="verb-prc-plan-vars">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_aspec"/></tag>
            </tags> <lu> <var n="negation"/></lu><b/>
        
            <lu>
	      <lit v="собираться"/>
	      <lit-tag v="vblex"/>
	      <lit-tag v="impf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="pres"/>
              <lit-tag v="p3"/>
              <lit-tag v="sg"/>
            </lu><b/>
            <lu><clip pos="2" side="tl" part="whole"/>
            </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
	      <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
	  </when>
	<otherwise>
        <out>
          <chunk name="verb-fin-fut-plan-vars">
            <tags><tag><lit-tag v="SV"/></tag>
              <tag><clip pos="1" side="tl" part="a_aspec"/></tag>
            </tags> 
     <lu>
<var n="negation"/>
        </lu>
            <b/>
            <lu>
	      <lit v="собираться"/>
	      <lit-tag v="vblex"/>
	      <lit-tag v="impf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="pres"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
            </lu><b/>
            <lu><clip pos="2" side="tl" part="whole"/>
            </lu><b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
	      <lit-tag v="vblex"/>
              <lit-tag v="perf"/>
              <lit-tag v="iv"/>
	      <lit-tag v="inf"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
       </otherwise>
       </choose>
      </action>
    </rule>

<!-- шақырардан-->
<rule comment="REGLA: IN V-gpr_fut+loc R-KL">
      
      <pattern>
        <pattern-item n="verb-nonfin-gpr_fut"/>
      </pattern>
      <action>
        
                       <out>
              <chunk name="verb-nonfin-gpr_fut">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><lit-tag v="perf"/></tag>
		  <tag><clip pos="1" side="tl" part="a_case"/></tag>
		</tags>


		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <lit-tag v="vblex"/>
		  <lit-tag v="perf"/>
		  <lit-tag v="iv"/>
		  <lit-tag v="inf"/>
		  
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
              </chunk>
            </out>
	 
      </action>
    </rule>


    <rule comment="REGLA: V
		   To translate every non-finite form with infinitive is not good,
                   but this is a temporal solution until things get sorted out.">
      <!--
      INPUT:  ^ойна<v><tv><ger_past><px3sp><acc>/игра<n><f><nn><px3sp><acc>$
      OUTPUT: ^n<SN>{^игра<n><f><nn><sg><acc>$}$
      INPUT:  ^и<бол><ger_past><px3sp><acc>/быть<vbser><ger_past><px3sp><acc>$
      OUTPUT: ^v<SV>{^быть<vbser><inf>$}$
      INPUT:  ^тап<v><tv><prc_impf>/найти<vblex><perf><tv><prc_impf>$
      OUTPUT: ^v<SV>{^найти<vblex><perf><inf>$}$
      -->
      <pattern>
        <pattern-item n="verb-nonfin"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test><equal><clip pos="1" side="tl" part="a_nom"/><lit-tag v="n"/></equal></test>
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <chunk name="n">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="convert-neg-to-ne.adv">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <chunk name="verb-nonfin">  <!-- шақырарлық....     -->
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                </tags> <lu>
                <var n="negation"/></lu><b/>
                
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <lit-tag v="vblex"/>
		  <lit-tag v="perf"/>
		  <lit-tag v="iv"/>
		  <lit-tag v="inf"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>


    <rule comment="REGLA: V
		   To translate every non-finite form with infinitive is not good,
                   but this is a temporal solution until things get sorted out.">
      <!--
      INPUT:  ^ойна<v><tv><ger_past><px3sp><acc>/игра<n><f><nn><px3sp><acc>$
      OUTPUT: ^n<SN>{^игра<n><f><nn><sg><acc>$}$
      INPUT:  ^и<бол><ger_past><px3sp><acc>/быть<vbser><ger_past><px3sp><acc>$
      OUTPUT: ^v<SV>{^быть<vbser><inf>$}$
      INPUT:  ^тап<v><tv><prc_impf>/найти<vblex><perf><tv><prc_impf>$
      OUTPUT: ^v<SV>{^найти<vblex><perf><inf>$}$
      -->
      <pattern>
        <pattern-item n="verb-nonfin"/>
        <pattern-item n="v_vars"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test><equal><clip pos="1" side="tl" part="a_nom"/><lit-tag v="n"/></equal></test>
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <chunk name="n">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="convert-neg-to-ne.adv">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <chunk name="verb-nonfin-vars">  <!-- шақырарлық....     -->
                <tags>
                  <tag><lit-tag v="SV"/></tag>
                </tags> <lu>
                <var n="negation"/></lu><b/>
                
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <lit-tag v="vblex"/>
		  <lit-tag v="perf"/>
		  <lit-tag v="iv"/>
		  <lit-tag v="inf"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu><b/>
               <lu>
                  <clip pos="2" side="tl" part="whole"/>
                  </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>



      <!--
      INPUT:  барғандарға
      OUTPUT: к ходившим
      -->

   <!-- <rule comment="REGLA: IN V-ger_past+loc R-KL">
      
      <pattern>
        <pattern-item n="verb-nonfin-ger_past"/>
      </pattern>
      <action>
        
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
            <choose>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/>
</equal>
</test>
 <let><var n="preposition"/><concat><lit v="к"/><lit-tag v="pr"/></concat></let>
          </when>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="loc"/>
</equal>
</test>
 <let><var n="preposition"/><concat><lit v="у"/><lit-tag v="pr"/></concat></let>
          </when>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="acc"/>
</equal>
</test>
 <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="gen"/></let>
          </when>
</choose>

            <call-macro n="convert-neg-to-ne.adv">
              <with-param pos="1"/>
            </call-macro>
            <out>
              <chunk name="R-KL">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><lit-tag v="ger_past"/></tag>
		  <tag><clip pos="1" side="tl" part="a_case"/></tag>
		</tags>
<lu>
		<var n="preposition"/>
</lu>
<b/>
<lu>

		<var n="negation"/>
</lu>
<b/>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <lit-tag v="vblex"/>
		  <lit-tag v="impf"/>
		  <lit-tag v="pp"/>
		  <lit-tag v="actv"/>
		  <lit-tag v="mfn"/>
		  <lit-tag v="an"/>
		  <lit-tag v="pl"/>
		  <lit-tag v="3"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
              </chunk>
            </out>
	 
      </action>
    </rule>-->




<rule comment="REGLA: IN V-ger_past+loc R-KL">
      <!--
   Барғаным+...
      -->
      <pattern>
        <pattern-item n="verb-nonfin-ger_bar"/>
      </pattern>
      <action>
        
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
            <choose>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/>
</equal>
</test>
 <let><var n="preposition"/><concat><lit v="к"/><lit-tag v="pr"/></concat></let>
          <let><var n="case"/><lit-tag v="dat"/></let>
          </when>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="loc"/>
</equal>
</test>
 <let><var n="preposition"/><concat><lit v="у"/><lit-tag v="pr"/></concat></let>
          </when>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="acc"/>
</equal>
</test>
 <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="gen"/></let>
          </when>
</choose>

          <!--  <call-macro n="convert-neg-to-ne.adv">
              <with-param pos="1"/>
            </call-macro>-->

<!--<when>
<test>
<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/>
</equal>
</test>
</when>-->
            <out>
              <chunk name="r-Koptik-barrr">
		
                    <tags>
                      <tag><lit-tag v="SN"/></tag>
                      
                      <tag><clip pos="1" side="sl" part="a_SYNLABEL"/></tag>
	
<tag><clip pos="1" side="tl" part="a_gender"/></tag>
		      <tag><clip pos="1" side="tl" part="a_nbr"/></tag>
<tag><clip pos="1" side="tl" part="a_case"/></tag>
                    </tags>
 <lu>
		<var n="preposition"/>
</lu>
<b/>
<var n="possessive"/>
               <b/>     
                    <lu>
		      <clip pos="1" side="tl" part="lem"/>
		      <clip pos="1" side="tl" part="a_nom"/>
		      <clip pos="1" side="tl" part="a_gender"/>
		      <clip pos="1" side="tl" part="a_anim"/>
			
		      <lit-tag v="3"/>
<lit-tag v="4"/>
		      <clip pos="1" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
     </action>
    </rule>







 <!--
      INPUT:  барғанымға
      OUTPUT: к моему хождению-->
      

    <rule comment="REGLA: IN V-ger_past+loc R-KL">
      <!--
      INPUT:  ^айқайла<v><iv><ger_past><acc>/кричать<vblex><impf><iv><ger_past><acc>$
      OUTPUT: ^v<SV><ger_past><acc>{^кричать<vblex><impf><past><m><sg>$}$
      -->
      <pattern>
        <pattern-item n="verb-nonfin-ger_past"/>
      </pattern>
      <action>
        
            <call-macro n="translate-noun">
              <with-param pos="1"/>
            </call-macro>
            <choose>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/>
</equal>
</test>
 <let><var n="preposition"/><concat><lit v="к"/><lit-tag v="pr"/></concat></let>
          <let><var n="case"/><lit-tag v="dat"/></let>
          </when>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="loc"/>
</equal>
</test>
 <let><var n="preposition"/><concat><lit v="у"/><lit-tag v="pr"/></concat></let>
          </when>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="acc"/>
</equal>
</test>
 <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="gen"/></let>
          </when>
</choose>

            <call-macro n="convert-neg-to-ne.adv">
              <with-param pos="1"/>
            </call-macro>
<choose>
<when>
<test>
<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/>
</equal>
</test>
            <out>
              <chunk name="R-KL">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><lit-tag v="ger_past"/></tag>
		  <tag><clip pos="1" side="tl" part="a_case"/></tag>

		</tags>
<lu>
		<var n="preposition"/>
</lu>


<b/>
<lu>


		<var n="negation"/>
</lu>
<b/>



		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="sl" part="a_verb"/>
		  <lit-tag v="pp"/>
<var n="possessive"/>
		  <lit-tag v="actv"/>
		  <lit-tag v="mfn"/>
		  <clip pos="1" side="tl" part="a_nbr"/>
		  <lit-tag v="3"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
              </chunk>
            </out>
	           </when>
<otherwise>

            <out>
              <chunk name="R-KL-SG">
		<tags>
		  <tag><lit-tag v="SV"/></tag>
		  <tag><lit-tag v="ger_past"/></tag>
		  <tag><clip pos="1" side="tl" part="a_case"/></tag>
		</tags>
<lu>
		<var n="preposition"/>
</lu>
<b/>
<lu>

		<var n="negation"/>
</lu>
<b/>
		<lu>
		  <clip pos="1" side="tl" part="lemh"/>
		  <clip pos="1" side="sl" part="a_verb"/>
		  <lit-tag v="pp"/>
		  <lit-tag v="actv"/>
		  <lit-tag v="m"/>
		  <lit-tag v="sg"/>
		  <lit-tag v="3"/>
		  <clip pos="1" side="tl" part="lemq"/>
		</lu>
              </chunk>
            </out>
</otherwise>
</choose>

      </action>
    </rule>

   <rule comment="REGLA: ADJ">
      <pattern>
        <pattern-item n="adj"/>
        <pattern-item n="cop"/>
      </pattern>
      <action>
        <choose>
          <when>
   <test><equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="adv"/></equal></test>
            <out>
              <chunk name="adv">
                <tags>
                  <tag><lit-tag v="AdvP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </when>
          <when>
            <test><equal caseless="yes"><clip pos="1" side="tl" part="lem"/><lit v="быть"/></equal></test>
            <out>
              <chunk name="bar">
                <tags>
                  <tag><lit-tag v="VBSER"/></tag>
                  <tag><clip pos="1" side="tl" part="a_neg"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </when>
          <when>
            <test><equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="pred"/></equal></test>
            <out>
              <chunk name="pred">
                <tags>
                  <tag><lit-tag v="PRED"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_n_poss"/>
                   <clip pos="1" side="tl" part="a_case"/>
                  <clip pos="1" side="tl" part="a_gender"/>
                  <clip pos="1" side="tl" part="a_nbr"/>
                </lu>
              </chunk>
            </out>
          </when>
             <when>
            <test><equal><clip pos="1" side="tl" part="a_syntag"/><lit-tag v="advl"/></equal></test>
            <out>
              <chunk name="adj-comp-advl">
                <tags>
                  <tag><lit-tag v="ADVL"/></tag>
                </tags>
                              <lu>
                       <lit v="более"/>
                      <lit-tag v="pr"/>
                     </lu>
                    <b/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                    <lit-tag v="m"/> 
                    <lit-tag v="an"/> 
                   <lit-tag v="sg"/> 
                   <lit-tag v="acc"/>
                </lu>
              </chunk>
            </out>
          </when>
           <when>
            <test><equal><clip pos="1" side="tl" part="a_syntag"/><lit-tag v="advl"/></equal></test>
            <out>
              <chunk name="adj-advl">
                <tags>
                  <tag><lit-tag v="ADVL"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                    <lit-tag v="m"/> 
                    <lit-tag v="an"/> 
                   <lit-tag v="sg"/> 
                   <lit-tag v="acc"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adj1">
                <tags>
                  <tag><lit-tag v="AdjP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                    <lit-tag v="m"/> 
                    <lit-tag v="an"/> 
                   <lit-tag v="sg"/> 
                   <lit-tag v="nom"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>



    <rule comment="REGLA: DET">


      <!--
        INPUT:  ^бір<det><ind>/один<num><m><an><sg><nom>$
        OUTPUT: ^det<DET>{^один<num><m><an><sg><nom>$}$
      -->
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="DET"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<rule comment="RULE:prn+vars"> 
<pattern>
 <pattern-item n="prn1"/>
<pattern-item n="v_vars"/>
</pattern>
  <action>
<choose>
          <when>

            <test>   
<or>
<and>
             <equal><clip pos="1" side="sl" part="a_syntag"/><lit-tag v="subst"/></equal>
             <equal><clip pos="1" side="sl" part="lem"/><lit v="мен"/></equal>
<not>        <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></not>

</and>
<and>

             <equal><clip pos="1" side="sl" part="lem"/><lit v="мен"/></equal>
       <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal>

</and>

</or>
            </test>
 <out>
       <chunk name="prn+vars2-men" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
   <lu>
  <clip pos="2" side="tl" part="whole"/>
 </lu>
 <b/>

<lu>
  <clip pos="1" side="tl" part="lem"/>
  <lit-tag v="prn.pos"/>
  <lit-tag v="m"/>
  <lit-tag v="an"/>
  <lit-tag v="sg"/>
    <lit-tag v="nom"/>

 </lu>

 </chunk>
  </out>
</when>
<otherwise>
 <out>
       <chunk name="prn+vars2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu>
  <clip pos="1" side="tl" part="lem"/>
  <clip pos="1" side="tl" part="a_nom"/>
  <lit-tag v="mf"/>
  <lit-tag v="sg"/>
    <lit-tag v="dat"/>

 </lu>
 <b/>
 <lu>
  <clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>

</otherwise>
</choose>
 </action>
 </rule> 




<rule comment="RULE:prn"> 
<pattern>
 <pattern-item n="prn1"/>
<pattern-item n="cop"/>
</pattern>
  <action>
<call-macro n="choose_case_and_postposition1">
 <with-param pos="1"/>
            </call-macro>               
<choose>
          <when>
            <test>   
             <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="sim"/></equal>
            </test>
	    <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="nom"/></let>
<out>
       <chunk name="prn-pers-sim" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags> 
<lu>
                  <lit v="как"/>
                  <lit-tag v="adv"/>
                </lu>
<b/>

   <lu>
<var n="postposition_lu"/>
</lu>
<b/>  
  <lu>
  <clip pos="1" side="tl" part="lem"/>
  <clip pos="1" side="tl" part="a_nom"/>
  <lit-tag v="mf"/>
  <lit-tag v="sg"/>
<var n="case"/>
 </lu>

 </chunk>
  </out>
</when>
         <when>

            <test>   
<and>
             <equal><clip pos="1" side="sl" part="a_syntag"/><lit-tag v="subst"/></equal>
             <equal><clip pos="1" side="sl" part="lem"/><lit v="мен"/></equal>
<not>        <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></not>
</and>
            </test>
 <out>
       <chunk name="prn+pers-men" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  
   <lu>
<var n="postposition_lu"/>
</lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
  <lit-tag v="prn.pos"/>
  <lit-tag v="m"/>
  <lit-tag v="an"/>
  <lit-tag v="sg"/>
<var n="case"/>

 </lu>

 </chunk>
  </out>
</when>
<when>

            <test>
<and>
             <equal><clip pos="1" side="sl" part="a_nom"/><lit-tag v="prn.pers.p3"/></equal>
             <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
     </and>   
            </test>
 <out>
       <chunk name="prn+pers-ol" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  
   <lu>
<var n="postposition_lu"/>
</lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <clip pos="1" side="tl" part="a_nom"/>             
  <lit-tag v="m"/>
  <lit-tag v="sg"/>
<var n="case"/>

 </lu>

 </chunk>
  </out>
</when>

<otherwise>
<out>
       <chunk name="prn-pers" case="caseFirstWord">  <!-- біз -мы / олар - они -->
      <tags><tag><lit-tag v="NP"/></tag>       </tags> 

   <lu>
<var n="postposition_lu"/>
</lu>
<b/>  
  <lu>
  <clip pos="1" side="tl" part="lem"/>
  <clip pos="1" side="tl" part="a_nom"/>
  <clip pos="1" side="tl" part="a_gender"/>
  <clip pos="1" side="tl" part="a_nbr"/>
<var n="case"/>

 </lu>
 
 
 </chunk>
  </out>
 </otherwise>
</choose>

 </action>
 </rule> 

<rule comment="RULE:prn"> 
<pattern>
 <pattern-item n="prn1"/>
</pattern>
  <action>
<call-macro n="choose_case_and_postposition1">
 <with-param pos="1"/>
            </call-macro>               
<choose>
          <when>
            <test>   
             <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="sim"/></equal>
            </test>
      <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="nom"/></let>
<out>
       <chunk name="prn-pers-sim1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags> 
<lu>
                  <lit v="как"/>
                  <lit-tag v="adv"/>
                </lu>
<b/>

   <lu>
<var n="postposition_lu"/>
</lu>
<b/>  
  <lu>
  <clip pos="1" side="tl" part="lem"/>
  <clip pos="1" side="tl" part="a_nom"/>
  <lit-tag v="mf"/>
  <lit-tag v="sg"/>
<var n="case"/>
 </lu>

 </chunk>
  </out>
</when>
         <when>

            <test>   
<and>
             <equal><clip pos="1" side="sl" part="a_syntag"/><lit-tag v="subst"/></equal>
             <equal><clip pos="1" side="sl" part="lem"/><lit v="мен"/></equal>
<not>        <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></not>
</and>
            </test>
 <out>
       <chunk name="prn+pers-men1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  
   <lu>
<var n="postposition_lu"/>
</lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
  <lit-tag v="prn.pos"/>
  <lit-tag v="m"/>
  <lit-tag v="an"/>
  <lit-tag v="sg"/>
<var n="case"/>

 </lu>

 </chunk>
  </out>
</when>
<otherwise>
<out>
       <chunk name="prn-pers1" case="caseFirstWord">  <!-- біз -мы / олар - они -->
      <tags><tag><lit-tag v="NP"/></tag>       </tags> 

   <lu>
<var n="postposition_lu"/>
</lu>
<b/>  
  <lu>
  <clip pos="1" side="tl" part="lem"/>
  <clip pos="1" side="tl" part="a_nom"/>
  <clip pos="1" side="tl" part="a_gender"/>
  <clip pos="1" side="tl" part="a_nbr"/>
<var n="case"/>

 </lu>
 
 </chunk>
  </out>
 </otherwise>
</choose>

 </action>
 </rule> 


<rule comment="RULE:prn+vars"> 
<pattern>
 <pattern-item n="prn1"/>
  <pattern-item n="cop"/>
<pattern-item n="v_vars"/>
</pattern>
  <action>
 <out>
       <chunk name="prn+vars222" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags> 
      <lu>
  <clip pos="3" side="tl" part="whole"/>
 </lu>
          <b/>
        <lu>
      <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
        <b/>
  <lu>
  <clip pos="1" side="tl" part="lem"/>
  <lit-tag v="prn.pos"/>
  <lit-tag v="m"/>
  <lit-tag v="an"/>
  <lit-tag v="sg"/>
  <clip pos="1" side="tl" part="a_case"/>
 </lu> 
 </chunk>
  </out>
 </action>
 </rule> 


  <rule comment="RULE:prn+vars"> 
<pattern>
 <pattern-item n="prn1"/>
  <pattern-item n="cop"/>
<pattern-item n="v_vars"/>
</pattern>
  <action>
 <out>
       <chunk name="prn+vars22" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags> 
      <lu>
  <clip pos="3" side="tl" part="whole"/>
 </lu>
          <b/>
        <lu>
      <lit v="у"/>
  <lit-tag v="pr"/>
 </lu>
        <b/>
  <lu>
  <clip pos="1" side="tl" part="lem"/>
  <clip pos="1" side="tl" part="a_nom"/>
  <lit-tag v="mf"/>
  <lit-tag v="sg"/>
  <clip pos="1" side="tl" part="a_case"/>

 </lu> 
 </chunk>
  </out>
 </action>
 </rule> 

<rule comment="RULE:prn+postvars"> <!--  өздері:өз<prn><ref><px3pl><nom>+ғана<postadv>
 -->
<pattern>
 <pattern-item n="prn"/>
<pattern-item n="v_vars"/>
</pattern>
  <action>
 <out>
       <chunk name="prn+prn_vars_1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu><!-- 
  det><ref><mfn><an><pl><nom -->
  <clip pos="1" side="tl" part="lem"/><!-- 
  <clip pos="1" side="tl" part="a_nom"/> -->
  <lit-tag v="det.pos"/>
 <!--  <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
      <clip pos="1" side="tl" part="a_nbr"/> 
        <clip pos="1" side="tl" part="a_case"/> 

^я<prn><pers><p1><mf><sg><dat>

      -->
        <lit-tag v="mfn"/>
        <lit-tag v="an"/>
        <lit-tag v="pl"/>
 <lit-tag v="ins"/>
 </lu>
 <b/>
 <lu>
  <clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule>





<rule comment="RULE:prn+postvars"> <!--  өздері:өз<prn><ref><px3pl><nom>+ғана<postadv>
 -->
<pattern>
 <pattern-item n="prn"/>
<pattern-item n="v_vars"/>
</pattern>
  <action>
 <out>
       <chunk name="prn+prn_vars_1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu><!-- 
  det><ref><mfn><an><pl><nom -->
  <clip pos="1" side="tl" part="lem"/><!-- 
  <clip pos="1" side="tl" part="a_nom"/> -->
  <lit-tag v="det.pos"/>
 <!--  <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
      <clip pos="1" side="tl" part="a_nbr"/> 
        <clip pos="1" side="tl" part="a_case"/> 

^я<prn><pers><p1><mf><sg><dat>

      -->
        <lit-tag v="mfn"/>
        <lit-tag v="an"/>
        <lit-tag v="pl"/>
 <lit-tag v="ins"/>
 </lu>
 <b/>
 <lu>
  <clip pos="2" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule>
 
<rule comment="RULE:prn+postadv"> <!--  өздері мекен:өз<prn><ref><px3pl><nom>+ғана<postadv>
 -->
<pattern>
 <pattern-item n="prn"/>
 <pattern-item n="cop"/>
<pattern-item n="v_vars"/>
</pattern>
  <action>
 <out>
       <chunk name="prn+prn_vars1" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  <lu><!-- 
  det><ref><mfn><an><pl><nom -->
  <clip pos="1" side="tl" part="lem"/><!-- 
  <clip pos="1" side="tl" part="a_nom"/> -->
  <lit-tag v="det.pos"/>
 <!--  <clip pos="1" side="tl" part="a_gender"/>
    <clip pos="1" side="tl" part="a_anim"/>
      <clip pos="1" side="tl" part="a_nbr"/> 
        <clip pos="1" side="tl" part="a_case"/> -->
        <lit-tag v="mfn"/>
        <lit-tag v="an"/>
        <lit-tag v="pl"/>
 <lit-tag v="nom"/>
 </lu>
 <b/>
 <lu>
  <clip pos="3" side="tl" part="whole"/>
 </lu>
 </chunk>
  </out>
 </action>
 </rule>

    <rule comment="REGLA: PRN"> <!--Bota -->
      <pattern>
     <pattern-item n="prn"/>
     <pattern-item n="cop"/>
      </pattern>
      <action>
<call-macro n="choose_case_and_postposition1">
 <with-param pos="1"/>
            </call-macro>               

      <choose>
       <when>
       <test> <or>  
             <equal><clip pos="1" side="tl" part="a_poss"/><lit-tag v="px3pl"/></equal>
              <equal><clip pos="1" side="tl" part="a_poss"/><lit-tag v="px1pl"/></equal>
              <equal><clip pos="1" side="tl" part="a_poss"/><lit-tag v="px2pl"/></equal>
            </or></test>
	   
        <out>
              <chunk name="prn1">  <!--өздері-->
                <tags>
                  <tag><lit-tag v="PRN"/></tag>
                </tags>
             <lu>
<var n="postposition_lu"/>
</lu>
<b/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="det.pos"/>
                  <lit-tag v="mfn"/>
                  <lit-tag v="an"/>
                  <lit-tag v="pl"/>
                  <var n="case"/>
                </lu>
              </chunk>
            </out>
      </when>
        <when>

            <test>   
<and>
             <equal><clip pos="1" side="sl" part="a_syntag"/><lit-tag v="subst"/></equal>
             <equal><clip pos="1" side="sl" part="lem"/><lit v="мен"/></equal>
<not>        <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></not>
</and>
            </test>
 <out>
       <chunk name="prn+ozi-men" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  
   <lu>
<var n="postposition_lu"/>
</lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
  <lit-tag v="prn.pos"/>
  <lit-tag v="m"/>
  <lit-tag v="an"/>
  <lit-tag v="sg"/>
<var n="case"/>

 </lu>

 </chunk>
  </out>
</when>
 <when>

            <test>
             <equal><clip pos="1" side="sl" part="a_nom"/><lit-tag v="prn.dem"/></equal>
        
            </test>
 <out>
       <chunk name="prn+ol" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  
   <lu>
<var n="postposition_lu"/>
</lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
 <clip pos="1" side="tl" part="a_nom"/>             
  <lit-tag v="m"/>
  <lit-tag v="sg"/>
<var n="case"/>

 </lu>

 </chunk>
  </out>
</when>

<when>

            <test>
             <equal><clip pos="1" side="sl" part="a_kaz_perspron"/><lit-tag v="prn.ind"/></equal>
        
            </test>
 <out>
       <chunk name="prn+aa" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  
   <lu>
<var n="postposition_lu"/>
</lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <lit-tag v="m"/>
                  <lit-tag v="aa"/>
                  <lit-tag v="sg"/>
                  <var n="case"/>
 </lu>

 </chunk>
  </out>
</when>

<otherwise>
 <out>
              <chunk name="prn-ozi">  <!--өзі  -->
                <tags>
                  <tag><lit-tag v="PRN"/></tag>
                </tags>
         <lu>
<var n="postposition_lu"/>
</lu>
<b/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <lit-tag v="m"/>
                  <lit-tag v="an"/>
                  <lit-tag v="sg"/>
                  <var n="case"/>
                </lu>
              </chunk>
            </out>
</otherwise>
 </choose>
            </action>
</rule>


 <rule comment="REGLA: PRN-REF"> <!--AS -->
      <pattern>
     <pattern-item n="prn-ref"/>
     <pattern-item n="cop"/>
      </pattern>
      <action>
        <call-macro n="choose_case_and_postposition1">
 <with-param pos="1"/>
            </call-macro>               

        <choose>
          <when>
            <test>   
             <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="loc"/></equal>
            </test>
            <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="prp"/></let>
          </when>
          <when>
            <test>   
             <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="abl"/></equal>
            </test>
            <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="gen"/></let>
          </when>
        </choose>
        <out>
              <chunk name="prn1-ref">  <!--өздері-->
                <tags>
                  <tag><lit-tag v="PRN"/></tag>
                </tags>
                <lu>
                   <var n="postposition_lu"/>
</lu>
<b/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="det.pos"/>
                  <lit-tag v="mfn"/>
                  <lit-tag v="an"/>
                  <lit-tag v="pl"/>
                  <clip pos="1" side="tl" part="a_case"/>
                </lu>
              </chunk>
            </out>
       
      </action>
</rule>


<rule comment="REGLA: PRNREF+COP"> <!--AS -->
      <pattern>
     <pattern-item n="prn-ref"/>
      </pattern>
      <action>
<call-macro n="choose_case_and_postposition1">
 <with-param pos="1"/>
            </call-macro>               

<choose>
          <when>
            <test>   
             <equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="sim"/></equal>
            </test>
	    <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="nom"/></let>
<out>
              <chunk name="prn1-ref1-sim">  <!--өздері-->
                <tags>
                  <tag><lit-tag v="PRN"/></tag>
                </tags>
<lu>
                  <lit v="как"/>
                  <lit-tag v="adv"/>
                </lu>
<b/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="det.pos"/>
                  <lit-tag v="mfn"/>
                  <lit-tag v="an"/>
                  <lit-tag v="pl"/>
                  <clip pos="1" side="tl" part="a_case"/>
                </lu>
              </chunk>
            </out>
	  </when>
<otherwise>
<out>
              <chunk name="prn1-ref1">  <!--өздері-->
                <tags>
                  <tag><lit-tag v="PRN"/></tag>
                </tags>
<lu>
                   <var n="postposition_lu"/>
</lu>
<b/>

                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="det.pos"/>
                  <lit-tag v="mfn"/>
                  <lit-tag v="an"/>
                  <lit-tag v="pl"/>
                   <var n="case"/>
                </lu>
              </chunk>
            </out>

</otherwise>
	</choose>

        
            </action>
</rule>



 <rule comment="REGLA: PRN"> <!--Bota -->
      <pattern>
     <pattern-item n="prn"/>
      </pattern>
      <action>
<call-macro n="choose_case_and_postposition1">
 <with-param pos="1"/>
            </call-macro>   
<choose>
   
<when>

            <test>
             <equal><clip pos="1" side="sl" part="a_kaz_perspron"/><lit-tag v="prn.ind"/></equal>
        
            </test>
 <out>
       <chunk name="prn+aa2" case="caseFirstWord"> 
      <tags><tag><lit-tag v="NP"/></tag>       </tags>   
  
   <lu>
<var n="postposition_lu"/>
</lu>
<b/>
<lu>
  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <lit-tag v="m"/>
                  <lit-tag v="aa"/>
                  <lit-tag v="sg"/>
                  <var n="case"/>
 </lu>

 </chunk>
  </out>
</when>
<otherwise>         
<out>
          <chunk name="prn-eto">
            <tags>
              <tag><lit-tag v="DET"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_gender"/> 
              <lit-tag v="pl"/>  
              <lit-tag v="nom"/> 
            </lu>
          </chunk>
        </out>
</otherwise>
</choose>


</action>
</rule>




   <rule comment="REGLA: NUM">
      <!--
        INPUT:  ^бір<num>/один<num><m><an><sg><nom>$
        OUTPUT: ^num<DET>{^один<num><m><an><sg><nom>$}$
      -->
      <pattern>

        <pattern-item n="num"/>
        <pattern-item n="cop"/>
      </pattern>
      <action>
<call-macro n="makeagree-num-noun">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>   
             <equal><clip pos="1" side="tl" part="a_num"/><lit-tag v="num"/></equal>
            </test>
	    <let><var n="case"/><lit-tag v="num"/></let>
	  </when>
	</choose>
<call-macro n="num-gender">
          <with-param pos="1"/>
        </call-macro>
<choose> 
<when>
          <test><equal><clip pos="1" side="sl" part="a_case"/><lit v=""/></equal></test>
    
          <let><var n="case"/><lit-tag v="nom"/></let>
        </when>

<when>
           <test><equal><clip pos="1" side="sl" part="a_nbr"/><lit v="pl"/></equal></test>
    
          <let><var n="gender"/><lit-tag v="mfn"/></let>
        </when>
</choose>
<choose>
<when>
<test>
<or>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="төрт"/></equal>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="үш"/></equal>
   </or>                   
                   </test>
                <out>
    <chunk name="num_lu3-4">
    <tags>
    <tag><lit-tag v="SN-NUM"/></tag>
    </tags>
    <lu>
<clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              
              <lit-tag v="mfn"/>
              <clip pos="1" side="tl" part="a_anim"/>
             <lit-tag v="pl"/>
             <lit-tag v="nom"/>
     </lu>
    </chunk>
    </out>
</when>
<when>
<test> <equal><clip pos="1" side="sl" part="a_ord"/><lit-tag v="ord"/></equal> </test>
          <out>
          <chunk name="num-ord">
            <tags>
              <tag><lit-tag v="DET"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
             <!-- <lit-tag v="det"/>
              <lit-tag v="ord"/>-->
              <clip pos="1" side="tl" part="a_num"/>
              <var n="gender"/>
              <clip pos="1" side="tl" part="a_anim"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>

            </when>
<when>
<test>
<or>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="бір"/></equal>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="екі"/></equal>
   </or>                   
                   </test>
          <out>
          <chunk name="num1-2-cop">
            <tags>
              <tag><lit-tag v="DET"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <var n="gender"/>
              <clip pos="1" side="tl" part="a_anim"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>

            </when>

<otherwise>
   <out>
    <chunk name="num_lu">
    <tags>
    <tag><lit-tag v="SN-NUM"/></tag>
    </tags>
    <lu>
<clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              
              <lit-tag v="mfn"/>

             <lit-tag v="pl"/>
             <lit-tag v="nom"/>
     </lu>
    </chunk>
    </out>
</otherwise>
</choose>
</action>
</rule>


 <rule comment="REGLA: NUM">
      <!--
        INPUT:  ^бір<num>/один<num><m><an><sg><nom>$
        OUTPUT: ^num<DET>{^один<num><m><an><sg><nom>$}$
      -->
      <pattern>

        <pattern-item n="num"/>

      </pattern>
      <action>

        <choose>
          <when>
            <test>   
             <equal><clip pos="1" side="tl" part="a_num"/><lit-tag v="num"/></equal>
            </test>
	    <let><var n="case"/><lit-tag v="num"/></let>
	  </when>
	</choose>
<call-macro n="num-gender">
          <with-param pos="1"/>
        </call-macro>
<choose> 
<when>
          <test><equal><clip pos="1" side="sl" part="a_case"/><lit v=""/></equal></test>
    
          <let><var n="case"/><lit-tag v="nom"/></let>
        </when>

<when>
           <test><equal><clip pos="1" side="sl" part="a_nbr"/><lit v="pl"/></equal></test>
    
          <let><var n="gender"/><lit-tag v="mfn"/></let>
        </when>
</choose>
<choose>
<when>
<test>
<or>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="төрт"/></equal>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="үш"/></equal>
   </or>                   
                   </test>
                <out>
    <chunk name="num_lu3-4">
    <tags>
    <tag><lit-tag v="SN-NUM"/></tag>
    </tags>
    <lu>
<clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              
              <lit-tag v="mfn"/>
              <clip pos="1" side="tl" part="a_anim"/>
             <lit-tag v="pl"/>
             <lit-tag v="nom"/>
     </lu>
    </chunk>
    </out>
</when>
<when>
<test>
<or>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="2"/></equal>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="3"/></equal>
   </or>                   
                   </test>
                <out>
    <chunk name="num_lu2-3">
    <tags>
    <tag><lit-tag v="SN-NUM"/></tag>
    </tags>
    <lu>
<clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
             </lu>
    </chunk>
    </out>
</when>

<when>
<test>
<or>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="бір"/></equal>
                       <equal><clip pos="1" side="sl" part="lem"/><lit v="екі"/></equal>
   </or>                   
                   </test>
          <out>
          <chunk name="num1-2">
            <tags>
              <tag><lit-tag v="DET"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <var n="gender"/>
              <clip pos="1" side="tl" part="a_anim"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <lit-tag v="nom"/>
            </lu>
          </chunk>
        </out>

            </when>

<otherwise>
   <out>
    <chunk name="num_lu1">
    <tags>
    <tag><lit-tag v="SN-NUM"/></tag>
    </tags>
    <lu>
<clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              
              <lit-tag v="mfn"/>

             <lit-tag v="pl"/>
             <lit-tag v="nom"/>
     </lu>
    </chunk>
    </out>
</otherwise>
</choose>
</action>
</rule>


 <rule comment="REGLA: NUM"> 
      <pattern>
      <pattern-item n="num1"/>
      </pattern>
      <action>
        <out>
          <chunk name="num2-3">
            <tags>
              <tag><lit-tag v="DET"/></tag>
            </tags>
            <lu>
              
              <clip pos="1" side="tl" part="whole"/>

            </lu>
          </chunk>
        </out>

</action>
</rule>
  

    <rule comment="REGLA: POST">
      <!--
        INPUT:  ^бірге<post>/с<pr><ins>$
        OUTPUT: ^pr<PREP>{^с<pr>$}$
        INPUT:  ^бірге<post>/вместе<adv>$
        OUTPUT: ^pr<PREP>{^вместе<adv>$}$
      -->
      <pattern>
        <pattern-item n="post"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test><equal><clip pos="1" side="tl" part="a_n_poss"/><lit-tag v="pr"/></equal></test>
            <out>
              <chunk name="pr">
                <tags>
                  <tag><lit-tag v="PREP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_pr"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pr">
                <tags>
                  <tag><lit-tag v="PREP"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="REGLA: ADV">
      <!--
        INPUT:  ^қайда<adv><itg>/где<adv><itg>$
        OUTPUT: ^adv<AdvP>{^где<adv><itg>$}$
      -->
      <pattern>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <out>
          <chunk name="adv">
            <tags>
              <tag><lit-tag v="AdvP"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<!-- SECTION: Punctuation -->

   <rule comment="REGLA: SENT">
      <!--
        INPUT:  ^.<sent>/.<sent>$
        OUTPUT: ^dot<SENT>{^.<sent>$}$
      -->
     <pattern>
        <pattern-item n="sent"/>
      </pattern>
      <action>
        <out>
          <chunk name="dot">
            <tags>
              <tag><lit-tag v="SENT"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

<!-- TODO: Consider handling issues below in the following transfer modules -->

<!--
        (^біл<v><tv><pres><p2><pl>/знать<vblex><impf><tv><pres><p2><pl>$)
INPUT:  ^мы<qst>/@мы<qst>$^?<sent>/?<sent>$
OUTPUT: ^qst<SENT>{^?<sent>$}$
-->
    <rule comment="">
      <pattern>
        <pattern-item n="qst"/>
        <pattern-item n="sent"/>
      </pattern>
      <action>
        <out>
          <chunk name="qst">
            <tags>
              <tag><lit-tag v="SENT"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

  </section-rules>

</transfer>
