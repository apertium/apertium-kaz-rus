<?xml version="1.0" encoding="UTF-8"?>

<!-- -*- nxml -*- -->

<transfer default="chunk">

  <section-def-cats>

    <def-cat n="abbr">
      <cat-item tags="abbr"/>
      <cat-item tags="abbr.*"/>
    </def-cat>

    <def-cat n="rim-num">
      <cat-item tags="num.roman"/>
      <cat-item tags="num.roman.*"/>
    </def-cat>

    <def-cat n="np-ant">
      <cat-item tags="np.ant"/>
      <cat-item tags="np.ant.*"/>
    </def-cat>
    <def-cat n="np-cog">
      <cat-item tags="np.cog"/>
      <cat-item tags="np.cog.*"/>
    </def-cat>
    <def-cat n="np-ant-gen">
      <cat-item tags="np.ant.*.gen"/>
    </def-cat>
    <def-cat n="np-cog-gen">
      <cat-item tags="np.cog.*.gen"/>
    </def-cat>
    <def-cat n="np-org">
      <cat-item tags="np.org"/>
      <cat-item tags="np.org.*"/>
    </def-cat>
    <def-cat n="n">
      <cat-item tags="n"/>
      <cat-item tags="n.*"/>
      <cat-item tags="np.*"/>
      <cat-item tags="n.*.*.*"/>

      <cat-item tags="prn.obj.*"/>
      <cat-item tags="adj.subst"/>
      <cat-item tags="adj.subst.*"/>
      <cat-item tags="adj.comp.subst"/>
      <cat-item tags="adj.comp.subst.*"/>
      <cat-item tags="adv.subst"/>
      <cat-item tags="adv.subst.*"/>
    </def-cat>
    <def-cat n="n-gen">
      <cat-item tags="n.*.gen"/>
      <cat-item tags="np.*.gen"/>
    </def-cat>
    <def-cat n="n-prp">
      <cat-item tags="n.*.prp"/>
      <cat-item tags="np.*.prp"/>
    </def-cat>
    <def-cat n="nom">
       <cat-item tags="n.*"/>
      <cat-item tags="np.top"/>
      <cat-item tags="np.al"/>
      <cat-item tags="np.al.*"/>
      <cat-item tags="np.cog"/>
      <cat-item tags="np.cog.*"/>
      <cat-item tags="np.*"/>
      <cat-item tags="np.ant.*"/>
      <cat-item tags="np.top.*"/>
    </def-cat>
    <def-cat n="np-anttopcog">
      <cat-item tags="np.ant"/>
      <cat-item tags="np.ant.*"/>
      <cat-item tags="np.top"/>
      <cat-item tags="np.top.*"/>
      <cat-item tags="np.cog"/>
      <cat-item tags="np.cog.*"/>
    </def-cat>
    <def-cat n="np-top">
      <cat-item tags="np.top"/>
      <cat-item tags="np.top.*"/>
    </def-cat>
    <def-cat n="NP">
      <cat-item tags="np.ant.*"/>
    </def-cat>
    <def-cat n="cnjsub">
      <cat-item tags="cnjsub"/>
    </def-cat>
    <def-cat n="nom-gen">
      <cat-item tags="n.gen"/>
      <cat-item tags="n.*.*.*.gen"/>
    </def-cat>
    <def-cat n="nee-nego">
      <cat-item lemma="она" tags="prn.pers.p3.f.sg.prp"/>
      <cat-item lemma="он" tags="prn.pers.p3.m.sg.prp"/>
    </def-cat>
    <def-cat n="kajdyi">
      <cat-item lemma="каждый" tags="det.def"/>
      <cat-item lemma="каждый" tags="det.def.*"/>
    </def-cat>
    <def-cat n="techenie">
      <cat-item lemma="в течение" tags="adv"/>
    </def-cat>
    <def-cat n="bolee">
      <cat-item lemma="более" tags="adv"/>
    </def-cat>
    <def-cat n="ne-negative">
      <cat-item lemma="не" tags="adv"/>
    </def-cat>
    <def-cat n="guio">
      <cat-item tags="guio"/>
    </def-cat>
    <def-cat n="prep">
      <cat-item tags="pr"/>
    </def-cat>
    <def-cat n="prep-c">
      <cat-item lemma="с" tags="pr"/>
    </def-cat>
    <def-cat n="prep-v">
      <cat-item lemma="в" tags="pr"/>
    </def-cat>
    <def-cat n="prep-k">
      <cat-item lemma="к" tags="pr"/>
    </def-cat>
    <def-cat n="num-time">
      <cat-item lemma="середина" tags="n.*.dat"/>
      <cat-item lemma="начало" tags="n.*.dat"/>
      <cat-item lemma="конец" tags="n.*.dat"/>
    </def-cat>
    <def-cat n="defis">
      <cat-item lemma="-х" tags="n.*"/>
      <cat-item lemma="-ом" tags="n.*"/>
      <cat-item lemma="-ые" tags="n.*"/>
    </def-cat>
    <def-cat n="prep-do">
      <cat-item lemma="до" tags="pr"/>
    </def-cat>
    <def-cat n="prep-na">
      <cat-item lemma="на" tags="pr"/>
    </def-cat>
    <def-cat n="n-px">
      <cat-item tags="n.px1sg.*"/>
      <cat-item tags="n.*.px1sg.*"/>
      <cat-item tags="n.px2sg.*"/>
      <cat-item tags="n.*.px2sg.*"/>
      <cat-item tags="n.px3sp.*"/>
      <cat-item tags="n.*.px3sp.*"/>
      <cat-item tags="n.px1pl.*"/>
      <cat-item tags="n.*.px1pl.*"/>
      <cat-item tags="n.px2pl.*"/>
      <cat-item tags="n.*.px2pl.*"/>
    </def-cat>
    <def-cat n="adj">
      <cat-item tags="adj"/>
      <cat-item tags="adj.*"/>
      <cat-item tags="adj.comp"/>
      <cat-item tags="adj.advl"/>
      <cat-item tags="adj.comp.advl"/>
      <cat-item tags="adv.attr"/>
    </def-cat>
    <def-cat n="adjec">
      <cat-item tags="adj"/>
      <cat-item tags="adj.sint"/>
    </def-cat>
    <def-cat n="det">
      <cat-item tags="det.*"/>
      <cat-item tags="det.def.*"/>
      <cat-item tags="det.ind.*"/>
      <cat-item tags="det.pos.*"/>
      <cat-item tags="det.dem.*"/>
      <cat-item tags="det.qnt.*"/>
    </def-cat>
    <def-cat n="num">
      <cat-item tags="num"/>
      <cat-item tags="num.*"/>
      <cat-item tags="num.ord"/>
      <cat-item tags="det.ord"/>
      <cat-item tags="det.ord.*"/>
      <cat-item tags="num.itg"/>
    </def-cat>
<def-cat n="vbmod-want-to"> <!-- want -->
      <cat-item lemma="хотеть" tags="vbmod.*"/>
    </def-cat>
    <def-cat n="subj-pron">
      <cat-item tags="prn.subj.*"/>
      <cat-item tags="prn.pers.*"/>
    </def-cat>
    <def-cat n="subj-pron-pos">
      <cat-item tags="prn.pos.*"/>
    </def-cat>
    <def-cat n="post">
      <cat-item tags="post"/>
    </def-cat>
    <def-cat n="post-or-npost">
      <cat-item tags="post"/>
      <cat-item tags="n.px3sp.*"/>
    </def-cat>
    <def-cat n="adv">
      <cat-item tags="adv"/>
      <cat-item tags="adv.itg"/>
    </def-cat>
    <def-cat n="sent">
      <cat-item tags="sent"/>
    </def-cat>
    <def-cat n="cm">
      <cat-item tags="cm"/>
    </def-cat>
<def-cat n="pers-verb"> <!-- past and present tense -->
      <cat-item tags="vblex.impf.pres.*"/>
      <cat-item tags="vblex.impf.pres"/>
      <cat-item tags="vblex.impf.past"/>
      <cat-item tags="vblex.impf.past.*"/>
      <cat-item tags="vblex.perf.pres.*"/>
      <cat-item tags="vblex.perf.pres"/>
      <cat-item tags="vblex.perf.past"/>
      <cat-item tags="vblex.perf.past.*"/>
      <cat-item tags="vbhaver.impf.past.*"/>
     <cat-item tags="vbhaver.impf.pres.*"/>
    </def-cat>  
<def-cat n="zovut_pers-verb"> <!-- past and present tense -->
      <cat-item lemma="звать" tags="vblex.impf.pres.*"/>
      <cat-item lemma="звать" tags="vblex.impf.pres"/>
      <cat-item lemma="звать" tags="vblex.impf.past"/>
      <cat-item lemma="звать" tags="vblex.impf.past.*"/>

    </def-cat>  
   <def-cat n="sam-sg">
      <cat-item lemma="сам" tags="det.*.sg.*"/>
    </def-cat>
    <def-cat n="sam-pl">
      <cat-item lemma="сам" tags="det.*.pl.*"/>
    </def-cat>
  <def-cat n="p123sp">   
      <cat-item lemma="мой" tags="prn.*"/>
      <cat-item lemma="мой" tags="det.*"/>
      <cat-item lemma="твой" tags="prn.*"/>
      <cat-item lemma="твой" tags="det.*"/>
      <cat-item lemma="его" tags="prn.*"/>
      <cat-item lemma="его" tags="det.*"/>
      <cat-item lemma="наш" tags="prn.*"/>
      <cat-item lemma="наш" tags="det.*"/>
      <cat-item lemma="ваш" tags="prn.*"/>
      <cat-item lemma="ваш" tags="det.*"/>
      <cat-item lemma="их" tags="prn.*"/>
      <cat-item lemma="их" tags="det.*"/>
    </def-cat>
  <def-cat n="ego-detpos">   
      <cat-item lemma="его" tags="det.pos"/>
      <cat-item lemma="его" tags="det.pos.*"/>
      <cat-item lemma="её" tags="det.pos"/>
      <cat-item lemma="её" tags="det.pos.*"/>
    </def-cat>
  <def-cat n="svoi-noun">   
      <cat-item lemma="свой" tags="n.*"/>
      <cat-item lemma="свой" tags="n.*.*"/>
      <cat-item lemma="свой" tags="prn.pos.*"/>
      <cat-item lemma="свой" tags="det.pos"/>
      <cat-item lemma="свой" tags="det.pos.*"/>
    </def-cat>
  <def-cat n="vseh">
      <cat-item lemma="весь" tags="det.ind.*"/>
      <cat-item lemma="весь" tags="prn.def.*"/>
      <cat-item lemma="весь" tags="prn.def.nt.an.sg.nom"/>
      <cat-item lemma="весь" tags="det.ind.mfn.an.pl.gen"/>
    </def-cat>
  <def-cat n="ih-detpos">   
      <cat-item lemma="их" tags="det.pos"/>
      <cat-item lemma="их" tags="det.pos.*"/>
    </def-cat>
    <def-cat n="budu-vbser"> <!-- past and present tense -->
      <cat-item tags="vbser.fut.*"/>
      <cat-item tags="vbser.fut"/>      
    </def-cat> 
    <def-cat n="approx-inf-verb"> <!-- infinitive and present where infinitive should have been found (tagger error) -->
      <cat-item tags="vblex.impf.inf"/> <!-- This may be dangerous and should be treated at tagger level -->   
      <cat-item tags="vblex.perf.inf"/> 
    </def-cat>

<def-cat n="vbhaver-inf-verb"> <!-- infinitive and present where infinitive should have been found (tagger error) --> 
      <cat-item tags="vbhaver.impf.inf"/>   
    </def-cat>

    <def-cat n="vbmod"> <!-- Буду --> 
      <cat-item lemma="быть" tags="vblex.impf.fut.*"/>
      <cat-item lemma="быть" tags="vblex.impf.fut"/>
    </def-cat>

<def-cat n="CAT__adj_">
    <cat-item tags="adj.*"/>
    <cat-item tags="adj"/>
  </def-cat>
 <def-cat n="CAT__n_">
    <cat-item tags="n.*"/>
    <cat-item tags="n"/>
  </def-cat>
<def-cat n="CAT__HASGENDER_NUMBER"><cat-item tags="*.m.*"/><cat-item tags="*.f.*"/><cat-item tags="*.sg.*"/><cat-item tags="*.pl.*"/></def-cat>  <def-cat n="CAT__ND_GD">
    <cat-item tags="*.mf.*"/>
    <cat-item tags="*.sp.*"/>
    <cat-item tags="*.mf.sp.*"/>
    <cat-item tags="*.sp.mf.*"/>
    <cat-item tags="*.mf.*.sp.*"/>
    <cat-item tags="*.sp.*.mf.*"/>
  </def-cat>
 <def-cat n="CAT__pr_">
    <cat-item tags="pr.*"/>
    <cat-item tags="pr"/>
  </def-cat>
  <def-cat n="CAT__prn_">
    <cat-item tags="prn.*"/>
    <cat-item tags="prn"/>
  </def-cat>
  <def-cat n="any">
    <cat-item tags="*"/>
  </def-cat>
  <def-cat n="CAT__adv_">
    <cat-item tags="adv.*"/>
    <cat-item tags="adv"/>
  </def-cat>
  <def-cat n="CAT__det_">
    <cat-item tags="det.*"/>
    <cat-item tags="det"/>
  </def-cat>
  <def-cat n="CAT__cnjcoo_">
    <cat-item tags="cnjcoo.*"/>
    <cat-item tags="cnjcoo"/>
  </def-cat>
  <def-cat n="CAT__cnjadv_">
    <cat-item tags="cnjadv.*"/>
    <cat-item tags="cnjadv"/>
  </def-cat>
  <def-cat n="CAT__vblex_">
    <cat-item tags="vblex.*"/>
    <cat-item tags="vblex"/>
  </def-cat>

    <def-cat n="verb"> <!-- for verbs -->
      <cat-item tags="vblex.impf.*.*"/>
      <cat-item tags="vblex.impf.*.*.*"/>
      <cat-item tags="vblex.perf.*.*"/>
      <cat-item tags="vblex.perf.*.*.*"/>
    </def-cat> 

    <def-cat n="verb-adv"> <!-- for verbs -->
      <cat-item tags="vblex.impf.*.pprs.adv"/>
      <cat-item tags="vblex.impf.*.pp.adv"/>
      <cat-item tags="vblex.perf.*.pprs.adv"/>
      <cat-item tags="vblex.perf.*.pp.adv"/>
    </def-cat> 

    <def-cat n="verb-pprs"> <!-- for verbs -->
      <cat-item tags="vblex.impf.*.pprs.*"/>
      <cat-item tags="vblex.perf.*.pprs.*"/>
    </def-cat> 
    <def-cat n="verb-past"> <!-- for verbs -->
      <cat-item tags="vblex.impf.*.past.*"/>
      <cat-item tags="vblex.perf.*.past.*"/>
    </def-cat> 
   <def-cat n="v-pp_pprs"> <!-- for verbs -->
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.pp.*.*"/>
      <cat-item tags="vblex.pp.*.*.*"/>
      <cat-item tags="vblex.pprs.*"/>
      <cat-item tags="vblex.pprs.*.*"/>
      <cat-item tags="vblex.pprs.*.*.*"/>
    </def-cat>
   <def-cat n="v-fac">
      <cat-item tags="vblex.impf.*.*.*.fac"/>
      <cat-item tags="vblex.perf.*.*.*.fac"/>
    </def-cat>

<def-cat n="vbhaver">
      <cat-item tags="vbhaver"/>  
      <cat-item tags="vbhaver.*"/>  
      <cat-item tags="vbhaver.*.*"/>  
    </def-cat>
    <def-cat n="vbser">
      <cat-item tags="vbser"/>  
      <cat-item tags="vbser.*"/>  
      <cat-item tags="vbser.*.*"/>  
    </def-cat>
    <def-cat n="cnjcoo">
      <cat-item tags="cnjcoo"/>
      <cat-item tags="cnjcoo.*"/>
    </def-cat>
    <def-cat n="toje">
      <cat-item lemma="тоже" tags="adv"/>
    </def-cat>

<def-cat n="ves">
      <cat-item lemma="весь" tags="prn.def.*"/>
    </def-cat>

    <def-cat n="prn_itg-neg">
      <cat-item tags="prn.itg.*"/>
      <cat-item tags="prn.neg.*"/>
    </def-cat>

    <def-cat n="samyi">
      <cat-item lemma="самый" tags="det.def.*"/>
    </def-cat>

    <def-cat n="prn_ind-dem">
      <cat-item tags="prn.ind.*"/>
      <cat-item tags="prn.dem.*"/>
    </def-cat>

    <def-cat n="det-def">
      <cat-item tags="det.def.*"/>
    </def-cat>
 <def-cat n="num-coll">
      <cat-item tags="num.coll.*"/>
    </def-cat>

    <def-cat n="vy">
      <cat-item lemma="вы" tags="prn.pers.*"/>
    </def-cat>

 <def-cat n="byt-fut">
      <cat-item lemma="быть" tags="vbser.fut.*"/>
    </def-cat>
 <def-cat n="byt-past">
      <cat-item lemma="быть" tags="vbser.past.*"/>
    </def-cat>
 <def-cat n="want-rus">
      <cat-item lemma="должен" tags="pred.*"/>
      <cat-item lemma="нужно" tags="pred.*"/>
      <cat-item lemma="надо" tags="pred.*"/>
    </def-cat>

    <def-cat n="mojno">
      <cat-item lemma="можно" tags="pred"/>
    </def-cat>
    <def-cat n="nujno">
      <cat-item lemma="нужно" tags="pred"/>
    </def-cat>
  </section-def-cats>


  <section-def-attrs>

    <def-attr n="a_adj">
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
    </def-attr>

    <def-attr n="a_cnjsub">
      <attr-item tags="cnjsub"/>
      <attr-item tags="post"/>
      <attr-item tags="adv"/>
    </def-attr>
    <def-attr n="a_cnjcoo">
      <attr-item tags="cnjcoo"/>
    </def-attr>

    <def-attr n="a_abbr">
      <attr-item tags="abbr"/>
    </def-attr>
    <def-attr n="a_adjec">
       <attr-item tags="adj"/>
    </def-attr>
<def-attr n="a_formality">
      <attr-item tags="frm"/>
    </def-attr>

    <def-attr n="a_adv">
      <attr-item tags="adv"/>
      <attr-item tags="cnjadv"/>
      <attr-item tags="adv.itg"/>
      <attr-item tags="post"/>
    </def-attr>

    <def-attr n="a_anim">
      <attr-item tags="aa"/>
      <attr-item tags="nn"/>
      <attr-item tags="an"/>
    </def-attr>

    <def-attr n="a_case">
      <attr-item tags="nom"/>
      <attr-item tags="gen"/>
      <attr-item tags="dat"/>
      <attr-item tags="acc"/>
      <attr-item tags="abl"/>
      <attr-item tags="loc"/>
      <attr-item tags="sim"/>
      <attr-item tags="ins"/>
      <attr-item tags="prp"/>
      <attr-item tags="CD"/>
    </def-attr>

    <def-attr n="a_dem"> 
      <attr-item tags="dem"/>
      <attr-item tags="qnt"/>
      <attr-item tags="ind"/>
    </def-attr>
<def-attr n="a_Rcas">
      <attr-item tags="Rnom"/>
      <attr-item tags="Racc"/>
      <attr-item tags="Rdat"/>
      <attr-item tags="Rgen"/>
      <attr-item tags="Rloc"/>
      <attr-item tags="Rins"/>
      <attr-item tags="Rabl"/>
    </def-attr>
<def-attr n="a_postposition"> <!-- Kazakh postposition indicators -->
      <attr-item tags="n"/> 
      <attr-item tags="post"/>
	 
    </def-attr>
<def-attr n="a_rel"> 
      <attr-item tags="rel"/>
	 
    </def-attr>

    <def-attr n="a_det">
      <attr-item tags="det.dem"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.itg"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="det.ref"/>
      <attr-item tags="prn.ref"/>
      <attr-item tags="prn.qnt"/>
      <attr-item tags="num"/>
      <attr-item tags="prn"/>
      <attr-item tags="adv"/>
    </def-attr>

    <def-attr n="a_gender">
      <attr-item tags="m"/>
      <attr-item tags="f"/>
      <attr-item tags="nt"/>
      <attr-item tags="mf"/>
      <attr-item tags="mfn"/>
      <attr-item tags="GN"/>
    </def-attr>

    <def-attr n="a_nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="np.ant"/>
      <attr-item tags="np.top"/>
      <attr-item tags="np.cog"/>
      <attr-item tags="np.org"/>
      <attr-item tags="prn.pers.p1"/>
      <attr-item tags="prn.pers.p2"/>
      <attr-item tags="prn.pers.p3"/>
      <attr-item tags="prn.dem"/>
      <attr-item tags="prn.def"/>
      <attr-item tags="prn.itg"/>
      <attr-item tags="prn.neg"/>
      <attr-item tags="prn.ind"/>
      <attr-item tags="prn.ref"/>
      <attr-item tags="prn.qnt"/>
      <attr-item tags="adj"/>
      <attr-item tags="adj.sint"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="det.def"/>
      <attr-item tags="det.ref"/>
      <attr-item tags="det.qnt"/>
      <attr-item tags="num"/>
    </def-attr>

    <def-attr n="a_num">
      <attr-item tags="num"/>
      <attr-item tags="num.ord"/>
      <attr-item tags="num.ord.nom"/>
      <attr-item tags="num.ord.subst"/>
      <attr-item tags="num.ord.subst.nom"/>
      <attr-item tags="num.coll"/>
    </def-attr>

    <def-attr n="a_pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>

    <def-attr n="a_pron">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>
<def-attr n="a_poss">
     <attr-item tags="pos"/>
    </def-attr>
    <def-attr n="a_pos">
      <attr-item tags="n"/>
      <attr-item tags="np"/>
      <attr-item tags="np.cog"/>
      <attr-item tags="adj"/>
      <attr-item tags="adv"/>
      <attr-item tags="pred"/>
      <attr-item tags="pr"/>
      <attr-item tags="det"/>
      <attr-item tags="det.pos"/>
    </def-attr>

    <def-attr n="a_possessive"> 
      <attr-item tags="PXD"/>
      <attr-item tags="px1sg"/>
      <attr-item tags="px1pl"/>
      <attr-item tags="px2sg"/>
      <attr-item tags="px2pl"/>
      <attr-item tags="px3sp"/>
 <attr-item tags="px3pl"/>
    </def-attr>

    <def-attr n="a_pr">
      <attr-item tags="pr"/>
      <attr-item tags="adv.itg"/> <!-- for как -->
    </def-attr>

    <def-attr n="a_px">
      <attr-item tags="px"/>
    </def-attr>

    <def-attr n="a_syntag">
      <attr-item tags="advl"/>
      <attr-item tags="attr"/>
      <attr-item tags="subst"/>
    </def-attr>

    <def-attr n="a_subst">
       <attr-item tags="subst"/>
    </def-attr>

 <def-attr n="a_tense">
      <attr-item tags="pres"/>
      <attr-item tags="ifi"/>
      <attr-item tags="past"/>
      <attr-item tags="fut"/>
      <attr-item tags="fut2"/>
      <attr-item tags="imp"/>
      <attr-item tags="cont"/>
      <attr-item tags="aor"/>
      <attr-item tags="pprs"/>
      <attr-item tags="pp"/>
      <attr-item tags="inf"/>
      <attr-item tags="ifi_evid"/>
      <attr-item tags="fut_plan"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vbser"/>
      <attr-item tags="vblex.impf"/>
      <attr-item tags="vblex_perf"/>
      <attr-item tags="vblex_dual"/>
      <attr-item tags="vbmod.impf.tv"/> <!-- Modal verbs already receive transitivity tags in rus.dix-->
      <attr-item tags="vbmod.impf.iv"/>
      <attr-item tags="vbmod.perf.tv"/>
      <attr-item tags="vbmod.perf.iv"/>
    </def-attr>

    <def-attr n="a_kaz_perspron"> 
      <attr-item tags="prn.pers"/>
    </def-attr>

    <def-attr n="a_kaz_pospron"> 
      <attr-item tags="prn.pos"/>
<attr-item tags="prn.pers"/>
    </def-attr>

    <def-attr n="a_kaz_verb"> 
      <attr-item tags="v.tv"/>
      <attr-item tags="v.iv"/>
    </def-attr>
  <def-attr n="a_neg"> 
      <attr-item tags="neg"/>

    </def-attr>

 <def-attr n="a_tns-prc">
      <attr-item tags="pri"/>
       <attr-item tags="prc_pers"/>
      <attr-item tags="gna9"/>
      <attr-item tags="prc_impf"/>
      <attr-item tags="prc_perf"/>
      <attr-item tags="ger_past"/>
      <attr-item tags="gpr_pot"/>
    </def-attr>
  </section-def-attrs>


  <section-def-vars>
    <def-var n="adjec_lu"/>
    <def-var n="adjec_lu1"/>
    <def-var n="adjec_lu2"/>
    <def-var n="animacy"/>
    <def-var n="case"/>
    <def-var n="current_verb"/>
    <def-var n="formality"/>
    <def-var n="gender"/>
    <def-var n="genpp"/>
    <def-var n="negation"/>
    <def-var n="NEW-noun_lu"/>
    <def-var n="num_lu"/>
    <def-var n="num_lu1"/>
    <def-var n="number"/>
    <def-var n="person"/>
  <def-var n="genre"/>
    <def-var n="possessive"/>
    <def-var n="postposition_lu"/>
    <def-var n="pptag"/> 
    <def-var n="preposition"/>
    <def-var n="sntype"/>
    <def-var n="tense"/> 
    <def-var n="verb-nbr"/>     
    <def-var n="verb-pers"/>
   <def-var n="preblank-1"/>
  </section-def-vars>

  <section-def-macros>

<def-macro n="process-preblank-1" npar="2">
<!-- Sets preblank-1 to null if it is just a single blank;
     sets it to superblank 1 otherwise -->
      <choose>
        <when>
          <test>
              <equal>
                <b pos="1"/>
                <lit v=" "/>
              </equal>
          </test>
          <let>
            <var n="preblank-1"/><lit v=""/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="preblank-1"/><b pos="1"/>
          </let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="test" npar="1">
          <let>   <!-- number="" -->
            <var n="number"/>
            <lit v=""/>
          </let>
    </def-macro>

    <!-- macro stolen from apertium-eng-kaz -->

   <def-macro n="select-case" npar="1">
   <!-- ugly macro: can we use lists for tags? -->
      <choose>
         <when>
           <test>
             <equal>
                <clip side="sl" pos="1" part="a_case"/>
                <lit-tag v="nom"/>
             </equal>
            </test>
             <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test>
             <equal>
                <clip side="sl" pos="1" part="a_case"/>
                <lit-tag v="acc"/>
             </equal>
             </test>
            <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test>
             <equal>
                <clip side="sl" pos="1" part="a_case"/>
                <lit-tag v="dat"/>
             </equal>
            </test>
             <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test>
             <equal>
                <clip side="sl" pos="1" part="a_case"/>
                <lit-tag v="gen"/>
             </equal>
            </test>
             <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test>
             <equal>
                <clip side="sl" pos="1" part="a_case"/>
                <lit-tag v="prp"/>
             </equal>
             </test>
            <let><var n="case"/><lit-tag v="CD"/></let>
         </when>
         <when>
           <test>
             <equal>
                <clip side="sl" pos="1" part="a_case"/>
                <lit-tag v="ins"/>
             </equal>
            </test>
             <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise>
             <let><var n="case"/><lit-tag v="CD"/></let>
         </otherwise>
      </choose>
   </def-macro>

   <def-macro n="default-nbr-pers" npar="0">
    <choose>
     <when>
       <test>
         <equal><var n="verb-pers"/><lit v=""/></equal></test>
      <let>
          <var n="verb-pers"/><lit-tag v="p3"/>
      </let>
     </when>
    </choose>
    <choose>
     <when>
       <test>
         <equal><var n="verb-nbr"/><lit v=""/></equal></test>
      <let>
          <var n="verb-nbr"/><lit-tag v="sg"/>
      </let>
     </when>
    </choose>
   </def-macro>    

   <def-macro n="NEW-gen-simple-verb" npar="1">  
	<out>
      <chunk name="pers-verb">
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="6"/>
          <lit-tag v="4"/>
          <lit-tag v="5"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
          <lit-tag v="7"/>
        </lu>
      </chunk>
        </out>
   </def-macro>

   <!-- macro from eng-kaz to prepositions-->
   <!--Numerals def-macro-->

   <def-macro n="NEW-build-noun-lu-2-4-5-sg" npar="1">
 
     <let>
           <var n="NEW-noun_lu"/>
           <concat>
               <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_nom"/>
               <clip pos="1" side="tl" part="a_gender"/>
               <lit-tag v="sg"/> <!-- force singular number (used with numerals) -->
               <!-- no need to link person -->
               <lit-tag v="4"/> <!-- for possessive -->
               <lit-tag v="5"/> <!-- for case -->
           </concat>  
        </let>
   </def-macro>

   <def-macro n="NEW-build-noun-lu-2-4-5" npar="1"> 
     <let>
           <var n="NEW-noun_lu"/>
           <concat>
               <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_nom"/>
               <clip pos="1" side="tl" part="a_gender"/>
              

               <!-- no need to link person -->
 		<lit-tag v="4"/> <!-- for possessive -->
 <lit-tag v="2"/>
               <lit-tag v="5"/> <!-- for case -->
      <!-- for case -->
           </concat>  
        </let>
   </def-macro>

   <def-macro n="build-num-lu" npar="1"> 
     <let>
           <var n="num_lu"/>
           <concat>
             <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_num"/>
           </concat>  
        </let>
   </def-macro>

   <def-macro n="build-num-lu1" npar="1"> 
     <let>
           <var n="num_lu1"/>
           <concat>
             <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_num"/>
           </concat>  
        </let>
   </def-macro>

   <def-macro n="out-blank-if-not-single-space" npar="1">
      <!-- Outputs nothing if the blank is " " and the blank otherwise..-->
      <!-- Takes one position parameter -->
      <choose>
        <when>
          <test>
            <not>
              <equal>
                <b pos="1"/>
                <lit v=" "/>
              </equal>
            </not>
          </test>
          <out>
            <b pos="1"/>
          </out>
        </when>
      </choose>
   </def-macro>

   <def-macro n="build-possessive-from-possessive-determiner" npar="1">
	<choose> 
	<when>
         <test>
          <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit  v="мой"/></equal>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1sg"/></let>
	</when>
	<when>
         <test>
          <equal caseless="yes"><clip  pos="1" side="sl" part="lem"/><lit  v="наш"/></equal>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1pl"/></let>
	</when>
	<when>
         <test>
          <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit  v="твой"/></equal>
         </test>      
	<let><var  n="possessive"/><lit-tag v="px2sg"/></let>
	</when>
	<otherwise>
	<let><var n="possessive"/><lit-tag v="px3sp"/></let> <!-- default value -->
	</otherwise>
	</choose>
   </def-macro>

   <def-macro n="build-possessive-from-pron" npar="1">
	<choose> 
	<when>
         <test>
          <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit  v="я"/></equal>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1sg"/></let>
	</when>
	<when>
         <test>
          <equal caseless="yes"><clip  pos="1" side="sl" part="lem"/><lit  v="мы"/></equal>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1pl"/></let>
	</when>
	<when>
         <test>
          <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit  v="ты"/></equal>
         </test>      
	<let><var  n="possessive"/><lit-tag v="px2sg"/></let>
	</when>
<when>
         <test>
          <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit  v="вы"/></equal>
         </test>      
	<let><var  n="possessive"/><lit-tag v="px2sg"/></let>
	</when>
	<otherwise>
	<let><var n="possessive"/><lit-tag v="px3sp"/></let> <!-- default value -->
	</otherwise>
	</choose>
   </def-macro>




<!-- this macros from strutural rules -->

<def-macro n="f_set_genre_num" npar="1">
<!--To set the genre of those words with GD, and the number of those words with ND. -->
<!--This is only used in no alignment template at all is applied. -->
  <choose>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_gender"/>
          <lit-tag v="GD"/>
        </equal>
      </test>
      <choose>
        <when>
          <test>
            <equal>
              <var n="genre"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let><clip pos="1" side="tl" part="a_gender"/><lit-tag v="f"/></let>
        </when>
        <otherwise>
          <let><clip pos="1" side="tl" part="a_gender"/><lit-tag v="m"/></let>
        </otherwise>
      </choose>
    </when>
  </choose>
  <choose>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="ND"/>
        </equal>
      </test>
      <choose>
        <when>
          <test>
            <equal>
              <var n="number"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="pl"/></let>
        </when>
        <otherwise>
          <let><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></let>
        </otherwise>
      </choose>
    </when>
  </choose>
</def-macro>

<def-macro n="f_genre_num" npar="1">
<!--To set the global value storing the TL genre of the last seen word. -->
  <choose>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_gender"/>
          <lit-tag v="m"/>
        </equal>
      </test>
      <let><var n="genre"/><lit-tag v="m"/></let>
    </when>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_gender"/>
          <lit-tag v="f"/>
        </equal>
      </test>
      <let><var n="genre"/><lit-tag v="f"/></let>
    </when>
  </choose>
  <choose>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="sg"/>
        </equal>
      </test>
      <let><var n="number"/><lit-tag v="sg"/></let>
    </when>
    <when>
      <test>
        <equal>
          <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="pl"/>
        </equal>
      </test>
      <let><var n="number"/><lit-tag v="pl"/></let>
    </when>
  </choose>
</def-macro>

<def-macro n="f_bcond" npar="2">
<!--To test whether a blank contains format information.
If no format information is present it is removed. -->
  <choose>
    <when>
      <test>
        <not>
	 <equal>
	   <b pos="1"/>
	   <lit v=" "/>
	 </equal>
	 </not>
      </test>
      <out>
        <b pos="1"/>
      </out>
    </when>
  </choose>
</def-macro>

   <def-macro n="choose_case_and_postposition1" npar="1"> 
    <let><var n="pptag"/><lit-tag v="PP"/></let> <!-- for most of them -->
    <let><var n="genpp"/><lit v="no"/></let> <!-- for simple cases -->
  	<choose> 
	<when>
         <test>
         <and>
          <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
         </and>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1sg"/></let>
	</when>
	<when>
         <test>
         <and>
          <equal><clip  pos="1" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
         </and>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1pl"/></let>
	</when>
	<when><!--under you-->
         <test>
         <and>
          <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag  v="p2"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sp"/></equal>
	 </and>
         </test>      
	<let><var  n="formality"/><lit-tag v="frm"/></let>
	<let><var  n="possessive"/><lit-tag v="px2sg.frm"/></let>
	</when>
		<!-- ...etc remaining cases ... -->
	</choose>
         
             <choose>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rnom"/></equal></test>
                   <let><var n="case"/><lit-tag v="nom"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rdat"/></equal></test>
                   <let><var n="case"/><lit-tag v="dat"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rabl"/></equal></test>
                   <let><var n="case"/><lit-tag v="abl"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rloc"/></equal></test>
                   <let><var n="case"/><lit-tag v="loc"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rins"/></equal></test>
                   <let><var n="case"/><lit-tag v="ins"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Racc"/></equal></test>
                   <let><var n="case"/><lit-tag v="acc"/></let>
                </when>
                <when> <!-- This case is unlikely, but we'll leave it just in case -->
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rgen"/></equal></test>
                   <let><var n="case"/><lit-tag v="gen"/></let>
                </when>
             </choose>
           
   
   </def-macro>
<!-- form eng-kaz for prepositions rus-kaz -->

   <def-macro n="choose_case_and_postposition2" npar="2"> 
    <let><var n="pptag"/><lit-tag v="PP"/></let> <!-- for most of them -->
    <let><var n="genpp"/><lit v="no"/></let> <!-- for simple cases -->
    <choose>
      <when> <!-- make genpp="yes" when a postposition is detected -->
        <test>
          <or>
            <equal>
               <clip pos="1" side="tl" part="a_postposition"/>
               <lit-tag v="n"/>
            </equal>
            <equal>
               <clip pos="1" side="tl" part="a_postposition"/>
               <lit-tag v="post"/>
            </equal>
          </or>  
        </test>
        <let><var n="genpp"/><lit v="yes"/></let> <!-- for simple cases -->
      </when>
    </choose>
    <choose>
      <when>
        <test>
          <equal><var n="genpp"/><lit v="no"/></equal>
        </test>
        <choose> <!-- no postpositions -->
          <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="из"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="abl"/>
            </let>
          </when>
<when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="без"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="gen"/>
            </let>
          </when>
          <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="от"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="abl"/>
            </let>
          </when>
          <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="с"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="ins"/>
            </let>
          </when>
          <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="со"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="ins"/>
            </let>
          </when>
          <when> 

            <test> 
		<or> 
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="к"/>
              </equal>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="до"/>
              </equal>
	</or>
            </test>                        <let>
              <var n="case"/>
              <lit-tag v="dat"/>
            </let>
      </when> 
 <when> 
            <test> <and>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="в"/>
              </equal> 
 <equal caseless="yes">
                <clip pos="2" side="sl" part="a_case"/>
                <lit-tag v="acc"/>
              </equal> </and>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="dat"/>
            </let>
          </when>      
    <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="в"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="loc"/>
            </let>
          </when>
    <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="в"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="loc"/>
            </let>
          </when>
    <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="во"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="loc"/>
            </let>
          </when>

          <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="на"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="loc"/>
            </let>
          </when> 

          <when> 
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="для"/>
              </equal>
            </test>
            <let>
               <var n="case"/>
               <lit-tag v="dat"/>
            </let>
          </when> 


          <otherwise>
              <let>
                <var n="case"/>
                <lit-tag v="nom"/> <!-- Choice when we don't know the translation of the preposition, can be improved -->
              </let>
              <let>
                <var n="pptag"/>
                <lit-tag v="PP"/>  
              </let>
          </otherwise>
    </choose>
      </when> <!-- End of solutions without postpositions -->
      <when>  <!--- Now, with postpositions -->
        <test>
          <equal>
             <var n="genpp"/>
             <lit v="yes"/>
          </equal>
        </test>
        <choose> <!-- Generate postposition --> 
          <when> <!-- noun-based postpositions -->
             <test>
               <equal>
                 <clip side="tl" part="a_postposition" pos="1"/>
                 <lit-tag v="n"/>
           </equal>
             </test>
             <let><var n="case"/><lit-tag v="gen"/></let>
             <let><var n="pptag"/><lit-tag v="PP"/></let>
             <!-- we need to compute "possessive"  --> 
	<let><var n="possessive"/><lit-tag v="px3sp"/></let> <!-- default value -->
	<choose> 
	<when>
         <test>
         <and>
          <equal><clip pos="2" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
         </and>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1sg"/></let>
	</when>
	<when>
         <test>
         <and>
          <equal><clip  pos="2" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
         </and>
         </test>      
          <let><var  n="possessive"/><lit-tag v="px1pl"/></let>
	</when>
	<when><!--under you-->
         <test>
         <and>
          <equal><clip pos="2" side="sl" part="a_pers"/><lit-tag  v="p2"/></equal>
          <equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="sp"/></equal>
	 </and>
         </test>      
	<let><var  n="formality"/><lit-tag v="frm"/></let>
	<let><var  n="possessive"/><lit-tag v="px2sg.frm"/></let>
	</when>
		<!-- ...etc remaining cases ... -->
	</choose>
              <!-- end of computation of "possessive" -->
             <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit-tag v="n"/>
                        <!-- <lit-tag v="px3sp"/>  -->
                     <var n="possessive"/>
                <clip part="a_case" side="tl" pos="1"/> 
                      </concat>
             </let>
      </when>
          <when> <!-- non-noun-based postpositions -->
             <test>
               <equal>
                 <clip side="tl" part="a_postposition" pos="1"/>
                 <lit-tag v="post"/>
           </equal>
             </test>
             <choose>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rnom"/></equal></test>
                   <let><var n="case"/><lit-tag v="nom"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rdat"/></equal></test>
                   <let><var n="case"/><lit-tag v="dat"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rabl"/></equal></test>
                   <let><var n="case"/><lit-tag v="abl"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rloc"/></equal></test>
                   <let><var n="case"/><lit-tag v="loc"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rins"/></equal></test>
                   <let><var n="case"/><lit-tag v="ins"/></let>
                </when>
                <when>
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Racc"/></equal></test>
                   <let><var n="case"/><lit-tag v="acc"/></let>
                </when>
                <when> <!-- This case is unlikely, but we'll leave it just in case -->
                   <test><equal><clip part="a_Rcas" pos="1" side="tl"/><lit-tag v="Rgen"/></equal></test>
                   <let><var n="case"/><lit-tag v="gen"/></let>
                </when>
             </choose>
             <let><var n="pptag"/><lit-tag v="PP"/></let>
             <let><var n="postposition_lu"/> <!-- ready for lu -->
                      <concat>
                        <clip pos="1" side="tl" part="lem"/>
                        <lit-tag v="post"/>
                      </concat>
             </let>
      </when>
    </choose>
       </when>
     </choose>
   </def-macro>

   <def-macro n="build-adjec-lu" npar="1"> 
     <let>
           <var n="adjec_lu"/>
           <concat>
             <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_adjec"/>
           </concat>  
        </let>
   </def-macro>

   <def-macro n="build-adjec-lu1" npar="1"> 
     <let>
           <var n="adjec_lu1"/>
           <concat>
             <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_adjec"/>
           </concat>  
        </let>
   </def-macro>

   <def-macro n="build-adjec-lu2" npar="1"> 
     <let>
           <var n="adjec_lu2"/>
           <concat>
             <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_adjec"/>
           </concat>  
        </let>
   </def-macro>


  </section-def-macros>



  <section-rules>


    <rule comment="RULE: SENT">
      <pattern>
        <pattern-item n="sent"/>
      </pattern>
      <action>
<choose>
      <when>  
       <test><equal><clip pos="1" side="sl" part="lem"/><lit v=".."/></equal></test>
<let><clip pos="1" side="tl" part="lem"/><lit v="."/> </let>
<out>  
          <chunk name="sent" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SENT"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
           </when> 
</choose> 
        <out>  
          <chunk name="sent" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SENT"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


<rule comment="NEW RULE: prep rim-num noun">    <!-- Aliya 24.08.2017 -->  <!--В XX веке - XIV кезде -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="rim-num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 
      <choose>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="loc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>

     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-rimnum-n-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="num_lu"/> </lu> <b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <var n="case"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise>
        <out>
          <chunk name="prep-rimnum-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="4"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="num_lu"/> </lu> <b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <var n="case"/>
            </lu><b/>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>



    <rule comment="RULE: CNJSUB">    <!-- Aliya 19.06.17 -->
      <pattern>
        <pattern-item n="cnjsub"/>
      </pattern>
      <action>
        <out>
          <chunk name="cnjsub" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="CNJ"/></tag>
            </tags>
            <lu>
    		 <clip pos="1" side="tl" part="lem"/> 
    		 <clip pos="1" side="tl" part="a_cnjsub"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>



    <rule comment="RULE: CNJCOO">    <!-- Aliya 18.07.17 -->
      <pattern>
        <pattern-item n="cnjcoo"/>
      </pattern>
      <action>
        <out>
          <chunk name="cnjcoo" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="CNJ"/></tag>
            </tags>
            <lu>
    		 <clip pos="1" side="tl" part="lem"/> 
    		 <clip pos="1" side="tl" part="a_cnjcoo"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>





<rule comment="NEW RULE: adj noun noun-gen">    <!-- Aliya 21.06.17 -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="n-gen"/>
  </pattern>
  <action>
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro>
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="2"/></call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="3"/></call-macro> 
  <call-macro n="select-case"><with-param pos="2"/></call-macro>

      <choose>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="loc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>
      <choose>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_nbr"/><lit-tag v="pl"/></equal></test>
           <let><var n="number"/><lit-tag v="pl"/></let>
         </when>
         <otherwise><let><var n="number"/><lit v=""/></let></otherwise>
      </choose>

    <out>
    <chunk name="adj-noun-n_gen">         <!-- внешним границам стран - елдердің сыртқы шекарасына -->
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_nbr"/>
     <lit-tag v="gen"/>
    </lu><b pos="1"/>
    <lu><var n="adjec_lu"/></lu><b pos="2"/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
	  <var n="number"/>
     <lit-tag v="px3sp"/>
	  <var n="case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>



<rule comment="NEW RULE: np ant cog">    <!-- Aliya 21.06.17 -->
  <pattern>
    <pattern-item n="np-ant"/>
    <pattern-item n="np-cog"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro> 
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>

    <out>
    <chunk name="np_ant-np_cog">       <!-- Владимиру Святославичу - Владимир Святославичке -->
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> 
    <tag><lit-tag v="p3"/></tag> 
    <tag><lit-tag v="PXD"/></tag> 
    <tag><lit-tag v="CD"/></tag> 
    </tags>
    <lu>
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <clip pos="1" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_gender"/>
     <clip pos="1" side="sl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: prep np-ant np-cog">     <!-- Aliya 21.06.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="np-ant"/>
    <pattern-item n="np-cog"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro>
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-np_ant-np_cog-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_gender"/>
               <lit-tag v="nom"/>
            </lu><b pos="1"/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_gender"/>
               <lit-tag v="2"/>
               <lit-tag v="5"/>
            </lu><b pos="1"/>
            <lu>  <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-np_ant-np_cog">                        <!-- при Владимире Святославиче - Владимир Святославичпен -->
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_gender"/>
               <lit-tag v="nom"/>
            </lu><b pos="1"/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_gender"/>
               <lit-tag v="2"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>



<rule comment="NEW RULE: prep noun np-GEN-ant cog">     <!-- Aliya 21.06.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="np-ant-gen"/>
    <pattern-item n="np-cog-gen"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro>
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-np-GEN-ant_cog-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu><b pos="1"/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="5"/>
    </lu><b pos="1"/>
    <lu>  <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-np-GEN-ant_cog">                        <!-- в сыне Владимира Святославича - Владимир Святославичтың ұлында -->
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu><b pos="1"/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="5"/>
    </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>




<rule comment="NEW RULE: prep noun np-ant np-cog">     <!-- Aliya 21.06.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="np-ant"/>
    <pattern-item n="np-cog"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro>
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-np_ant-np_cog-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="nom"/>
            </lu><b pos="1"/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_gender"/>
               <lit-tag v="nom"/>
            </lu><b pos="1"/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_gender"/>
               <lit-tag v="2"/>
               <lit-tag v="5"/>
            </lu><b pos="1"/>
            <lu>  <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-np_ant-np_cog">                        <!-- при князе Владимире Святославиче - князь Владимир Святославичпен -->
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="nom"/>
            </lu><b pos="1"/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_gender"/>
               <lit-tag v="nom"/>
            </lu><b pos="1"/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_gender"/>
               <lit-tag v="2"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>



<rule comment="NEW RULE: noun np-gen ant cog">    <!-- Aliya 20.06.17 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="np-ant-gen"/>
    <pattern-item n="np-cog-gen"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="1"/> </call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>

    <out>
    <chunk name="noun-np-GEN-ant_cog">       <!-- сын Владимира Святославича - Владимир Святославичтың ұлы -->
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> 
    <tag><lit-tag v="p3"/></tag> 
    <tag><lit-tag v="PXD"/></tag> 
    <tag><lit-tag v="CD"/></tag> 
    </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu><b pos="1"/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>



<rule comment="NEW RULE: noun np ant cog">    <!-- Aliya 20.06.17 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="np-ant"/>
    <pattern-item n="np-cog"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="1"/> </call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>

    <out>
    <chunk name="noun-np-ant_cog">       <!-- князю Владимиру Святославичу - князь Владимир Святославичке -->
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> 
    <tag><lit-tag v="p3"/></tag> 
    <tag><lit-tag v="PXD"/></tag> 
    <tag><lit-tag v="CD"/></tag> 
    </tags>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <clip pos="3" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>



<rule comment="NEW RULE: noun np ant cog ant">    <!-- Aliya 05.08.17 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="np-ant"/>
    <pattern-item n="np-cog"/>
    <pattern-item n="np-ant"/>
  </pattern>
  <action>
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>

    <out>
    <chunk name="noun-np-ant_cog_ant">       <!-- князю Александру Ярославичу Невскому - князь Александр Ярославич Невскийге -->
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> 
    <tag><lit-tag v="p3"/></tag> 
    <tag><lit-tag v="PXD"/></tag> 
    <tag><lit-tag v="CD"/></tag> 
    </tags>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_gender"/>
     <clip pos="4" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: noun np ant cog">    <!-- Aliya 18.06.17 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>

    <out>
    <chunk name="noun-np_anttopcog">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> 
    <tag><lit-tag v="p3"/></tag> 
    <tag><lit-tag v="PXD"/></tag> 
    <tag><lit-tag v="CD"/></tag> 
    </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu><b pos="1"/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: noun np ant cog">    <!-- Aliya 31.07.17 -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 
  <call-macro n="select-case"> <with-param pos="3"/> </call-macro>

    <out>
    <chunk name="adj-n-np_anttopcog">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="sl" part="a_nbr"/></tag> 
    <tag><lit-tag v="p3"/></tag> 
    <tag><lit-tag v="PXD"/></tag> 
    <tag><lit-tag v="CD"/></tag> 
    </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu><b pos="1"/>
        <lu><var n="adjec_lu"/></lu><b/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="px3sp"/>
     <clip pos="2" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: prep noun np ant"> <!-- Aliya 18.06.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
     <call-macro n="select-case">
        <with-param pos="3"/>
     </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-np_ant-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_gender"/>
               <lit-tag v="gen"/>
            </lu><b pos="1"/>
            <lu>  
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu><var n="postposition_lu"/></lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-np_ant">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_gender"/>
               <lit-tag v="gen"/>
            </lu><b pos="1"/>
            <lu>  
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep np noun and noun np"> <!-- Aliya 31.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
     <call-macro n="select-case"><with-param pos="5"/></call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="5"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-and-n-np_ant-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="5" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <clip pos="5" side="tl" part="a_gender"/>
               <lit-tag v="gen"/>
            </lu><b/>
            <lu>  
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu><var n="postposition_lu"/></lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-and-n-np_ant">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="5" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <clip pos="5" side="tl" part="a_gender"/>
               <lit-tag v="gen"/>
            </lu><b/>
            <lu>  
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: vseh ego noun"> <!-- все его земли - оның барлық құрлықтары -->  <!-- Aliya 21.06.17 -->
  <pattern>
    <pattern-item n="vseh"/>
    <pattern-item n="ego-detpos"/>
    <pattern-item n="nom"/> 
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro> 

      <choose>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="CD"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>

    <out>
    <chunk name="vseh-ego-noun">
    <tags>
    <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p3"/>
          <lit-tag v="sg"/>
          <lit-tag v="gen"/>
        </lu><b/>
        <lu>
          <lit v="барлық"/>
          <lit-tag v="det.qnt"/>
        </lu><b/>
       <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="px3sp"/>            
               <clip pos="3" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: prep vseh ego noun">  <!-- Aliya 25.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="vseh"/> 
    <pattern-item n="ego-detpos"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro>
     <choose>

      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out>
          <chunk name="prep-vseh-ego-nom-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p3"/>
          <lit-tag v="sg"/>
          <lit-tag v="gen"/>
        </lu><b/>
        <lu>
          <lit v="барлық"/>
          <lit-tag v="det.qnt"/>
        </lu><b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>            
               <lit-tag v="5"/>
            </lu><b/>
            <lu><var n="postposition_lu"/></lu>
          </chunk>
        </out>
      </when>

      <otherwise>
        <out>
          <chunk name="prep-vseh-ego-nom">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p3"/>
          <lit-tag v="sg"/>
          <lit-tag v="gen"/>
        </lu><b/>
        <lu>
          <lit v="барлық"/>
          <lit-tag v="det.qnt"/>
        </lu><b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>            
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>



<rule comment="NEW RULE: vseh adj noun"> <!-- все знатные земли - барлық айтулы құрлықтар -->  <!-- Aliya 18.06.17 -->
  <pattern>
    <pattern-item n="vseh"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro> 
<call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 

      <choose>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="CD"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>

    <out>
    <chunk name="vseh-adj-noun">
    <tags>
    <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
        <lu>
          <lit v="барлық"/>
          <lit-tag v="det.qnt"/>
        </lu><b/>
        <lu><var n="adjec_lu"/></lu><b/>
	<lu>
          <clip pos="3" side="tl" part="lem"/>
	  <clip pos="3" side="tl" part="a_nom"/>
	  <clip pos="3" side="tl" part="a_nbr"/>
	  <clip pos="3" side="tl" part="a_case"/>
          </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: prep vseh adj noun"> <!-- на всех ключевых постах - барлық кілттік оразаларда -->  <!-- Aliya 02.08.17 -->
  <pattern>
    <pattern-item n="prep-na"/>
    <pattern-item n="vseh"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="build-adjec-lu"><with-param pos="3"/></call-macro> 

    <out>
    <chunk name="na-vseh-adj-noun">
    <tags>
    <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="4" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
        <lu>
          <lit v="барлық"/>
          <lit-tag v="det.qnt"/>
        </lu><b/>
        <lu><var n="adjec_lu"/></lu><b/>
	<lu>
          <clip pos="4" side="tl" part="lem"/>
	  <clip pos="4" side="tl" part="a_nom"/>
	  <clip pos="4" side="tl" part="a_nbr"/>
               <lit-tag v="loc"/>   
          </lu>
    </chunk>
    </out>
      </action>
</rule>

<rule comment="NEW RULE: vseh noun"> <!-- все земли - барлық құрлықтар -->  <!-- Aliya 18.06.17 -->
  <pattern>
    <pattern-item n="vseh"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 

      <choose>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="CD"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>

    <out>
    <chunk name="vseh-noun">
    <tags>
    <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
        <lu>
          <lit v="барлық"/>
          <lit-tag v="det.qnt"/>
        </lu><b/>
	<lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_nom"/>
	  <clip pos="2" side="tl" part="a_nbr"/>
	  <clip pos="2" side="tl" part="a_case"/>
          </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: prep vseh noun">  <!-- Aliya 18.06.17 -->
  <pattern>
    <pattern-item n="prep"/>
        <pattern-item n="vseh"/> 
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro>
     <choose>

      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out>
          <chunk name="prep-vseh-nom-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="барлық"/>
          <lit-tag v="det.qnt"/>
        </lu><b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu><var n="postposition_lu"/></lu>
          </chunk>
        </out>
      </when>

      <otherwise>
        <out>
          <chunk name="prep-vseh-nom">     
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="барлық"/>
          <lit-tag v="det.qnt"/>
        </lu><b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep ih noun">  <!-- Aliya 18.06.17 -->
  <pattern>
    <pattern-item n="prep"/>
        <pattern-item n="ih-detpos"/> 
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro>
     <choose>

      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out>
          <chunk name="prep-ih-nom-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.dem"/>
          <lit-tag v="pl"/>
          <lit-tag v="gen"/>
        </lu><b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu><var n="postposition_lu"/></lu>
          </chunk>
        </out>
      </when>

      <otherwise>
        <out>
          <chunk name="prep-ih-nom">          <!-- от их набегов - олардың шабуылынан -->
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="олар"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p3"/>
          <lit-tag v="pl"/>
          <lit-tag v="gen"/>
        </lu><b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep DO prn noun"> <!-- Aliya 15.06.2017 -->
  <pattern>
    <pattern-item n="prep-do"/>
    <pattern-item n="subj-pron-pos"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
	<choose>
  	<when> 
 	   <test>
		<and>    
			<equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
			<equal><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>		
		</and>
	   </test>
         <let><clip pos="3" side="tl" part="a_possessive"/><lit v="px1sg"/></let>
	</when>
 	 <when> 
 	   <test>
		<and>    
			<equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
			<equal><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>		
		</and>
	   </test>
         <let><clip pos="3" side="tl" part="a_possessive"/><lit v="px1sg"/></let>
	</when>
	<when> 
 	   <test>
		<and>    
			<equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
			<equal><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>		
		</and>
	   </test>
         <let><clip pos="3" side="tl" part="a_possessive"/><lit v="px1pl"/></let>
	</when>
	<when> 
 	   <test>
		<and>    
			<equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
			<equal><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>		
		</and>
	   </test>
         <let><clip pos="3" side="tl" part="a_possessive"/><lit v="px1pl"/></let>
	</when>

	<when> 
 	   <test>
		<and>    
			<equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
			<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
			<equal><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px2sg"/></let>
	</when>
 	 <when> 
 	   <test>
		<and>    
			<equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
			<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
			<equal><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px2sg"/></let>
	</when>
	<when> 
 	   <test>
		<and>    
			<equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
			<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
			<equal><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px2pl"/></let>
	</when>
	<when> 
 	   <test>
		<and>    
			<equal><clip pos="2" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
			<equal><clip pos="2" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
			<equal><clip pos="3" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px2pl"/></let>
	</when>
		<otherwise><let><var n="possessive"/><lit-tag v="px3sp"/></let></otherwise>
	</choose>

        <out>
          <chunk name="do-prn-noun">    <!--  до твоей эры - сенің дәуірлеріңе дейін -->
    <tags> <tag><lit-tag v="NP"/></tag>
    	<tag><clip pos="2" side="tl" part="a_nbr"/></tag> 
    	<tag><clip pos="3" side="tl" part="a_nbr"/></tag> 
    	<tag><clip pos="2" side="sl" part="a_pers"/></tag> 
    	<tag><var n="possessive"/> </tag> 
    	<tag><clip pos="3" side="sl" part="a_case"/></tag>
    </tags>
	<lu>
               <clip pos="2" side="tl" part="lem"/>
               <clip pos="2" side="tl" part="a_kaz_pospron"/>
               <lit-tag v="4"/> <!-- number -->
               <lit-tag v="2"/> <!-- person -->
               <lit-tag v="gen"/>
        </lu><b/>
	<lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="3"/>                          
 	       <var n="possessive"/> 
  	       <lit-tag v="dat"/>
	</lu><b/> 
        <lu><lit v="дейін"/><lit-tag v="post"/></lu>
          </chunk>
        </out>
  </action>
</rule>

<rule comment="RULE: ego"> <!-- Aliya 11.06.17 -->
      <pattern>
        <pattern-item n="ego-detpos"/>
      </pattern>
      <action>
    <out>
    <chunk name="ego-detpos">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p3"/>
          <lit-tag v="sg"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </action>
    </rule>

<rule comment="RULE: ego noun"> <!-- Aliya 11.06.17 -->
      <pattern>
        <pattern-item n="ego-detpos"/>
        <pattern-item n="nom"/> 
      </pattern>
      <action>
    <out>
    <chunk name="ego-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="tl" part="a_nbr"/></tag> 
    <tag><var n="possessive"/> </tag> 
    <tag><clip pos="2" side="tl" part="a_case"/></tag>
    </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p3"/>
          <lit-tag v="sg"/>
          <lit-tag v="gen"/>
        </lu>
       <b/>
       <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="px3sp"/>            
               <clip pos="2" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
      </action>
    </rule>


<rule comment="NEW RULE: prep ego noun">    <!-- Aliya 28.08.2017 -->  <!--в её составе - оның құрамында -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="ego-detpos"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
 
      <choose>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="loc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="3" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>

     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-ego-n-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p3"/>
          <lit-tag v="sg"/>
          <lit-tag v="gen"/>
        </lu>
       <b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="px3sp"/>            
               <var n="case"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise>
        <out>
          <chunk name="prep-ego-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="4"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p3"/>
          <lit-tag v="sg"/>
          <lit-tag v="gen"/>
        </lu>
       <b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="px3sp"/>            
               <var n="case"/>
            </lu><b/>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>

<rule comment="RULE: ih noun"> <!-- Aliya 21.06.17 -->
      <pattern>
        <pattern-item n="ih-detpos"/>
        <pattern-item n="nom"/> 
      </pattern>
      <action>
    <out>
    <chunk name="ih-noun">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.dem"/>
          <lit-tag v="pl"/>
          <lit-tag v="gen"/>
        </lu><b/>
       <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>   
               <clip pos="2" side="tl" part="a_case"/>    
      </lu>
    </chunk>
    </out>
      </action>
    </rule>

<rule comment="RULE: svoi noun"> <!-- Aliya 20.06.17 -->
      <pattern>
        <pattern-item n="svoi-noun"/>
        <pattern-item n="nom"/> 
      </pattern>
      <action>
    <out>
    <chunk name="svoi-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="tl" part="a_nbr"/></tag> 
    <tag><var n="possessive"/> </tag> 
    <tag><clip pos="2" side="tl" part="a_case"/></tag>
    </tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu>
       <b/>
       <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="px3sp"/>            
               <clip pos="2" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
      </action>
    </rule>

<rule comment="RULE: svoi noun"> <!-- Aliya 20.07.17 -->
      <pattern>
        <pattern-item n="prep-v"/>
        <pattern-item n="svoi-noun"/>
        <pattern-item n="nom"/> 
      </pattern>
      <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
    <out>
    <chunk name="v-svoi-noun">
    <tags> <tag><var n="pptag"/></tag>
    <tag><clip pos="3" side="tl" part="a_nbr"/></tag> 
    <tag><var n="possessive"/> </tag> 
    <tag><clip pos="3" side="tl" part="a_case"/></tag>
    </tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu>
       <b/>
       <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="px3sp"/>            
               <lit-tag v="loc"/>       
    </lu>
    </chunk>
    </out>
      </action>
    </rule>


<rule comment="NEW RULE: prep svoi noun">   <!-- Aliya 29.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="svoi-noun"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="3"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-svoi-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu><b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-svoi-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu><b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>

  

  
<rule comment="RULE: want verb"> <!-- Aliya 26.05.17-->
      <pattern>
        <pattern-item n="want-rus"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>
      <choose><when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
      </when></choose>
    <out>
    <chunk name="want-verb">
      <tags><tag><lit-tag v="VP"/></tag></tags>
            <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="nom"/>
            </lu><b/>
        <lu>
          <lit v="керек"/>
          <lit-tag v="vaux"/>
          <lit-tag v="pres"/>
         <lit-tag v="p3"/>
         <lit-tag v="sg"/>
        </lu>
    </chunk>
    </out>
      </action>
    </rule>

  
<rule comment="RULE: want neg verb"> <!-- Aliya 31.07.17-->
      <pattern>
    <pattern-item n="ne-negative"/>
        <pattern-item n="want-rus"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>
      <choose><when>
        <test><equal><clip pos="3" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
      </when></choose>
    <out>
    <chunk name="want-neg-verb">
      <tags><tag><lit-tag v="VP"/></tag></tags>
            <lu>
          <clip pos="3" side="tl" part="lem"/>
	  <clip pos="3" side="tl" part="a_kaz_verb"/>
              <lit-tag v="neg"/>
          <lit-tag v="ger"/>
          <lit-tag v="nom"/>
            </lu><b/>
        <lu>
          <lit v="керек"/>
          <lit-tag v="vaux"/>
          <lit-tag v="pres"/>
         <lit-tag v="p3"/>
         <lit-tag v="sg"/>
        </lu>
    </chunk>
    </out>
      </action>
    </rule>

 
<rule comment="RULE: want byt' verb"> <!-- Aliya 31.07.17-->
      <pattern>
        <pattern-item n="want-rus"/>
    <pattern-item n="byt-past"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>
      <choose><when>
        <test><equal><clip pos="3" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
      </when></choose>
    <out>
    <chunk name="want-byt-verb">
      <tags><tag><lit-tag v="VP"/></tag></tags>
        <lu>
          <clip pos="3" side="tl" part="lem"/>
	  <clip pos="3" side="tl" part="a_kaz_verb"/>
              <lit-tag v="ger"/>
              <lit-tag v="nom"/>
        </lu><b/>
        <lu>
          <lit v="керек"/>
          <lit-tag v="vaux"/>
          <lit-tag v="pres"/>
         <lit-tag v="p3"/>
         <lit-tag v="sg"/>
        </lu><b/>
            <lu>
              <lit v="бол"/>
              <lit-tag v="v.iv"/>
              <lit-tag v="gpr_impf"/>
            </lu>
    </chunk>
    </out>
      </action>
    </rule>

 
<rule comment="RULE: want byt' neg verb"> <!-- Aliya 31.07.17-->
      <pattern>
    <pattern-item n="ne-negative"/>
        <pattern-item n="want-rus"/>
        <pattern-item n="byt-past"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>
      <choose><when>
        <test><equal><clip pos="4" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
      </when></choose>
    <out>
    <chunk name="want-byt-neg-verb">
      <tags><tag><lit-tag v="VP"/></tag></tags>
        <lu>
          <clip pos="4" side="tl" part="lem"/>
	  <clip pos="4" side="tl" part="a_kaz_verb"/>
              <lit-tag v="neg"/>
              <lit-tag v="ger"/>
              <lit-tag v="nom"/>
        </lu><b/>
        <lu>
          <lit v="керек"/>
          <lit-tag v="vaux"/>
          <lit-tag v="pres"/>
         <lit-tag v="p3"/>
         <lit-tag v="sg"/>
        </lu><b/>
            <lu>
              <lit v="бол"/>
              <lit-tag v="v.iv"/>
              <lit-tag v="gpr_impf"/>
            </lu>
    </chunk>
    </out>
      </action>
    </rule>


<rule comment="RULE: mojno"> <!-- Aliya 03.10.17-->
      <pattern>
        <pattern-item n="mojno"/>
      </pattern>
      <action>
    <out>
    <chunk name="mojno">
      <tags><tag><lit-tag v="VP"/></tag></tags>
        <lu>
          <lit v="бол"/>
          <lit-tag v="v.iv"/>
          <lit-tag v="aor"/>
         <lit-tag v="p3"/>
         <lit-tag v="sg"/>
        </lu>
    </chunk>
    </out>
      </action>
    </rule>


<rule comment="RULE: mojno verb"> <!-- Aliya 26.05.17-->
      <pattern>
        <pattern-item n="mojno"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>
      <choose><when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
      </when></choose>
    <out>
    <chunk name="mojno-verb">
      <tags><tag><lit-tag v="VP"/></tag></tags>
            <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="dat"/>
            </lu><b/>
        <lu>
          <lit v="бол"/>
          <lit-tag v="v.iv"/>
          <lit-tag v="aor"/>
         <lit-tag v="p3"/>
         <lit-tag v="sg"/>
        </lu>
    </chunk>
    </out>
      </action>
    </rule>


<rule comment="RULE: mojno adv verb"> <!-- Aliya 09.08.17-->
      <pattern>
        <pattern-item n="mojno"/>
        <pattern-item n="adv"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>
      <choose><when>
        <test><equal><clip pos="3" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
      </when></choose>
    <out>
    <chunk name="mojno-adv-verb">
      <tags><tag><lit-tag v="VP"/></tag></tags>
            <lu>
             <clip pos="2" side="tl" part="lem"/> 
             <clip pos="2" side="tl" part="a_adv"/>
            </lu><b/>
            <lu>
          <clip pos="3" side="tl" part="lem"/>
	  <clip pos="3" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="dat"/>
            </lu><b/>
        <lu>
          <lit v="бол"/>
          <lit-tag v="v.iv"/>
          <lit-tag v="aor"/>
         <lit-tag v="p3"/>
         <lit-tag v="sg"/>
        </lu>
    </chunk>
    </out>
      </action>
    </rule>


<rule comment="RULE: mojno and nujno verb"> <!-- Aliya 08.08.17-->
      <pattern>
        <pattern-item n="mojno"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="nujno"/>
        <pattern-item n="verb"/>
      </pattern>
      <action>
      <choose><when>
        <test><equal><clip pos="4" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
      </when></choose>
    <out>
    <chunk name="mojno-and-nujno-verb">
      <tags><tag><lit-tag v="VP"/></tag></tags>
            <lu>
          <clip pos="4" side="tl" part="lem"/>
	  <clip pos="4" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="dat"/>
            </lu><b/>
        <lu>
          <lit v="бол"/>
          <lit-tag v="v.iv"/>
          <lit-tag v="aor"/>
         <lit-tag v="p3"/>
         <lit-tag v="sg"/>
        </lu><b/>
        <lu><clip pos="2" side="tl" part="lem"/> <lit-tag v="cnjcoo"/></lu><b/>
        <lu>
          <lit v="керек"/>
          <lit-tag v="vaux"/>
          <lit-tag v="pres"/>
         <lit-tag v="p3"/>
         <lit-tag v="sg"/>
        </lu>
    </chunk>
    </out>
      </action>
    </rule>


<rule comment="NEW RULE: byt' verb"> <!-- Aliya 23.05.17 -->
  <pattern>
    <pattern-item n="byt-fut"/>
    <pattern-item n="verb"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <out>
    <chunk name="byt-fut+verb-inf"> <!-- "будет удовлетворять" - "қанағаттандыратын болады" -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
              <lit-tag v="gpr_impf"/>
        </lu>
<b/>
            <lu>
              <lit v="бол"/>
              <lit-tag v="v.iv"/>
              <lit-tag v="aor"/>
          <clip pos="1" side="tl" part="a_pers"/>
          <clip pos="1" side="tl" part="a_nbr"/>
            </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: byt' verb"> <!-- Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="byt-past"/>
    <pattern-item n="verb"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <out>
    <chunk name="byt-past+verb"> <!-- "была построена" - "құрылған болатын" -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
              <lit-tag v="pass"/>
              <lit-tag v="gpr_past"/>
        </lu>
<b/>
            <lu>
              <lit v="бол"/>
              <lit-tag v="v.iv"/>
              <lit-tag v="gpr_impf"/>
            </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: byt' adv verb"> <!-- Aliya 07.08.17 -->
  <pattern>
    <pattern-item n="byt-past"/>
    <pattern-item n="adv"/>
    <pattern-item n="verb"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <out>
    <chunk name="byt-past+adv+verb"> <!-- "были хорошо приспособлены" - "жақсы бейімделген болатын" -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
            <lu>
             <clip pos="2" side="tl" part="lem"/> 
             <clip pos="2" side="tl" part="a_adv"/>
            </lu>
<b/>
        <lu>
          <clip pos="3" side="tl" part="lem"/>
	  <clip pos="3" side="tl" part="a_kaz_verb"/>
              <lit-tag v="pass"/>
              <lit-tag v="gpr_past"/>
        </lu>
<b/>
            <lu>
              <lit v="бол"/>
              <lit-tag v="v.iv"/>
              <lit-tag v="gpr_impf"/>
            </lu>
    </chunk>
    </out>
  </action>
</rule>

<rule comment="RULE: np org"> <!-- Aliya 18.05.17-->
      <pattern>
        <pattern-item n="np-org"/>
      </pattern>
      <action>
 <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="prp"/></equal></test>
        <let><clip pos="1" side="tl" part="a_case"/><lit-tag v="loc"/></let>
      </when>
 </choose>
    <out>

    <chunk name="np-org">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="np.org"/>
              <clip pos="1" side="tl" part="a_case"/>
        </lu>
    </chunk>
    </out>
      </action>
    </rule>

<rule comment="RULE: samyi"> <!-- Aliya 30.03.17-->
      <pattern>
        <pattern-item n="samyi"/>
      </pattern>
      <action>
    <out>
    <chunk name="samyi">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu><lit v="ең"/><lit-tag v="adv"/></lu>
    </chunk>
    </out>
      </action>
    </rule>

<rule comment="RULE: vy"> <!-- Aliya 31.03.17 -->
      <pattern>
        <pattern-item n="vy"/>
      </pattern>
      <action>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="prp"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let>
    <out>
    <chunk name="vy-prp">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="сіз"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p2"/> <lit-tag v="sg"/>
          <lit-tag v="frm"/> <lit-tag v="loc"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="acc"/></let>
    <out>
    <chunk name="vy-gen">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="сіз"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p2"/> <lit-tag v="sg"/>
          <lit-tag v="frm"/> <lit-tag v="acc"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="vy-dat">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="сіз"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p2"/> <lit-tag v="sg"/>
          <lit-tag v="frm"/> <lit-tag v="dat"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="vy-ins">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="сіз"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p2"/> <lit-tag v="sg"/>
          <lit-tag v="frm"/> <lit-tag v="ins"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="vy-nom">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="сіз"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p2"/> <lit-tag v="sg"/>
          <lit-tag v="frm"/> <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>


<rule comment="RULE: num coll"> <!-- Aliya 31.03.17-->
      <pattern>
        <pattern-item n="num-coll"/>
      </pattern>
      <action>
    <out>
    <chunk name="num-coll">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <lit-tag v="num.coll"/>
              <lit-tag v="advl"/>
        </lu>
    </chunk>
    </out>
      </action>
    </rule>


 <rule comment="RULE: toje"> <!-- Aliya 24.03.17 -->
      <pattern>
        <pattern-item n="toje"/>
      </pattern>
      <action>
        <out>
          <chunk name="toje" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
              <lit v="да"/>
              <lit-tag v="cnjcoo"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


<rule comment="RULE: ADVERB"> <!-- Aliya 24.03.17 -->
      <pattern>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <out>
          <chunk name="adverb" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="AdvP"/></tag>
            </tags>
            <lu>
             <clip pos="1" side="tl" part="lem"/> 
             <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>



<rule comment="NEW RULE: belgisiz verb"> <!-- Aliya 01.10.17 -->
  <pattern>
    <pattern-item n="verb-adv"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <out>
    <chunk name="verb-adv">
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
  </action>
</rule>



<rule comment="NEW RULE: verb"> <!-- Aliya 20.03.17 -->
  <pattern>
    <pattern-item n="verb"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pres"/></equal></test>
        <let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="verb-pres"> <!-- Он зовет - Ол шақырады -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="6"/>
          <lit-tag v="4"/>
          <lit-tag v="5"/>
	  <clip pos="1" side="tl" part="a_pers"/>
	  <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="7"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal></test>
        <let><var n="tense"/><lit-tag v="past"/></let>
    <out>
    <chunk name="verb-past"> <!-- Он звал - Ол шақырған -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
	  <clip pos="1" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
	  <clip pos="1" side="tl" part="a_nbr"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
    <out>
    <chunk name="verb-inf"> <!-- звать - шақыру -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="imp"/></equal></test>
        <let><var n="tense"/><lit-tag v="imp"/></let>
    <out>
    <chunk name="verb-imp"> <!-- зови - шақыр -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="imp"/>
          <lit-tag v="p2"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pprs"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_impf"/></let>
    <out>
    <chunk name="verb-pprs"> <!-- зовя - шақыра -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="prc_impf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pp"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_perf"/></let>
    <out>
    <chunk name="verb-pp"> <!-- звав - шақырып -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="prc_perf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="verb">
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
	  <clip pos="1" side="tl" part="a_tense"/>
	  <clip pos="1" side="tl" part="a_pers"/>
	  <clip pos="1" side="tl" part="a_nbr"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: negative verb"> <!-- Aliya 31.07.17 -->
  <pattern>
    <pattern-item n="ne-negative"/>
    <pattern-item n="verb"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>
      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="pres"/></equal></test>
        <let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="neg-verb-pres"> <!-- Он не зовет - Ол шақырмайды -->
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="4"/>
          <lit-tag v="5"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
          <lit-tag v="7"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="past"/></equal></test>
        <let><var n="tense"/><lit-tag v="ifi"/></let>
    <out>
    <chunk name="neg-verb-past"> <!-- Он не звал - Ол шақырмаған -->
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
	  <clip pos="2" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
    <out>
    <chunk name="neg-verb-inf"> <!-- не звать - шақырмау -->
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="ger"/>
          <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="imp"/></equal></test>
        <let><var n="tense"/><lit-tag v="imp"/></let>
    <out>
    <chunk name="neg-verb-imp"> <!-- не зови - шақырма -->
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="imp"/>
          <lit-tag v="p2"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="pprs"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_impf"/></let>
    <out>
    <chunk name="neg-verb-pprs"> <!-- не зовя - шақырмай -->
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="prc_impf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="pp"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_perf"/></let>
    <out>
    <chunk name="neg-verb-pp"> <!-- не звав - шақырмай -->
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="prc_perf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="neg-verb">
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
	  <clip pos="2" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
  </action>
</rule>

<rule comment="NEW RULE: verb1"> <!-- Aliya 21.03.17 -->
  <pattern>
    <pattern-item n="v-pp_pprs"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pprs"/></equal></test>
        <let><var n="tense"/><lit-tag v="gpr_pot"/></let>
    <out>
    <chunk name="v-pprs-actv_pasv"> <!-- зовущий-шақырушы -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="gpr_pot"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pp"/></equal></test>
        <let><var n="tense"/><lit-tag v="past"/></let>
    <out>
    <chunk name="v-pp-actv_pasv"> <!-- звавший-шақырған -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="past"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="verb-pp_pprs">
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
	  <clip pos="1" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
  </action>
</rule>

<rule comment="NEW RULE: vbhaver"> <!-- Aliya 24.03.17 -->
  <pattern>
    <pattern-item n="vbhaver"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pres"/></equal></test>
        <let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="vbhaver-pres">
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="6"/>
          <lit-tag v="4"/>
          <lit-tag v="5"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
          <lit-tag v="7"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal></test>
        <let><var n="tense"/><lit-tag v="ifi"/></let>
    <out>
    <chunk name="vbhaver-past"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
	  <clip pos="1" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
    <out>
    <chunk name="vbhaver-inf"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="imp"/></equal></test>
        <let><var n="tense"/><lit-tag v="imp"/></let>
    <out>
    <chunk name="vbhaver-imp"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="imp"/>
          <lit-tag v="p2"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pprs"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_impf"/></let>
    <out>
    <chunk name="vbhaver-pprs"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="prc_impf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pp"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_perf"/></let>
    <out>
    <chunk name="vbhaver-pp"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="prc_perf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="vbhaver">
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
	  <clip pos="1" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: vbser"> <!-- Aliya 24.03.17 -->
  <pattern>
    <pattern-item n="vbser"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pres"/></equal></test>
        <let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="vbser-pres"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="6"/>
          <lit-tag v="4"/>
          <lit-tag v="5"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
          <lit-tag v="7"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal></test>
        <let><var n="tense"/><lit-tag v="ifi"/></let>
    <out>
    <chunk name="vbser-past"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
	  <clip pos="1" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
    <out>
    <chunk name="vbser-inf"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="imp"/></equal></test>
        <let><var n="tense"/><lit-tag v="imp"/></let>
    <out>
    <chunk name="vbser-imp"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="imp"/>
          <lit-tag v="p2"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pprs"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_impf"/></let>
    <out>
    <chunk name="vbser-pprs"> 
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="prc_impf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pp"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_perf"/></let>
    <out>
    <chunk name="vbser-pp">
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="prc_perf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="vbser">
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
	  <clip pos="1" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: negative vbser"> <!-- Aliya 31.07.17 -->
  <pattern>
    <pattern-item n="ne-negative"/>
    <pattern-item n="vbser"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>
      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="pres"/></equal></test>
        <let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="neg-vbser-pres"> 
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="4"/>
          <lit-tag v="5"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
          <lit-tag v="7"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="past"/></equal></test>
        <let><var n="tense"/><lit-tag v="ifi"/></let>
    <out>
    <chunk name="neg-vbser-past"> 
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
	  <clip pos="2" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></test>
        <let><var n="tense"/><lit-tag v="ger"/></let>
    <out>
    <chunk name="neg-vbser-inf"> 
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="ger"/>
          <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="imp"/></equal></test>
        <let><var n="tense"/><lit-tag v="imp"/></let>
    <out>
    <chunk name="neg-vbser-imp"> 
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="imp"/>
          <lit-tag v="p2"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="pprs"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_impf"/></let>
    <out>
    <chunk name="neg-vbser-pprs"> 
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="prc_impf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="pp"/></equal></test>
        <let><var n="tense"/><lit-tag v="prc_perf"/></let>
    <out>
    <chunk name="neg-vbser-pp">
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
          <lit-tag v="prc_perf"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="tense"/><lit-tag v="aor"/></let>
    <out>
    <chunk name="neg-vbser">
      <tags>
        <tag><lit-tag v="VP_neg"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="neg"/>
	  <clip pos="2" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
  </action>
</rule>



<rule comment="NEW RULE: pron-pers verb"> <!-- Aliya 04.09.2017 -->
  <pattern>
    <pattern-item n="subj-pron"/>
    <pattern-item n="verb-past"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal></test>
        <let><var n="person"/><lit-tag v="p1"/></let>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal></test>
        <let><var n="person"/><lit-tag v="p2"/></let>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p3"/></equal></test>
        <let><var n="person"/><lit-tag v="p3"/></let>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal></test>
        <let><var n="person"/><lit-tag v="p1"/></let>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal></test>
        <let><var n="person"/><lit-tag v="p2"/></let>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p3"/></equal></test>
        <let><var n="person"/><lit-tag v="p3"/></let>
      </when>
    </choose>
    <choose>
      <when>
        <test><equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="past"/></equal></test>
        <let><var n="tense"/><lit-tag v="past"/></let>
      </when>
    </choose>
    <out>
    <chunk name="pron-pers+verb-past"> <!-- Он звал - Ол шақырған -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
    <lu>
      <clip pos="1" side="tl" part="lem"/>
      <clip pos="1" side="tl" part="a_kaz_perspron"/>
      <clip pos="1" side="tl" part="a_pers"/>
      <clip pos="1" side="tl" part="a_nbr"/>
      <lit-tag v="5"/> <!-- possession -->
      <lit-tag v="7"/> <!-- case -->
    </lu><b/>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
	  <clip pos="2" side="tl" part="a_tense"/>
          <var n="person"/>
	  <clip pos="2" side="tl" part="a_nbr"/>
        </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="RULE: sam-sg"> <!-- Aliya 29.03.17 -->
      <pattern>
        <pattern-item n="sam-sg"/>
      </pattern>
      <action>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="nom"/></equal></test>
        <let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="sam-nom">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="gen"/></let>
    <out>
    <chunk name="sam-gen">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="sam-dat">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="dat"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="sam-ins">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="ins"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="case"/><lit-tag v="prp"/></let>
    <out>
    <chunk name="sam-prp">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="loc"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>


<rule comment="RULE: sam-pl"> <!-- Aliya 29.03.17 -->
      <pattern>
        <pattern-item n="sam-pl"/>
      </pattern>
      <action>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="nom"/></equal></test>
        <let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="sam-pl-nom">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3pl"/>
          <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="gen"/></let>
    <out>
    <chunk name="sam-pl-gen">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3pl"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="sam-pl-dat">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3pl"/>
          <lit-tag v="dat"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="sam-pl-ins">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3pl"/>
          <lit-tag v="ins"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="case"/><lit-tag v="prp"/></let>
    <out>
    <chunk name="sam-pl-prp">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3pl"/>
          <lit-tag v="loc"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>

<rule comment="RULE: ves' "> <!-- Aliya 30.03.17-->
      <pattern>
        <pattern-item n="ves"/>
      </pattern>
      <action>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="acc"/></let>
    <out>
    <chunk name="ves'-gen">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.qnt"/>
              <clip pos="1" side="tl" part="a_possessive"/>
              <lit-tag v="acc"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="ves'-dat">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.qnt"/>
              <clip pos="1" side="tl" part="a_possessive"/>
              <lit-tag v="dat"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="ves'-ins">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.qnt"/>
              <clip pos="1" side="tl" part="a_possessive"/>
              <lit-tag v="ins"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="prp"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let>
    <out>
    <chunk name="ves'-prp">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.qnt"/>
              <clip pos="1" side="tl" part="a_possessive"/>
              <lit-tag v="loc"/>
        </lu>
    </chunk>
    </out>
      </when>
      <otherwise><let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="ves'-nom">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.qnt"/>
              <clip pos="1" side="tl" part="a_possessive"/>
              <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>


<rule comment="RULE: prn_itg-neg"> <!-- Aliya 30.03.17-->
      <pattern>
        <pattern-item n="prn_itg-neg"/>
      </pattern>
      <action>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="acc"/></let>
    <out>
    <chunk name="prn_itg-neg-gen">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <lit-tag v="acc"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="prn_itg-neg-dat">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <lit-tag v="dat"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="prn_itg-neg-ins">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <lit-tag v="ins"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="prp"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let>
    <out>
    <chunk name="prn_itg-neg-prp">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <lit-tag v="loc"/>
        </lu>
    </chunk>
    </out>
      </when>
      <otherwise><let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="prn_itg-neg-nom">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <lit-tag v="nom"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>


<rule comment="RULE: prn_ind-dem"> <!-- Aliya 30.03.17-->
      <pattern>
        <pattern-item n="prn_ind-dem"/>
      </pattern>
      <action>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="prp"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let>
    <out>
    <chunk name="prn_ind-dem-prp">
      <tags><tag><lit-tag v="PrnP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <lit-tag v="loc"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="acc"/></let>
    <out>
    <chunk name="prn_ind-dem-gen">
      <tags><tag><lit-tag v="PrnP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_case"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="prn_ind-dem-dat">
      <tags><tag><lit-tag v="PrnP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_case"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="prn_ind-dem-ins">
      <tags><tag><lit-tag v="PrnP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_case"/>
        </lu>
    </chunk>
    </out>
      </when>
      <otherwise><let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="prn_ind-dem-nom">
      <tags><tag><lit-tag v="PrnP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_case"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>


<rule comment="RULE: det-def"> <!-- Aliya 30.03.17-->
      <pattern>
        <pattern-item n="det-def"/>
      </pattern>
      <action>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="acc"/></let>
    <out>
    <chunk name="det-def-gen">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <clip pos="1" side="tl" part="a_case"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="det-def-dat">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <clip pos="1" side="tl" part="a_case"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="det-def-ins">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <clip pos="1" side="tl" part="a_case"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="prp"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let>
    <out>
    <chunk name="det-def-prp">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <lit-tag v="loc"/>
        </lu>
    </chunk>
    </out>
      </when>
      <otherwise><let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="det-def-nom">
      <tags><tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="a_nbr"/>
              <clip pos="1" side="tl" part="a_case"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>



<rule comment="RULE: moi, tvoi, ego"> <!-- Aliya 21.04.17 -->
      <pattern>
        <pattern-item n="p123sp"/>
      </pattern>
      <action>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="prp"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let>
    <out>
    <chunk name="p123sp-prp">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
          <lit-tag v="subst"/>
          <lit-tag v="loc"/>
        </lu>
    </chunk>
    </out>
      </when>
 <when>

        <test><and>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal>
        <equal><clip pos="1" side="sl" part="lem"/><lit v="их"/></equal>
</and>
</test>
    <out>
    <chunk name="p123sp-acc">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.dem"/>
              <clip pos="1" side="tl" part="a_nbr"/>
                  <lit-tag v="acc"/>
        </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="gen"/></let>
    <out>
    <chunk name="p123sp-gen">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
          <lit-tag v="subst"/>
          <lit-tag v="acc"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="p123sp-dat">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
          <lit-tag v="subst"/>
          <lit-tag v="dat"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="p123sp-ins">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
          <lit-tag v="subst"/>
          <lit-tag v="ins"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="p123sp-nom">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>



<rule comment="RULE: moi, tvoi, ego"> <!-- Aliya 04.09.17 -->
      <pattern>
        <pattern-item n="p123sp"/>
        <pattern-item n="n"/>
      </pattern>
      <action>
<choose> 
<when>
   <test><and>
          <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
    </and></test>      
          <let><var  n="possessive"/><lit-tag v="px1sg"/></let>
</when>
<when>
   <test><and>
          <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag  v="p1"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
    </and></test>      
          <let><var  n="possessive"/><lit-tag v="px1pl"/></let>
</when>
<when>
   <test><and>
          <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag  v="p2"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
    </and></test>      
          <let><var  n="possessive"/><lit-tag v="px2sg"/></let>
</when>
<when>
   <test><and>
          <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag  v="p2"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
    </and></test>      
          <let><var  n="possessive"/><lit-tag v="px2pl"/></let>
</when>
<when>
   <test><and>
          <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag  v="p3"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
    </and></test>      
          <let><var  n="possessive"/><lit-tag v="px3sg"/></let>
</when>
<when>
   <test><and>
          <equal><clip pos="1" side="sl" part="a_pers"/><lit-tag  v="p3"/></equal>
          <equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
    </and></test>      
          <let><var  n="possessive"/><lit-tag v="px3pl"/></let>
</when>
</choose>

    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="prp"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let>
    <out>
    <chunk name="p123sp-prp">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
          <lit-tag v="subst"/>
          <lit-tag v="loc"/>
        </lu><b/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <var  n="possessive"/>
     <var n="case"/>
    </lu>
    </chunk>
    </out>
      </when>
 <when>

        <test><and>
<equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal>
        <equal><clip pos="1" side="sl" part="lem"/><lit v="их"/></equal>
</and>
</test>
    <out>
    <chunk name="p123sp-acc">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.dem"/>
              <clip pos="1" side="tl" part="a_nbr"/>
                  <lit-tag v="acc"/>
        </lu><b/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <var  n="possessive"/>
     <var n="case"/>
    </lu>
    </chunk>
    </out>
      </when>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="gen"/></let>
    <out>
    <chunk name="p123sp-gen">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
          <lit-tag v="subst"/>
          <lit-tag v="acc"/>
        </lu><b/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <var  n="possessive"/>
     <var n="case"/>
    </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="p123sp-dat">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
          <lit-tag v="subst"/>
          <lit-tag v="dat"/>
        </lu><b/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <var  n="possessive"/>
     <var n="case"/>
    </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="p123sp-ins">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
          <lit-tag v="subst"/>
          <lit-tag v="ins"/>
        </lu><b/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <var  n="possessive"/>
     <var n="case"/>
    </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="p123sp-nom">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
              <clip pos="1" side="tl" part="lem"/>
          <lit-tag v="prn.pers"/>
              <clip pos="1" side="tl" part="a_pers"/>
              <clip pos="1" side="tl" part="a_nbr"/>
          <lit-tag v="gen"/>
        </lu><b/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <var  n="possessive"/>
     <var n="case"/>
    </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>



<rule comment="RULE: svoi"> <!-- Aliya 25.06.17 -->
      <pattern>
        <pattern-item n="svoi-noun"/>
      </pattern>
      <action>
    <choose>
      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="prp"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let>
    <out>
    <chunk name="svoi-prp">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="gen"/></equal></test>
        <let><var n="case"/><lit-tag v="gen"/></let>
    <out>
    <chunk name="svoi-gen">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="acc"/></equal></test>
        <let><var n="case"/><lit-tag v="gen"/></let>
    <out>
    <chunk name="svoi-acc">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="dat"/></equal></test>
        <let><var n="case"/><lit-tag v="dat"/></let>
    <out>
    <chunk name="svoi-dat">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </when>

      <when>
        <test><equal><clip pos="1" side="sl" part="a_case"/><lit-tag v="ins"/></equal></test>
        <let><var n="case"/><lit-tag v="ins"/></let>
    <out>
    <chunk name="svoi-ins">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </when>

      <otherwise><let><var n="case"/><lit-tag v="nom"/></let>
    <out>
    <chunk name="svoi-nom">
      <tags>
        <tag><lit-tag v="NP"/></tag></tags>
        <lu>
          <lit v="өз"/>
          <lit-tag v="prn.ref"/>
          <lit-tag v="px3sp"/>
          <lit-tag v="gen"/>
        </lu>
    </chunk>
    </out>
      </otherwise> 
    </choose>
      </action>
    </rule>



<!-- from eng-kaz for в саду  -бақта  Балжан-->

<rule comment="NEW RULE: subj-pron">
  <pattern>
    <pattern-item n="subj-pron"/>
  </pattern>
  <action>

  <choose>
    <when>
      <test>
       <equal>
         <clip pos="1" side="sl" part="a_nbr"/>
         <lit-tag v="sp"/>
       </equal>
      </test>
       <let><var n="number"/><lit-tag v="sg"/></let> <!-- choosing singular in the absence of information -->
    </when>
       <otherwise>
         <let>
           <var n="number"/><clip pos="1" side="tl" part="a_nbr"/>
         </let>
       </otherwise>
  </choose>
  <!--<choose>
    <when>
     <test>  
       <equal>
          <clip pos="1" side="sl" part="a_pers"/>
          <lit-tag v="p2"/>
       </equal>
     </test>
     <let><var n="formality"/><lit-tag v="frm"/></let>
    </when>
     <otherwise>
     <let><var n="formality"/><lit v="FD"/></let>
     </otherwise>
  </choose>-->

  <out>
   <chunk name="subj-pron" case="caseFirstWord">
    <tags>
    <tag><lit-tag v="NP-pron"/></tag>
    <tag><var n="number"/></tag>
    <tag><clip pos="1" side="sl" part="a_pers"/></tag> 
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="nom"/></tag>
     
    </tags>
    <lu>
      <clip pos="1" side="tl" part="lem"/>
      <clip pos="1" side="tl" part="a_kaz_perspron"/>
      <clip pos="1" side="tl" part="a_pers"/>
      <lit-tag v="2"/> <!-- number -->
      <lit-tag v="4"/> <!-- possession -->
      <lit-tag v="5"/> <!-- case -->
    </lu>
  </chunk>
  </out>
 </action>
</rule>

<!-- я хочу гулять -->

<rule comment="NEW RULE: want to + infinitive"> <!--want to verb -->
  <pattern>

    <pattern-item n="vbmod-want-to"/>
    <pattern-item n="approx-inf-verb"/>  <!--I want to go - Менің барғым келеді-->
  </pattern>
<action>
  <call-macro n="default-nbr-pers"/>
<choose>
      <when>
        <test>
<or>
          <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="pres"/>
          </equal>
 <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="inf"/>
          </equal>
</or>
        </test>
            
        <out>
      <chunk name="VP_want_to">
      <tags>
        <tag><lit-tag v="VP_wantto"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><lit-tag v="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessive-->
        <tag><lit-tag v="NXD"/></tag> <!-- negative -->
	
      </tags>
      <b pos="1"/>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
    	   <lit-tag v="prc_vol"/>
	 <lit-tag v="3"/>
           <lit-tag v="2"/>
                  
        </lu>
        <b/> 
        <lu>
          <lit v="кел"/>
          <lit-tag v="vaux"/>
          <lit-tag v="aor"/>
         <lit-tag v="p3"/>
         <lit-tag v="2"/>
        </lu>
      </chunk>
  </out>
       
  </when> 
      <when>
        <test>

          <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="past"/>
          </equal>
        </test>
        <out>
      <chunk name="VP_want_to">
        <tags>
        <tag><lit-tag v="VP_wantto"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><lit-tag v="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessive-->
        <tag><lit-tag v="NXD"/></tag> <!-- negative -->

      </tags>
      <b pos="1"/>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
    	   <lit-tag v="prc_vol"/>
           <lit-tag v="3"/>
           <lit-tag v="2"/>
           
        </lu>
        <b/> 
        <lu>
          <lit v="кел"/>
         <lit-tag v="vaux"/>
	 <lit-tag v="ifi"/>
         <lit-tag v="p3"/>
         <lit-tag v="2"/>
        </lu>
      </chunk>
  </out>
      </when>
    </choose>
      </action>
</rule>

<!-- я хочу домой/ручку    али катееееееееееееееееееееееееееееееее -->
<!--rule comment="NEW RULE: want to + NP"> 
  <pattern>

    <pattern-item n="vbmod-want-to"/>
    <pattern-item n="nom"/>
  </pattern>
<action>
  <call-macro n="default-nbr-pers"/>
<call-macro n="choose_case_and_postposition2">
<with-param pos="1"/>
        <with-param pos="2"/>
      </call-macro>
<choose>
      <when>
        <test>
<or>
          <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="pres"/>
          </equal>
 <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="inf"/>
          </equal>
</or>
        </test>
            
        <out>
      <chunk name="VP_want_to_nom">
      <tags>
        <tag><lit-tag v="VP_wantto"/></tag>
        <tag><lit-tag v="ND"/></tag> 
        <tag><lit-tag v="PD"/></tag> 
        <tag><lit-tag v="tense"/></tag>
        <tag><lit-tag v="PXD"/></tag>
        <tag><lit-tag v="NXD"/></tag> 
	
      </tags>
      <b pos="1"/>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
    	   <lit-tag v="prc_vol"/>
	 <lit-tag v="3"/>
           <lit-tag v="2"/>
                  
        </lu>
        <b/> 
        <lu>
          <lit v="кел"/>
          <lit-tag v="vaux"/>
          <lit-tag v="aor"/>
         <lit-tag v="p3"/>
         <lit-tag v="2"/>
        </lu>
      </chunk>
  </out>
       
  </when> 
      <when>
        <test>

          <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="past"/>
          </equal>
        </test>
        <out>
      <chunk name="VP_want_to">
        <tags>
        <tag><lit-tag v="VP_wantto"/></tag>
        <tag><lit-tag v="ND"/></tag>
        <tag><lit-tag v="PD"/></tag> 
        <tag><lit-tag v="tense"/></tag>
        <tag><lit-tag v="PXD"/></tag>
        <tag><lit-tag v="NXD"/></tag>

      </tags>
      <b pos="1"/>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
    	   <lit-tag v="prc_vol"/>
           <lit-tag v="3"/>
           <lit-tag v="2"/>
           
        </lu>
        <b/> 
        <lu>
          <lit v="кел"/>
         <lit-tag v="vaux"/>
	 <lit-tag v="ifi"/>
         <lit-tag v="p3"/>
         <lit-tag v="2"/>
        </lu>
      </chunk>
  </out>
      </when>
    </choose>
      </action>
</rule-->

<!-- RULE noun`s noun ex: книга ученик -->
<rule comment="NEW RULE: pos-pron noun">  <!-- мой друг-->
  <pattern>
 <pattern-item n="subj-pron-pos"/>  <!--есімдік -->
 <pattern-item n="nom"/>  <!--зат есім -->
  </pattern>
  <action>  
	<choose>
  	<when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px1sg"/></let>
	</when>
 	 <when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px1sg"/></let>
	</when>
	<when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px1pl"/></let>
	</when>
<when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px1pl"/></let>
	</when>
	<when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="1" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px1sg"/></let>
	</when>
	<when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p1"/></equal>
			<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px1pl"/></let>
	</when>
	<when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
			<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px2sg"/></let>
	</when>
 	 <when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
			<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="sg"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px2sg"/></let>
	</when>
	<when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
			<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="sg"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px2pl"/></let>
	</when>


	<when> 
 	   <test>
		<and>    
			<equal><clip pos="1" side="sl" part="a_pers"/><lit-tag v="p2"/></equal>
			<equal><clip pos="1" side="sl" part="a_nbr"/><lit-tag v="pl"/></equal>
			<equal><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="pl"/></equal>		
		</and>
	   </test>
		     <let><var n="possessive"/><lit-tag v="px2pl"/></let>
	</when>
		<otherwise><let><var n="possessive"/><lit-tag v="px3sp"/></let></otherwise>
	</choose>
    <out>
    <chunk name="subj-pron-pos-noun">
    <tags>
    <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="tl" part="a_nbr"/></tag> 
    <tag><clip pos="2" side="tl" part="a_nbr"/></tag> 
    <tag><clip pos="1" side="sl" part="a_pers"/></tag> 
    <tag><var n="possessive"/> </tag> 
    <tag><clip pos="2" side="tl" part="a_case"/></tag>
    </tags>
    <lu>
    <clip pos="1" side="tl" part="lem"/>
      <clip pos="1" side="tl" part="a_kaz_pospron"/>
      <lit-tag v="4"/> <!-- number -->
      <lit-tag v="2"/> <!-- person -->
     <!-- <lit-tag v="nom"/>   -->
        <lit-tag v="gen"/> <!-- for мой дом/твой дом -->
    </lu>     <b pos="1"/>
       <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="3"/>                          
 	       <var n="possessive"/> 
  	       <lit-tag v="6"/>
    </lu>      		
    </chunk>
    </out>
  </action>
</rule>



<!-- RULE noun`s noun ex: книга ученик -->
<rule comment="NEW RULE: pos-pron noun">  <!-- меня зовут NP -->
  <pattern>
 <pattern-item n="subj-pron"/>  <!--есімдік -->
 <pattern-item n="zovut_pers-verb"/>  <!--етістік --> 
 <pattern-item n="NP"/>  <!--жалқы есім -->

  </pattern>
  <action>  
<call-macro n="build-possessive-from-pron">
         <with-param pos="1"/> 
     </call-macro>

 <call-macro n="NEW-build-noun-lu-2-4-5-sg">
      <with-param pos="3"/>
    </call-macro> 

 <choose>
    <when>
      <test>
       <equal>
         <clip pos="1" side="sl" part="a_nbr"/>
         <lit-tag v="sp"/>
       </equal>
      </test>
       <let><var n="number"/><lit-tag v="sg"/></let> <!-- choosing singular in the absence of information -->
    </when>
       <otherwise>
         <let>
           <var n="number"/><clip pos="1" side="tl" part="a_nbr"/>
         </let>
       </otherwise>
  </choose>
  <!--<choose>
    <when>
     <test>  
       <equal>
          <clip pos="1" side="sl" part="a_pers"/>
          <lit-tag v="p2"/>
       </equal>
     </test>
     <let><var n="formality"/><lit-tag v="frm"/></let>
    </when>
     <otherwise>
     <let><var n="formality"/><lit v="FD"/></let>
     </otherwise>
  </choose>-->

  <out>
    <chunk name="subj-pron-zovut-NP">
    <tags>
    <tag><lit-tag v="NP-pron"/></tag>
    <tag><var n="number"/></tag>
    <tag><clip pos="1" side="sl" part="a_pers"/></tag> 
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="nom"/></tag>
     
    </tags>
    <lu>
      <clip pos="1" side="tl" part="lem"/>
      <clip pos="1" side="tl" part="a_kaz_perspron"/>
      <clip pos="1" side="tl" part="a_pers"/>
      <lit-tag v="2"/> <!-- number -->
      <lit-tag v="4"/> <!-- possession -->
      <lit-tag v="gen"/> <!-- case -->
</lu>
<b/>
<lu>
               <lit v="ат"/>                          
 	       <lit-tag v="n"/> 
<var n="possessive"/>
  	       <lit-tag v="nom"/>
    </lu> 
<b/>
<lu>
      <var n="NEW-noun_lu"/>
    </lu>
</chunk>
</out>
    </action>
</rule>




<!-- Я ем\ел-->

<rule comment="NEW RULE: verb"> 
  <pattern>
    <pattern-item n="pers-verb"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>

      <when>
        <test>
          <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="pres"/>
          </equal>
        </test>
        <let><var n="tense"/><lit-tag v="aor"/></let>
      <call-macro n="NEW-gen-simple-verb">
         <with-param pos="1"/> 
     </call-macro>

      </when>

      <when>
        <test>
          <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="past"/>
          </equal>
        </test>
        <let><var n="tense"/><lit-tag v="ifi"/></let>
      <call-macro n="NEW-gen-simple-verb">
         <with-param pos="1"/> 
     </call-macro>
      </when>

      <otherwise>
        <let><var n="tense"/><lit-tag v="aor"/></let>
      <call-macro n="NEW-gen-simple-verb">
         <with-param pos="1"/> 
     </call-macro>
      </otherwise> 
    </choose>
  </action>
</rule>


<!-- я буду играть -->
<rule comment="NEW RULE: fut-verb"> 
  <pattern>
    <pattern-item n="budu-vbser"/>
<pattern-item n="approx-inf-verb"/> 

  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>

      <when>
        <test>
          <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="fut"/>
          </equal>
        </test>
        <let><var n="tense"/><lit-tag v="aor"/></let>
      <call-macro n="NEW-gen-simple-verb">
         <with-param pos="2"/> 
     </call-macro>

      </when>

          <otherwise>
        <let><var n="tense"/><lit-tag v="aor"/></let>
      <call-macro n="NEW-gen-simple-verb">
         <with-param pos="2"/> 
     </call-macro>
      </otherwise> 
    </choose>
  </action>
</rule>


<!-- я буду иметь  Балжан -->
<rule comment="NEW RULE: vbhaver-verb"> 
  <pattern>
    <pattern-item n="budu-vbser"/>
<pattern-item n="vbhaver-inf-verb"/> 

  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>

      <when>
        <test>
          <equal>
             <clip pos="1" side="sl" part="a_tense"/>
             <lit-tag v="fut"/>
          </equal>
        </test>
        <let><var n="tense"/><lit-tag v="aor"/></let>
<out>
      <chunk name="vbhaver-verb">
      <tags>
        <tag><lit-tag v="VP-vbhaver"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="6"/>
          <lit-tag v="4"/>
          <lit-tag v="5"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
          <lit-tag v="7"/>
        </lu>
      </chunk>
        </out>

      </when>

          <otherwise>
        <let><var n="tense"/><lit-tag v="aor"/></let>
      <call-macro n="NEW-gen-simple-verb">
         <with-param pos="2"/> 
     </call-macro>
      </otherwise> 
    </choose>
  </action>
</rule>

<!-- comment=¨REGLA: NUM¨-->


<rule comment="NEW RULE: det num noun1 noun2"> <!-- three good football players-->
  <pattern>
    <pattern-item n="det"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
    <call-macro n="NEW-build-noun-lu-2-4-5-sg"> <with-param pos="4"/> </call-macro> 
     <call-macro n="build-num-lu"> <with-param pos="2"/> </call-macro> 

<choose>
  <when> <!-- Demonstrative -->
    <test> <or>
<equal><clip pos="1" side="sl" part="a_dem"/><lit-tag v="dem"/></equal>
 <equal><clip pos="1" side="sl" part="a_dem"/><lit-tag v="qnt"/></equal>
</or> </test>
    <out>
    <chunk name="detdem-num-nom">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="4" side="tl" part="a_nbr"/></tag> <!-- number placeholder: use 'semantic' number for SL -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags> 
     <lu>
      <clip pos="1" side="tl" part="lem"/>
      <clip pos="1" side="tl" part="a_det"/>
      <clip pos="1" side="tl" part="a_dem"/>
    </lu> <b pos="1"/>
    <lu> <var n="num_lu"/> </lu> <b pos="2"/>
    <lu>  
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_nbr"/>
     <lit-tag v="nom"/>
     </lu> <b pos="3"/>
 <lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
  </when>
  
  <when> 
    <test><equal><clip pos="1" side="sl" part="a_pos"/><lit-tag v="pos"/></equal></test>
    <call-macro n="build-possessive-from-possessive-determiner"> <with-param pos="1"/> </call-macro>
    <out>
    <chunk name="detpos-num-nom">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="4" side="tl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><var n="possessive"/></tag> <!-- possessor computed from possessive determiner -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
  <lu> <clip pos="1" side="tl" part="whole"/> </lu> <b pos="1"/>
  <lu> <var n="num_lu"/> </lu> <b pos="2"/>
    <lu> 
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_nbr"/>
     <lit-tag v="nom"/>
    </lu> <b pos="3"/>
    <lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
  </when>

  <otherwise>
    <out>
    <chunk name="detart-num-nom"> <!-- the three good football players-->
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="4" side="tl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="px3sp"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags> 
    <lu> <var n="num_lu"/> </lu> <b pos="2"/>
   <lu> 
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_nbr"/>
     <lit-tag v="nom"/>
    </lu> <b pos="3"/>
    <lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
    <call-macro n="out-blank-if-not-single-space"> <with-param pos="1"/> </call-macro>
  </otherwise>
</choose>
  </action>
</rule>

 
<rule comment="NEW RULE: det num noun"> 
  <pattern>
    <pattern-item n="det"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
    <call-macro n="NEW-build-noun-lu-2-4-5-sg"> <with-param pos="3"/> </call-macro> 
     <call-macro n="build-num-lu"> <with-param pos="2"/> </call-macro>

<choose>
  <when> <!-- Demonstrative -->
    <test> <or>
<equal><clip pos="1" side="sl" part="a_dem"/><lit-tag v="dem"/></equal>
 <equal><clip pos="1" side="sl" part="a_dem"/><lit-tag v="qnt"/></equal>
</or> </test>
    <out>
    <chunk name="detdem-num-nom">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="sl" part="a_nbr"/></tag> <!-- number placeholder: use 'semantic' number for SL -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
     <lu>
      <clip pos="1" side="tl" part="lem"/>
      <clip pos="1" side="tl" part="a_det"/>
      <clip pos="1" side="tl" part="a_dem"/>
    </lu> <b pos="1"/>
    <lu> <var n="num_lu"/> </lu> <b pos="2"/>
    <lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
  </when>
  
  <when> 
    <test><equal><clip pos="1" side="sl" part="a_pos"/><lit-tag v="pos"/></equal></test>
    <call-macro n="build-possessive-from-possessive-determiner"> <with-param pos="1"/> </call-macro>
    <out>
    <chunk name="detpos-num-nom">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><var n="possessive"/></tag> <!-- possessor computed from possessive determiner -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
  <lu> <clip pos="1" side="tl" part="whole"/> </lu> <b pos="1"/>
  <lu> <var n="num_lu"/> </lu> <b pos="2"/>
  <lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
  </when>

  <otherwise>
    <out>
    <chunk name="detart-num-nom">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
    <lu> <var n="num_lu"/> </lu> <b pos="2"/>
    <lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
    <call-macro n="out-blank-if-not-single-space"> <with-param pos="1"/> </call-macro>
  </otherwise>
</choose>
  </action>
</rule>


<rule comment="NEW RULE: num">  
  <pattern>
    <pattern-item n="num"/>
  </pattern>
  <action>
   <call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
    <out>
    <chunk name="num">
    <tags> <tag><lit-tag v="AdvP"/></tag> </tags>
    <lu> <var n="num_lu"/> </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: noun adj noun">   <!-- Aliya -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="adj"/>
    <pattern-item n="nom-gen"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="1"/> </call-macro> 
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
<call-macro n="select-case"> <with-param pos="1"/> </call-macro>
    <out>
    <chunk name="noun-adj-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><var n="case"/></tag>    
    </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_nbr"/>
     <lit-tag v="gen"/>
    </lu> <b/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
                <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: num abbr abbr">  <!-- Aliya 30.06.17 -->        <!-- 451 млн т - 451 млн т -->
  <pattern>
    <pattern-item n="num"/>
    <pattern-item n="abbr"/>
    <pattern-item n="abbr"/>
  </pattern>
  <action>
   <call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
    <out>
    <chunk name="num-abbr2">
    <tags> <tag><lit-tag v="AdvP"/></tag> </tags>
    <lu> <var n="num_lu"/> </lu><b/>
            <lu>
    		 <clip pos="2" side="tl" part="lem"/> 
    		 <clip pos="2" side="tl" part="a_abbr"/>
            </lu><b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_abbr"/>
            </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: num abbr">  <!-- Aliya 01.07.17 -->        <!-- 451 млн - 451 млн -->
  <pattern>
    <pattern-item n="num"/>
    <pattern-item n="abbr"/>
  </pattern>
  <action>
   <call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
    <out>
    <chunk name="num-abbr">
    <tags> <tag><lit-tag v="AdvP"/></tag> </tags>
    <lu> <var n="num_lu"/> </lu><b/>
            <lu>
    		 <clip pos="2" side="tl" part="lem"/> 
    		 <clip pos="2" side="tl" part="a_abbr"/>
            </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: num abbr abbr-abbr">  <!-- Aliya 01.07.17 -->        <!-- 48 млрд т-км - 48 млрд т-км -->
  <pattern>
    <pattern-item n="num"/>
    <pattern-item n="abbr"/>
    <pattern-item n="abbr"/>
    <pattern-item n="guio"/>
    <pattern-item n="abbr"/>
  </pattern>
  <action>
   <call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
    <out>
    <chunk name="num-abbr2-abbr">
    <tags> <tag><lit-tag v="AdvP"/></tag> </tags>
    <lu> <var n="num_lu"/> </lu><b/>
            <lu>
    		 <clip pos="2" side="tl" part="lem"/> 
    		 <clip pos="2" side="tl" part="a_abbr"/>
            </lu><b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_abbr"/>
            </lu>
            <lu><clip pos="4" side="tl" part="whole"/></lu>
            <lu>
    		 <clip pos="5" side="tl" part="lem"/> 
    		 <clip pos="5" side="tl" part="a_abbr"/>
            </lu>
    </chunk>
    </out>
  </action>
</rule>

<rule comment="NEW RULE: num noun"> <!-- Balzhan 18.07.2017 -->
  <pattern>
    <pattern-item n="num"/>
    <pattern-item n="defis"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition1">
        <with-param pos="2"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
        <out>
          <chunk name="num-defis-n_nom"> <!-- 1880-ые годы - 1880 жылдар -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu> <b/>
	<lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/>
               <clip pos="3" side="tl" part="a_case"/>
	</lu>
          </chunk>
        </out>
  </action>
</rule>

<rule comment="NEW RULE: prep num-time num noun"> <!-- Aliya 02.08.2017 -->
  <pattern>
    <pattern-item n="prep-k"/>
    <pattern-item n="num-time"/>
    <pattern-item n="num"/>
    <pattern-item n="defis"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition1">
        <with-param pos="4"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="3"/></call-macro> 
        <out>
          <chunk name="prepk-time-num-defis-n_nom"> <!-- к середине 1980-х годов - 1880 жылдар -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu> <b/>
	<lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <clip pos="5" side="tl" part="a_nbr"/>
               <clip pos="5" side="tl" part="a_case"/>
	</lu> <b/>
	<lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_nbr"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="dat"/>
	</lu>
          </chunk>
        </out>
  </action>
</rule>

<rule comment="NEW RULE: num noun1 noun2"> 
  <pattern>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5-sg"> <with-param pos="3"/> </call-macro>
<call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
    <out>
    <chunk name="num-noun2">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="tl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="px3sp"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
    <lu> <var n="num_lu"/> </lu> <b pos="1"/>
<lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_nbr"/>
     <lit-tag v="nom"/>
</lu> <b pos="2"/>
	<lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: num noun"> <!-- Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition1">
        <with-param pos="2"/>
      </call-macro>
<choose>
         <when>
           <test><equal><clip side="sl" pos="1" part="lem"/><lit v="один"/></equal></test>
           <let><clip pos="2" side="tl" part="a_case"/><lit-tag v="nom"/></let>
           <let><clip pos="2" side="tl" part="a_nbr"/><lit-tag v="sg"/></let>
         </when>
</choose>
<call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
  <choose> <!-- Balzhan for шесть домов - алты үйлер 11.07.2017-->
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let> <clip pos="2" side="tl" part="a_case"/><lit-tag v="nom"/></let>
         </when>
</choose> 
        <out>
          <chunk name="num-n_nom"> <!-- 18 мая - 18 мамырдың -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu> <b/>
	<lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_nbr"/>
               <clip pos="2" side="tl" part="a_case"/>
	</lu>
          </chunk>
        </out>
  </action>
</rule>

<rule comment="NEW RULE: prep num-time num noun"> <!-- Aliya 02.08.2017 -->
  <pattern>
    <pattern-item n="prep-k"/>
    <pattern-item n="num-time"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition1">
        <with-param pos="4"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="3"/></call-macro> 
        <out>
          <chunk name="prepk-time-num-n_nom"> <!-- к середине 1980 годов - 1880 жылдар ортасына -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu> <b/>
	<lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/>
               <clip pos="4" side="tl" part="a_case"/>
	</lu> <b/>
	<lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_nbr"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="dat"/>
	</lu>
          </chunk>
        </out>
  </action>
</rule>



<rule comment="NEW RULE: num noun"> 
  <pattern>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5-sg"> <with-param pos="2"/> </call-macro>
<call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
    <out>
    <chunk name="num-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><clip part="a_case" pos="1" side="sl"/></tag> <!-- case placeholder -->
    </tags>
    <lu><var n="num_lu"/></lu> <b pos="1"/>
    <lu><var n="NEW-noun_lu"/></lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: prep C num noun"> <!-- Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="prep-c"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 
        <out>
          <chunk name="prep-num-n_abl"> <!-- С 1918 года - 1918 жылдан -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu> <b/>
	<lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <lit-tag v="abl"/>   
	</lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: prep C num noun"> <!-- Aliya 27.07.2017 -->
  <pattern>
    <pattern-item n="prep-c"/>
    <pattern-item n="num"/>
    <pattern-item n="defis"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 <choose>
 <when>
        <test><equal><clip pos="3" side="sl" part="lem"/><lit v="-х"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let> </when>
<otherwise>
 <let> <var n="possessive"/><lit-tag v="px3sp"/></let>
        <let><var n="case"/><lit-tag v="nom"/></let> 
</otherwise>
</choose>
 
        <out>
          <chunk name="prep-num-defis-n_abl"> <!-- С 1918-x годов - 1918 жылдан -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu> <b/>
	<lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/> 
               <lit-tag v="abl"/>   
	</lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: prep V num noun"> <!--Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="prep-v"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 
        <out>
          <chunk name="prep-num-n_nom">   <!--В 1385 году - 1385 жыл -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu> <b/>
	<lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <lit-tag v="nom"/>   
	</lu>
          </chunk>
        </out>
  </action>
</rule>

<rule comment="NEW RULE: prep V num noun"> <!-- Balzhan 18.07.2017 -->
  <pattern>
    <pattern-item n="prep-v"/>
    <pattern-item n="num"/>
    <pattern-item n="defis"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 <choose>
 <when>
        <test><equal><clip pos="3" side="sl" part="lem"/><lit v="-х"/></equal></test>
        <let><var n="case"/><lit-tag v="loc"/></let> </when>
<otherwise>
 <let> <var n="possessive"/><lit-tag v="px3sp"/></let>
        <let><var n="case"/><lit-tag v="nom"/></let> 
</otherwise>
</choose>
        <out>
          <chunk name="prep-num-defis-n_nom">  <!-- В 1385-х годах - 1385 жылдарда -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu> <b/>
	<lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <var n="possessive"/>
               <clip pos="4" side="tl" part="a_nbr"/> 
               <var n="case"/>   
	</lu>
          </chunk>
        </out>
  </action>
</rule>



<rule comment="NEW RULE: noun num-num noun"> <!-- Aliya 18.07.2017 -->
  <pattern>
    <pattern-item n="nom"/>
    <pattern-item n="num"/>
    <pattern-item n="defis"/>
    <pattern-item n="guio"/>
    <pattern-item n="num"/>
    <pattern-item n="defis"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="7"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-num-lu1"><with-param pos="5"/></call-macro> 
 <choose>
 <when>
        <test><and>
		<equal><clip pos="3" side="sl" part="lem"/><lit v="-х"/></equal>
		<equal><clip pos="6" side="sl" part="lem"/><lit v="-х"/></equal>
	</and></test>
        <let><var n="case"/><lit-tag v="loc"/></let> </when>
<otherwise>
        <let> <var n="possessive"/><lit-tag v="px3sp"/></let>
        <let><var n="case"/><lit-tag v="nom"/></let> 
</otherwise>
</choose>
 
        <out>
          <chunk name="n-num-defis-2-n"> <!-- реформы 1860-х — 1870-х годов - 1860—1870 жылдардың реформасы -->
            <tags><tag><var n="pptag"/></tag>
    <tag><clip pos="7" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
	<lu><var n="num_lu"/></lu>
        <lu>
               <clip pos="4" side="tl" part="whole"/> 
        </lu>
	<lu><var n="num_lu1"/></lu> <b/>
	<lu>
               <clip pos="7" side="tl" part="lem"/> 
               <clip pos="7" side="tl" part="a_nom"/>
               <clip pos="7" side="tl" part="a_nbr"/> 
               <clip pos="7" side="tl" part="a_case"/> 
	</lu> <b/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <clip pos="1" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
          </chunk>
        </out>
  </action>
</rule>





<rule comment="NEW RULE: prep V num-num noun"> <!-- Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="prep-v"/>
    <pattern-item n="num"/>
    <pattern-item n="guio"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="5"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-num-lu1"><with-param pos="4"/></call-macro> 
 
        <out>
          <chunk name="prepv-num-num-n"> <!-- В 1921—1929 годах - 1921-1929 жылдар -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu>
        <lu>
               <clip pos="3" side="tl" part="whole"/> 
        </lu>
	<lu><var n="num_lu1"/></lu> <b/>
	<lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <clip pos="5" side="tl" part="a_nbr"/>
               <lit-tag v="nom"/>   
	</lu>
          </chunk>
        </out>
  </action>
</rule>




<rule comment="NEW RULE: prep V num-num noun"> <!-- Aliya 18.07.2017 -->
  <pattern>
    <pattern-item n="prep-v"/>
    <pattern-item n="num"/>
    <pattern-item n="defis"/>
    <pattern-item n="guio"/>
    <pattern-item n="num"/>
    <pattern-item n="defis"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="7"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-num-lu1"><with-param pos="5"/></call-macro> 
 <choose>
 <when>
        <test><and>
		<equal><clip pos="3" side="sl" part="lem"/><lit v="-х"/></equal>
		<equal><clip pos="6" side="sl" part="lem"/><lit v="-х"/></equal>
	</and></test>
        <let><var n="case"/><lit-tag v="loc"/></let> </when>
<otherwise>
        <let> <var n="possessive"/><lit-tag v="px3sp"/></let>
        <let><var n="case"/><lit-tag v="nom"/></let> 
</otherwise>
</choose>
 
        <out>
          <chunk name="prepv-num-defis-2-n"> <!-- В 1921-х—1929-х годах - 1921-1929 жылдар -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu>
        <lu>
               <clip pos="4" side="tl" part="whole"/> 
        </lu>
	<lu><var n="num_lu1"/></lu> <b/>
	<lu>
               <clip pos="7" side="tl" part="lem"/> 
               <clip pos="7" side="tl" part="a_nom"/>
               <var n="possessive"/>
               <clip pos="7" side="tl" part="a_nbr"/> 
               <var n="case"/>   
	</lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: prep DO num noun"> <!-- Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="prep-do"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 
        <out>
          <chunk name="prep-num-n_dat">    <!--  до 1957 года - 1957 жылға дейін -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu>
            <b/>
	<lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <lit-tag v="dat"/>   
	</lu><b/> 
        <lu>
          <lit v="дейін"/>
          <lit-tag v="post"/>	
        </lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: prep Na num noun"> <!-- Aliya 01.07.2017 -->
  <pattern>
    <pattern-item n="prep-na"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 
        <out>
          <chunk name="prep-num-n_loc">    <!--  на 19 месте - 19 орында -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu>
            <b/>
	<lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <lit-tag v="loc"/>   
	</lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: num-num noun"> <!-- Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="num"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
<call-macro n="build-num-lu1"><with-param pos="2"/></call-macro> 
 
        <out>
          <chunk name="num-num-n"> <!-- 2013−2014 годы - 2013-2014 жылдары -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu>
        <lu>
          <lit v="-"/>
          <lit-tag v="guio"/>	
        </lu>
	<lu><var n="num_lu1"/></lu> <b/>
	<lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/>
               <clip pos="3" side="tl" part="a_case"/>
	</lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: num cnjcoo num noun"> <!-- Aliya 11.06.2017 -->
  <pattern>
    <pattern-item n="num"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
<call-macro n="build-num-lu"><with-param pos="1"/></call-macro> 
<call-macro n="build-num-lu1"><with-param pos="3"/></call-macro> 
 
        <out>
          <chunk name="num-cnjcoo-num-n"> <!-- 2013−2014 годы - 2013-2014 жылдары -->
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu><b/>
        <lu><clip pos="2" side="tl" part="lem"/> <lit-tag v="cnjcoo"/></lu><b/>
	<lu><var n="num_lu1"/></lu><b/>
	<lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/>
               <lit-tag v="nom"/>
	</lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: prep num-num noun"> <!-- Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="num"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-num-lu1"><with-param pos="3"/></call-macro> 
 
        <out>
          <chunk name="pr-num-num-n">
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu>
        <lu>
          <lit v="-"/>
          <lit-tag v="guio"/>	
        </lu>
	<lu><var n="num_lu1"/></lu> <b/>
	<lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/>
               <clip pos="4" side="tl" part="a_case"/>
	</lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: v techenie num-num noun"> <!-- Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="techenie"/>
    <pattern-item n="num"/>
    <pattern-item n="guio"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-num-lu1"><with-param pos="4"/></call-macro> 
 
        <out>
          <chunk name="vtechenie-num-num-n">
            <tags><tag><var n="pptag"/></tag></tags>
	<lu><var n="num_lu"/></lu>
        <lu>
               <clip pos="3" side="tl" part="whole"/> 
        </lu>
	<lu><var n="num_lu1"/></lu> <b/>
	<lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <clip pos="5" side="tl" part="a_nbr"/>
               <clip pos="5" side="tl" part="a_case"/>
	</lu> <b/>
        <lu>
          <lit v="аралық"/>
          <lit-tag v="n"/>	
          <lit-tag v="px3sp"/>	
          <lit-tag v="loc"/>	
        </lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: prep num noun and noun1 noun2">    <!-- Aliya 07.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="nom"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out>
          <chunk name="prep-num-n-and-n2-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> 
               <clip pos="6" side="tl" part="lem"/> 
               <clip pos="6" side="tl" part="a_nom"/>
               <clip pos="6" side="tl" part="a_nbr"/> 
               <clip pos="6" side="tl" part="a_case"/> 
               <!--lit-tag v="gen"/--> 
            </lu><b/>
            <lu> <var n="num_lu"/> </lu><b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
    	       <clip pos="4" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise>
        <out>
          <chunk name="prep-num-n-and-n2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="6" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> 
               <clip pos="6" side="tl" part="lem"/> 
               <clip pos="6" side="tl" part="a_nom"/>
               <clip pos="6" side="tl" part="a_nbr"/> 
               <clip pos="6" side="tl" part="a_case"/> 
               <!--lit-tag v="gen"/--> 
            </lu><b/>
            <lu> <var n="num_lu"/> </lu><b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
    	       <clip pos="4" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep num noun">    <!-- Aliya 22.06.2017 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-num-nom1-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="num_lu"/> </lu> <b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <clip pos="3" side="tl" part="a_case"/> 
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise>
        <out>
          <chunk name="prep-num-nom1">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="4"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="num_lu"/> </lu><b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <clip pos="3" side="tl" part="a_case"/> 
            </lu><b/>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<!-- rule comment="NEW RULE: prep num noun1 noun2"> 
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out>
          <chunk name="prep-num-nom2-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="num_lu"/> </lu> <b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <lit-tag v="nom"/> 
            </lu> <b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="sg"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise>
        <out>
          <chunk name="prep-num-nom2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="4"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="num_lu"/> </lu><b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/> 
               <lit-tag v="nom"/> 
            </lu><b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="sg"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule -->


<rule comment="NEW RULE: infinitive - verb"> 
  <pattern>
    <pattern-item n="approx-inf-verb"/>
  </pattern>
  <action>
     <let><var n="tense"/><lit-tag v="aor"/></let> 
      <call-macro n="NEW-gen-simple-verb"> <with-param pos="1"/> </call-macro>
  </action>
</rule>


<rule comment="NEW RULE: byt' + infinitive"> <!--я буду играть -->
  <pattern>
    <pattern-item n="vbmod"/>
    <pattern-item n="approx-inf-verb"/>  <!--Я буду играть -  Мен ойнаймын-->
  </pattern>
  <action>
    <call-macro n="default-nbr-pers"/>
        <out>
      <chunk name="must-inf">
      <tags>
        <tag><lit-tag v="VP_byt'_inf"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><lit-tag v="ger"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessive-->
        <tag><lit-tag v="NXD"/></tag> <!-- negative -->
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
    	   <lit-tag v="4"/>
           <lit-tag v="5"/>
           <lit-tag v="nom"/>
        </lu> <b/> 
        <lu>
          <lit v="керек"/>
         <lit-tag v="n"/>
          <lit-tag v="nom"/>	
        </lu>
      </chunk>
  </out>
  </action>
</rule>


<!-- rule for NUM the end-->

<!-- editing a rule stolen from apertium-eng-kaz -->

<rule comment="RULE: noun">  
  <pattern>
    <pattern-item n="nom"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="1"/> </call-macro> 
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro> 
  <let> <var n="possessive"/><lit-tag v="PXD"/></let>
    <out>
    <chunk name="nom">
    <tags>
    <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><var n="possessive"/></tag> <!-- possessor placeholder -->
    <tag><var n="case"/></tag> <!-- case placeholder -->
    </tags>
    <lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: adj">     <!-- Aliya -->
  <pattern>
    <pattern-item n="adj"/>
  </pattern>
  <action>
   <call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 
    <out>
    <chunk name="adj">
    <tags> <tag><lit-tag v="AdjP"/></tag>
	<tag><lit-tag v="subst"/></tag>
	<tag><lit-tag v="CD"/></tag>
    </tags>
    <lu>
	<var n="adjec_lu"/> 
	<lit-tag v="2"/>
	<lit-tag v="3"/>
     </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: adj np"> <!-- добрый Ягайло - көңілшек Ягайло -->   <!-- Aliya 10.06.2017 -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 

      <choose>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="CD"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>

    <out>
    <chunk name="adj-np_ant-top-cog">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
        <lu><var n="adjec_lu"/></lu><b/>
	<lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_nom"/>
	  <clip pos="2" side="tl" part="a_gender"/>
	  <clip pos="2" side="tl" part="a_case"/>
          </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: prep adj noun adj noun">      <!-- Aliya 28.06.2017 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="4"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adj-n-adj-n-post">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
	<lu>
          <clip pos="5" side="tl" part="lem"/>
	  <clip pos="5" side="tl" part="a_nom"/>
	  <clip pos="5" side="tl" part="a_nbr"/>
	  <clip pos="5" side="tl" part="a_case"/>
          </lu><b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="px3sp"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adj-n-adj-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
	<lu>
          <clip pos="5" side="tl" part="lem"/>
	  <clip pos="5" side="tl" part="a_nom"/>
	  <clip pos="5" side="tl" part="a_nbr"/>
	  <clip pos="5" side="tl" part="a_case"/>
          </lu><b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="px3sp"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: adj np adj noun">      <!-- Aliya 20.07.2017 -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="adj"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="3"/>
        <with-param pos="4"/>
     </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="3"/></call-macro> 
 
        <out>
          <chunk name="adj-np-adj-n">
            <tags> <tag><lit-tag v="NP"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
	<lu>
          <clip pos="4" side="tl" part="lem"/>
	  <clip pos="4" side="tl" part="a_nom"/>
          <clip pos="4" side="tl" part="a_gender"/>
	  <clip pos="4" side="tl" part="a_case"/>
          </lu><b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
       	       <clip pos="2" side="tl" part="a_nbr"/>
	       <clip pos="2" side="tl" part="a_case"/>
            </lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: adj noun adj noun">      <!-- Aliya 28.06.2017 -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="3"/>
        <with-param pos="4"/>
     </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="3"/></call-macro> 
 
        <out>
          <chunk name="adj-n-adj-n">
            <tags> <tag><lit-tag v="NP"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
	<lu>
          <clip pos="4" side="tl" part="lem"/>
	  <clip pos="4" side="tl" part="a_nom"/>
	  <clip pos="4" side="tl" part="a_nbr"/>
	  <clip pos="4" side="tl" part="a_case"/>
          </lu><b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="px3sp"/> <!-- for possessive, just in case -->
	      <clip pos="2" side="tl" part="a_case"/>
            </lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: adj noun"> <!-- добрый человек - көңілшек адам -->   <!-- Aliya 22.08.17-->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 

      <choose>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="loc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>
      <choose>
         <when>
           <test><equal><clip side="sl" pos="2" part="a_nbr"/><lit-tag v="pl"/></equal></test>
           <let><var n="number"/><lit-tag v="pl"/></let>
         </when>
         <otherwise><let><var n="number"/><lit v=""/></let></otherwise>
      </choose>

    <out>
    <chunk name="adj-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
        <lu><var n="adjec_lu"/></lu><b/>
	<lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_nom"/>
	  <var n="number"/>
	  <var n="case"/>
          </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: prep num adj noun">      <!-- Aliya 30.06.17 -->          <!-- В семи крупнейших городах - жеті ірі қалаларда -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="num"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="3"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-num-adjec-n-post">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
            </lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-num-adj-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
            </lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep adj noun">      <!-- Aliya -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adjec-nom-post">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adj-nom">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep samyi adj noun">      <!-- Aliya 24.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="samyi"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="3"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-samyi-adjec-nom-post">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu><lit v="ең"/><lit-tag v="adv"/></lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-samyi-adj-nom">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu><lit v="ең"/><lit-tag v="adv"/></lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep adv adj noun">      <!-- Aliya 11.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adv"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="3"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adv-adjec-nom-post">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
             <clip pos="2" side="tl" part="lem"/> 
             <clip pos="2" side="tl" part="a_adv"/>
            </lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adv-adj-nom">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
             <clip pos="2" side="tl" part="lem"/> 
             <clip pos="2" side="tl" part="a_adv"/>
            </lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: adj adj noun">   <!-- Aliya -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro> 
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="2"/></call-macro> 
    <out>
    <chunk name="adj-adj-noun">
    <tags>
    <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
	    <lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: adj adj noun">   <!-- Aliya 05.08.17 -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="adj"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro> 
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="2"/></call-macro> 
<call-macro n="build-adjec-lu2"><with-param pos="3"/></call-macro> 
    <out>
    <chunk name="adj-adj-adj-noun">
    <tags>
    <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="4" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu> <var n="adjec_lu2"/> </lu> <b/>
	    <lu> <var n="NEW-noun_lu"/> </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: prep noun adj3 noun">    <!-- Aliya 05.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="adj"/>
    <pattern-item n="adj"/>
    <pattern-item n="adj"/>
    <pattern-item n="nom-gen"/>
  </pattern>
  <action>
<call-macro n="build-adjec-lu"><with-param pos="3"/></call-macro>
<call-macro n="build-adjec-lu1"><with-param pos="4"/></call-macro> 
<call-macro n="build-adjec-lu2"><with-param pos="5"/></call-macro> 
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="6"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-adj3-n-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="6" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu> <var n="adjec_lu2"/> </lu> <b/>
            <lu>
               <clip pos="6" side="tl" part="lem"/> 
               <clip pos="6" side="tl" part="a_nom"/>
               <clip pos="6" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu><b/>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-adj3-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="6" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu> <var n="adjec_lu2"/> </lu> <b/>
            <lu>
               <clip pos="6" side="tl" part="lem"/> 
               <clip pos="6" side="tl" part="a_nom"/>
               <clip pos="6" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu><b/>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu>   
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep adj adj noun">      <!-- Aliya -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adj"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="3"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adj-adj-noun-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adj-adj-noun">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep noun adj noun">    <!-- Aliya -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="adj"/>
    <pattern-item n="nom-gen"/>
  </pattern>
  <action>
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
     <call-macro n="build-adjec-lu"><with-param pos="3"/></call-macro>
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro> 
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-nom-adj-nom-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-adj-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu><b/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu>   
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: adjec noun noun">
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="nom-gen"/>
  </pattern>
  <action>
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro>  
    <out>
    <chunk name="adj-noun-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="tl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="px3sp"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_nbr"/>
     <lit-tag v="gen"/>
    </lu> <b/>
    <lu> <var n="adjec_lu"/> </lu> <b/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/> <!-- number -->
     <lit-tag v="px3sp"/><!-- for possessive, just in case -->
     <clip pos="2" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
      </action>
</rule>


<rule comment="NEW RULE: prep adj noun noun">   <!-- Aliya -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="nom-gen"/>
  </pattern>
  <action>
     <call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro>
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro> 
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro> 
     <call-macro n="select-case"> <with-param pos="3"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adj-nom-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adj-n-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu><b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep np-ant">    <!-- Aliya 28.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro>
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-np_ant-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_gender"/>
               <lit-tag v="5"/> <!-- for case -->
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-np_ant">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu>  
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_gender"/>
               <lit-tag v="5"/> <!-- for case -->
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep noun">    <!-- Aliya -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro>
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-nom-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-nom">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: neg prep noun">    <!-- Aliya 31.07.17 -->
  <pattern>
    <pattern-item n="ne-negative"/>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="2"/>
        <with-param pos="3"/>
     </call-macro>
        <out>
          <chunk name="neg-prep-noun">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/> 
               <lit-tag v="5"/> 
            </lu> <b/>
            <lu><clip pos="1" side="tl" part="whole"/></lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: prep prn">    <!-- Aliya 09.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="nee-nego"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro>
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-neeornego-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.dem"/>
          <lit-tag v="5"/>
    </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-neeornego">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.dem"/>
          <lit-tag v="5"/>
        </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep prn">    <!-- Aliya 24.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="subj-pron"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro>
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-prn-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
    <lu>
      <clip pos="2" side="tl" part="lem"/>
      <clip pos="2" side="tl" part="a_kaz_perspron"/>
      <clip pos="2" side="tl" part="a_pers"/>
      <clip pos="2" side="tl" part="a_nbr"/>
      <lit-tag v="4"/> <!-- possession -->
      <clip pos="2" side="tl" part="a_case"/>
    </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-prn">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
    <lu>
      <clip pos="2" side="tl" part="lem"/>
      <clip pos="2" side="tl" part="a_kaz_perspron"/>
      <clip pos="2" side="tl" part="a_pers"/>
      <clip pos="2" side="tl" part="a_nbr"/>
      <lit-tag v="4"/> <!-- possession -->
      <clip pos="2" side="tl" part="a_case"/>
    </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>



<rule comment="NEW RULE: prep n adj n">    <!-- Aliya 01.07.2017 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="build-adjec-lu"><with-param pos="4"/></call-macro> 
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro>
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-cnjcoo-adj-n-post">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu><var n="adjec_lu"/></lu><b/>
	<lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
          </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-cnjcoo-adj-n">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu><var n="adjec_lu"/></lu><b/>
	<lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
          </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>

<rule comment="RULE: kajdyi noun"> <!-- Aliya 04.08.17 -->
      <pattern>
        <pattern-item n="kajdyi"/>
        <pattern-item n="nom"/> 
      </pattern>
      <action>
    <out>
    <chunk name="kajdyi-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="tl" part="a_nbr"/></tag> 
    <tag><var n="possessive"/> </tag> 
    <tag><clip pos="2" side="tl" part="a_case"/></tag>
    </tags>
        <lu>
          <lit v="әрбір"/>
          <lit-tag v="det.qnt"/>
        </lu>
       <b/>
       <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_nbr"/>
               <clip pos="2" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
      </action>
    </rule>


<rule comment="NEW RULE: kajdyi noun np ant cog">    <!-- Aliya 04.08.17 -->
  <pattern>
    <pattern-item n="kajdyi"/>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
  <call-macro n="select-case"> <with-param pos="3"/> </call-macro>

    <out>
    <chunk name="kajdyi-nom-np_anttopcog">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="sl" part="a_nbr"/></tag> 
    <tag><lit-tag v="p3"/></tag> 
    <tag><lit-tag v="PXD"/></tag> 
    <tag><lit-tag v="CD"/></tag> 
    </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu><b/>
        <lu>
          <lit v="әрбір"/><lit-tag v="det.qnt"/>
        </lu><b/>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="px3sp"/>
     <clip pos="2" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: prep kajdyi noun">      <!-- Aliya 04.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="kajdyi"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-kajdyi-nom-post">
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
        <lu><lit v="әрбір"/><lit-tag v="det.qnt"/></lu><b/>
            <lu>  
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-kajdyi-nom">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
        <lu><lit v="әрбір"/><lit-tag v="det.qnt"/></lu><b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep kajdyi num noun">    <!-- Aliya 04.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="kajdyi"/>
    <pattern-item n="num"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
      </call-macro>
<call-macro n="build-num-lu"><with-param pos="3"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-kajdyi-num-nom1-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu><lit v="әрбір"/><lit-tag v="det.qnt"/></lu><b/>
            <lu> <var n="num_lu"/> </lu> <b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/> 
               <clip pos="4" side="tl" part="a_case"/> 
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise>
        <out>
          <chunk name="prep-kajdyi-num-nom1">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="4"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu><lit v="әрбір"/><lit-tag v="det.qnt"/></lu><b/>
            <lu> <var n="num_lu"/> </lu><b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/> 
               <clip pos="4" side="tl" part="a_case"/> 
            </lu><b/>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: np and adj noun"> <!-- СССР и социалистические страны - КСРО мен социалистік елдер -->   <!-- Aliya 05.08.17 -->
  <pattern>
    <pattern-item n="np-anttopcog"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="build-adjec-lu"><with-param pos="3"/></call-macro> 

    <out>
    <chunk name="np-and-adj-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="4" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
	<lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_nom"/>
	  <clip pos="1" side="tl" part="a_gender"/>
	  <clip pos="1" side="tl" part="a_case"/>
          </lu><b/>
            <lu>
    		 <clip pos="2" side="tl" part="lem"/> 
    		 <clip pos="2" side="tl" part="a_cnjcoo"/>
            </lu><b/>
        <lu><var n="adjec_lu"/></lu><b/>
	<lu>
          <clip pos="4" side="tl" part="lem"/>
	  <clip pos="4" side="tl" part="a_nom"/>
	  <clip pos="4" side="tl" part="a_nbr"/>
	  <clip pos="4" side="tl" part="a_case"/>
          </lu>
    </chunk>
    </out>
      </action>
</rule>



<!-- 19.05.2016 tolyk durys emes-->
<!--rule comment="NEW RULE: det noun">   
  <pattern>
    <pattern-item n="det"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
    <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro>

<choose>
  <when>
    <test><or>
	 <equal><clip pos="1" side="sl" part="lem"/><lit v="их"/></equal>
	 <equal><clip pos="1" side="sl" part="lem"/><lit v="Их"/></equal>
   </or></test>
   <let><var n="case"/><lit-tag v="gen"/></let>
   <let><var n="number"/><lit-tag v="pl"/></let>
   <let><var n="possessive"/><lit-tag v="px3sp"/></let>
  </when>
  <otherwise>
   <let><var n="case"/><lit v=""/></let>
   <let><var n="possessive"/><lit-tag v="PXD"/></let>
  </otherwise>
</choose>

<choose>
  <when>
    <test><or>
	<equal><clip pos="1" side="sl" part="a_dem"/><lit-tag v="dem"/></equal>
 	<equal><clip pos="1" side="sl" part="a_dem"/><lit-tag v="qnt"/></equal>
   </or></test>
    <out>
    <chunk name="detdem-nom"  case="caseFirstWord">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="2" side="tl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><var n="possessive"/></tag> 
    <tag><lit-tag v="CD"/></tag>
    </tags>
      <lu>
      <clip pos="1" side="tl" part="lem"/>
      <clip pos="1" side="tl" part="a_det"/>
      <var n="number"/>
      <var n="case"/>
    </lu><b/>
    <lu><var n="NEW-noun_lu"/></lu>
    </chunk>
    </out>
  </when>
  
  <when> 
    <test><equal><clip pos="1" side="sl" part="a_poss"/><lit-tag v="pos"/></equal></test>
    <call-macro n="build-possessive-from-possessive-determiner"> <with-param pos="1"/> </call-macro>
    <out>
    <chunk name="detpos-nom" case="caseFirstWord">
    <tags> <tag><lit-tag v="NP"/></tag>
	<tag><var n="possessive"/></tag> 
	<tag><lit-tag v="p3"/></tag>
	<tag><clip pos="2" side="sl" part="a_nbr"/></tag> 
	<tag><var n="case"/></tag> 
	<tag><lit-tag v="CD"/></tag>  
    </tags>
    <lu>
	<clip pos="1" side="tl" part="lem"/>
	<clip pos="1" side="tl" part="a_nom"/>
	<clip pos="1" side="tl" part="a_nbr"/>
	<clip pos="1" side="tl" part="a_case"/>
    </lu><b/>
    <lu><var n="NEW-noun_lu"/></lu>
    </chunk>
    </out>
  </when>

  <otherwise>
    <call-macro n="process-preblank-1">
       <with-param pos="1"/>
       <with-param pos="2"/>
    </call-macro>
    <out>
    <chunk name="detart-nom">
    <tags> <tag><lit-tag v="NP"/></tag>
	<tag><clip pos="2" side="sl" part="a_nbr"/></tag> 
	<tag><lit-tag v="p3"/></tag> 
	<tag><lit-tag v="PXD"/></tag>
	<tag><lit-tag v="CD"/></tag> 
    </tags>
    <lu>
	<clip pos="1" side="tl" part="lem"/>
	<clip pos="1" side="tl" part="a_kaz_perspron"/>
	<clip pos="1" side="tl" part="a_pers"/>
	<clip pos="1" side="tl" part="a_nbr"/>
	<clip pos="1" side="tl" part="a_case"/>
    </lu><b/>
     <var n="preblank-1"/>
     <lu>  
     <get-case-from pos="1">
      <var n="NEW-noun_lu"/>
     </get-case-from>
     </lu>
    </chunk>
    </out>
    <call-macro n="out-blank-if-not-single-space"> <with-param pos="1"/> </call-macro>
  </otherwise>
</choose>
  </action>
</rule-->


<rule comment="NEW RULE: np ant noun"> <!-- Aliya 18.06.2017 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="np-ant"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="1"/> </call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>
    <out>
    <chunk name="np_ant-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_gender"/>
     <clip pos="2" side="tl" part="a_nbr"/>
     <lit-tag v="gen"/>
    </lu><b pos="1"/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <lit-tag v="2"/> 
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: noun noun-noun np org">    <!-- Aliya 19.06.2017 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="guio"/>
    <pattern-item n="n"/>
    <pattern-item n="np-org"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="1"/></call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="2"/></call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="3"/></call-macro> 
  <call-macro n="select-case"><with-param pos="4"/></call-macro>
    <out>
    <chunk name="n3-np_org">                         <!-- "большинство стран-членов ООН" - "БҰҰ-ГЕ мүше-елдердің көпшілігі" -->
    <tags> <tag><lit-tag v="NP"/></tag> </tags>
    <lu>
     <clip pos="5" side="tl" part="lem"/> 
     <clip pos="5" side="tl" part="a_nom"/>
     <lit-tag v="dat"/>
    </lu><b/>
    <lu>  
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <lit-tag v="sg"/>
     <lit-tag v="nom"/>
    </lu>
    <lu> <clip pos="3" side="tl" part="whole"/> </lu>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_nbr"/>
     <clip pos="2" side="tl" part="a_case"/>
    </lu><b/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <clip pos="1" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: prep noun-noun np">   <!-- Aliya 20.06.2017 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="guio"/>
    <pattern-item n="n"/>
    <pattern-item n="np-org"/>
  </pattern>
  <action>
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro> 
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-n-np-post2">      <!-- "через стран-членов ООН" - "БҰҰ-ГЕ мүше-елдер арқылы" -->
            <tags>
                <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
    <lu>
     <clip pos="5" side="tl" part="lem"/> 
     <clip pos="5" side="tl" part="a_nom"/>
     <lit-tag v="dat"/>
    </lu><b/>
    <lu>  
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <lit-tag v="sg"/>
     <lit-tag v="nom"/>
    </lu>
    <lu> <clip pos="3" side="tl" part="whole"/> </lu>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_nbr"/>
     <lit-tag v="4"/> <lit-tag v="5"/>
    </lu><b/>
    <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-n-np">             <!-- "из стран-членов ООН" - "БҰҰ-ГЕ мүше-елдерден" -->
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
    <lu>
     <clip pos="5" side="tl" part="lem"/> 
     <clip pos="5" side="tl" part="a_nom"/>
     <lit-tag v="dat"/>
    </lu><b/>
    <lu>  
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <lit-tag v="sg"/>
     <lit-tag v="nom"/>
    </lu>
    <lu> <clip pos="3" side="tl" part="whole"/> </lu>
    <lu>  
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_nbr"/>
     <lit-tag v="4"/> <lit-tag v="5"/>
    </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: noun-noun np org">    <!-- Aliya 19.06.2017 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="guio"/>
    <pattern-item n="n"/>
    <pattern-item n="np-org"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="1"/></call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="2"/></call-macro> 
  <call-macro n="select-case"><with-param pos="1"/></call-macro>
    <out>
    <chunk name="n-n-np_org">                          <!-- "стран-членов ООН" - "БҰҰ-ГЕ мүше-елдердің" -->
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <lit-tag v="dat"/>
    </lu><b/>
    <lu>  
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <lit-tag v="sg"/>
     <lit-tag v="nom"/>
    </lu>
    <lu>  
     <clip pos="2" side="tl" part="whole"/>
    </lu>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <clip pos="1" side="tl" part="a_nbr"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: np org noun">    <!-- Aliya 19.06.2017 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="np-org"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="1"/></call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="2"/></call-macro> 
  <call-macro n="select-case"><with-param pos="1"/></call-macro>
    <out>
    <chunk name="np_org-noun">                          <!-- "член ООН" - "-НЫҢ мүшесі" -->
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="gen"/>
    </lu><b pos="1"/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <lit-tag v="2"/> 
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: noun noun np">   <!-- Aliya 04.08.17 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>

    <out>
    <chunk name="n-n-np_anttopcog">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu><b/>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <clip pos="2" side="tl" part="a_case"/>
    </lu> <b/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <clip pos="1" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: noun noun noun">   <!-- Aliya 22.06.2017 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="1"/> </call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro> 
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>

    <out>
    <chunk name="n-n-n">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_nbr"/>
     <lit-tag v="nom"/>
    </lu> <b/>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="gen"/>
    </lu> <b/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <clip pos="1" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: prep noun 2 np_anttopcog">   <!-- Aliya 05.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-2np_anttopcog-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu> <b/>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-2np_anttopcog">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu> <b/>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>



<rule comment="NEW RULE: prep noun noun np_anttopcog">   <!-- Aliya 04.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-n-np_anttopcog-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu> <b/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="gen"/>
    </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-n-np_anttopcog">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_gender"/>
     <lit-tag v="nom"/>
    </lu> <b/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="gen"/>
    </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep np np noun">   <!-- Aliya 07.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="np-top"/>
    <pattern-item n="np-top"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="4"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-np2-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="nom"/>
    </lu> <b/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <lit-tag v="nom"/>
    </lu> <b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/> 
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-np2-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="nom"/>
    </lu> <b/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <lit-tag v="nom"/>
    </lu> <b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/> 
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep noun noun noun">   <!-- Aliya 22.06.2017 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro> 
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro> 
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-n-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_nbr"/>
     <lit-tag v="nom"/>
    </lu> <b/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="gen"/>
    </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-n-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_nbr"/>
     <lit-tag v="nom"/>
    </lu> <b/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="gen"/>
    </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: noun noun">   <!-- Aliya -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="1"/></call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="2"/></call-macro> 
  <call-macro n="select-case"><with-param pos="1"/></call-macro>

      <choose>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="loc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>

    <out>
    <chunk name="noun-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_nbr"/>
     <lit-tag v="gen"/>
    </lu><b pos="1"/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="px3sp"/>
     <var n="case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: noun nouon and noun">   <!-- Aliya 28.08.17 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="n"/>
  </pattern>
  <action>

      <choose>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="loc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="1" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>

    <out>
    <chunk name="n-n-and-n">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag> <!-- number placeholder -->
    <tag><lit-tag v="p3"/></tag> <!-- person placeholder -->
    <tag><lit-tag v="PXD"/></tag> <!-- possessor placeholder -->
    <tag><lit-tag v="CD"/></tag> <!-- case placeholder -->
    </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_nbr"/>
     <lit-tag v="gen"/>
    </lu><b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
    	       <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_nbr"/>
     <lit-tag v="gen"/>
    </lu><b/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="px3sp"/>
     <var n="case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: prep np noun">   <!-- Aliya 07.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="np-top"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="3"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="3"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-np-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="nom"/>
    </lu> <b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/> 
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-np-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="3" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="nom"/>
    </lu> <b/>
            <lu> 
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/> 
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep noun noun">   <!-- Aliya -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="2"/> </call-macro> 
     <call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="3"/> </call-macro> 
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu> <b pos="1"/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <clip pos="3" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu> <b pos="1"/>
            <lu>  <!-- build in situ for the time being -->
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="px3sp"/><!-- for possessive, just in case -->
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep noun and noun noun">   <!-- Aliya 31.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n-and-n-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="5" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <clip pos="5" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu> <b pos="1"/>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b pos="1"/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n-and-n-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="5" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag> 
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <clip pos="5" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu> <b pos="1"/>
            <lu>
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu><b pos="1"/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> 
               <lit-tag v="4"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: noun noun adj noun">   <!-- Aliya 11.07.17 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="n-gen"/>
    <pattern-item n="adj"/>
    <pattern-item n="n-gen"/>
  </pattern>
  <action>
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="1"/></call-macro> 
  <call-macro n="NEW-build-noun-lu-2-4-5"><with-param pos="2"/></call-macro> 
  <call-macro n="select-case"><with-param pos="1"/></call-macro>
<call-macro n="NEW-build-noun-lu-2-4-5"> <with-param pos="4"/> </call-macro> 
<call-macro n="build-adjec-lu"><with-param pos="3"/></call-macro> 
    <out>
    <chunk name="n-n-adj-n">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
        <lu><var n="adjec_lu"/></lu><b/>
	<lu>
          <clip pos="4" side="tl" part="lem"/>
	  <clip pos="4" side="tl" part="a_nom"/>
	  <clip pos="4" side="tl" part="a_nbr"/>
          <lit-tag v="px3sp"/>
	  <clip pos="4" side="tl" part="a_case"/>
          </lu><b/>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <clip pos="2" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="gen"/>
    </lu><b/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <lit-tag v="2"/>
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: prep noun, adj, adj noun">   <!-- Aliya 17.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n-prp"/>
    <pattern-item n="cm"/>
    <pattern-item n="adj"/>
    <pattern-item n="cm"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="7"/> </call-macro>
     <call-macro n="build-adjec-lu"><with-param pos="4"/></call-macro> 
     <call-macro n="build-adjec-lu1"><with-param pos="6"/></call-macro> 
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="7"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-n,adj,adj-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_nbr"/>
               <lit-tag v="4"/> 
               <lit-tag v="5"/>
            </lu> <b/>
            <lu><clip pos="3" side="tl" part="whole"/></lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu><clip pos="5" side="tl" part="whole"/></lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu>
               <clip pos="7" side="tl" part="lem"/> 
               <clip pos="7" side="tl" part="a_nom"/>
               <clip pos="7" side="tl" part="a_nbr"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-n,adj,adj-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>    
                <tag><lit-tag v="NP"/></tag>   
            </tags>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_nbr"/>
               <lit-tag v="4"/> 
               <lit-tag v="nom"/>
            </lu>
            <lu><clip pos="3" side="tl" part="whole"/></lu> <b/>
            <lu> <var n="adjec_lu"/> </lu>
            <lu><clip pos="5" side="tl" part="whole"/></lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu>
               <clip pos="7" side="tl" part="lem"/> 
               <clip pos="7" side="tl" part="a_nom"/>
               <clip pos="7" side="tl" part="a_nbr"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep adj, adj and adj noun">   <!-- Aliya 07.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adj"/>
    <pattern-item n="cm"/>
    <pattern-item n="adj"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
     <call-macro n="build-adjec-lu1"><with-param pos="4"/></call-macro> 
     <call-macro n="build-adjec-lu2"><with-param pos="6"/></call-macro> 
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="7"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adj,adj-and-adj-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu><clip pos="3" side="tl" part="whole"/></lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu>
    		 <clip pos="5" side="tl" part="lem"/> 
    		 <clip pos="5" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> <var n="adjec_lu2"/> </lu> <b/>
            <lu>
               <clip pos="7" side="tl" part="lem"/> 
               <clip pos="7" side="tl" part="a_nom"/>
               <clip pos="7" side="tl" part="a_nbr"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adj,adj-and-adj-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu>
            <lu><clip pos="3" side="tl" part="whole"/></lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu>
    		 <clip pos="5" side="tl" part="lem"/> 
    		 <clip pos="5" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> <var n="adjec_lu2"/> </lu> <b/>
            <lu>
               <clip pos="7" side="tl" part="lem"/> 
               <clip pos="7" side="tl" part="a_nom"/>
               <clip pos="7" side="tl" part="a_nbr"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep adj, adj, adj noun">   <!-- Aliya 07.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adj"/>
    <pattern-item n="cm"/>
    <pattern-item n="adj"/>
    <pattern-item n="cm"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="2"/> </call-macro>
     <call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
     <call-macro n="build-adjec-lu1"><with-param pos="4"/></call-macro> 
     <call-macro n="build-adjec-lu2"><with-param pos="6"/></call-macro> 
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="7"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adj,adj,adj-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu><clip pos="3" side="tl" part="whole"/></lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu>
            <lu><clip pos="5" side="tl" part="whole"/></lu><b/>
            <lu> <var n="adjec_lu2"/> </lu> <b/>
            <lu>
               <clip pos="7" side="tl" part="lem"/> 
               <clip pos="7" side="tl" part="a_nom"/>
               <clip pos="7" side="tl" part="a_nbr"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adj,adj,adj-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> 
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag> 
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu>
            <lu><clip pos="3" side="tl" part="whole"/></lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu>
            <lu><clip pos="5" side="tl" part="whole"/></lu><b/>
            <lu> <var n="adjec_lu2"/> </lu> <b/>
            <lu>
               <clip pos="7" side="tl" part="lem"/> 
               <clip pos="7" side="tl" part="a_nom"/>
               <clip pos="7" side="tl" part="a_nbr"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep adj and adj noun">      <!-- Aliya 17.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adj"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="5"/>
     </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="4"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adj-and-adj-n-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="5" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu> 
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adj-and-adj-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="5" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu> 
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: adj and adj noun">      <!-- Aliya 18.07.17 -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="3"/></call-macro> 
 
        <out>
          <chunk name="adj-and-adj-n">
            <tags> <tag><lit-tag v="NP"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
    		 <clip pos="2" side="tl" part="lem"/> 
    		 <clip pos="2" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/>
               <clip pos="4" side="tl" part="a_case"/>
            </lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: prep adj and adj noun noun">   <!-- Aliya 17.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adj"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="6"/> </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="4"/></call-macro> 
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="6"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adj-and-adj-n-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="6" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="6" side="tl" part="lem"/> 
               <clip pos="6" side="tl" part="a_nom"/>
               <clip pos="6" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adj-and-adj-n-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="6" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="6" side="tl" part="lem"/> 
               <clip pos="6" side="tl" part="a_nom"/>
               <clip pos="6" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu>
               <clip pos="5" side="tl" part="lem"/> 
               <clip pos="5" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep adj noun noun">   <!-- Aliya 17.07.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="select-case"> <with-param pos="4"/> </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="2"/></call-macro> 
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro> 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-adj-n-n-post2">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu> <b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-adj-n-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/>
               <lit-tag v="gen"/>
            </lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: prep det adj and adj noun">      <!-- Aliya 29.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="det"/>
    <pattern-item n="adj"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="6"/>
     </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="3"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="5"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-det-adj-and-adj-n-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="6" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
    		 <clip pos="2" side="tl" part="lem"/> 
    		 <clip pos="2" side="tl" part="a_det"/>
            </lu><b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
    		 <clip pos="4" side="tl" part="lem"/> 
    		 <clip pos="4" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu> 
               <clip pos="6" side="tl" part="lem"/> 
               <clip pos="6" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="4"/>
               <lit-tag v="5"/>
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-det-adj-and-adj-n">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="6" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu>
    		 <clip pos="2" side="tl" part="lem"/> 
    		 <clip pos="2" side="tl" part="a_det"/>
            </lu><b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu>
    		 <clip pos="4" side="tl" part="lem"/> 
    		 <clip pos="4" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu> 
               <clip pos="6" side="tl" part="lem"/> 
               <clip pos="6" side="tl" part="a_nom"/>
               <lit-tag v="2"/>
               <lit-tag v="px3sp"/>
               <lit-tag v="5"/>
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>



    <rule comment="RULE: DET">    <!-- Aliya 20.06.17 -->
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>
        <out>
          <chunk name="det1" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="PP"/></tag>
            </tags>
            <lu>
    		 <clip pos="1" side="tl" part="lem"/> 
    		 <clip pos="1" side="tl" part="a_det"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="RULE: abbr">    <!-- Aliya 30.06.17 -->
      <pattern>
        <pattern-item n="abbr"/>
      </pattern>
      <action>
        <out>
          <chunk name="abbr" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="AdvP"/></tag>
            </tags>
            <lu>
    		 <clip pos="1" side="tl" part="lem"/> 
    		 <clip pos="1" side="tl" part="a_abbr"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


<rule comment="NEW RULE: adv num">     <!-- Aliya 24.07.17 -->
  <pattern>
        <pattern-item n="bolee"/>
        <pattern-item n="num"/>
  </pattern>
  <action>
   <call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
    <out>
    <chunk name="bolee-num">
    <tags> <tag><lit-tag v="AdvP"/></tag> </tags>
    <lu> <var n="num_lu"/> </lu><b/>
    <lu>
          <lit v="астам"/>
          <lit-tag v="adv"/>	
   </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: prep V num-num adj noun"> <!-- Aliya 24.07.2017 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="num"/>
    <pattern-item n="guio"/>
    <pattern-item n="num"/>
    <pattern-item n="adj"/>
    <pattern-item n="nom"/>
  </pattern>
  <action>
<call-macro n="build-num-lu"><with-param pos="2"/></call-macro> 
<call-macro n="build-num-lu1"><with-param pos="4"/></call-macro> 
<call-macro n="build-adjec-lu"><with-param pos="5"/></call-macro> 
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="6"/>
      </call-macro>
 
      <choose>
         <when>
           <test><equal><clip side="sl" pos="6" part="a_case"/><lit-tag v="nom"/></equal></test>
           <let><var n="case"/><lit-tag v="nom"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="6" part="a_case"/><lit-tag v="gen"/></equal></test>
           <let><var n="case"/><lit-tag v="gen"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="6" part="a_case"/><lit-tag v="acc"/></equal></test>
           <let><var n="case"/><lit-tag v="acc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="6" part="a_case"/><lit-tag v="dat"/></equal></test>
           <let><var n="case"/><lit-tag v="dat"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="6" part="a_case"/><lit-tag v="prp"/></equal></test>
           <let><var n="case"/><lit-tag v="loc"/></let>
         </when>
         <when>
           <test><equal><clip side="sl" pos="6" part="a_case"/><lit-tag v="ins"/></equal></test>
           <let><var n="case"/><lit-tag v="ins"/></let>
         </when>
         <otherwise><let><var n="case"/><lit-tag v="CD"/></let></otherwise>
      </choose>

        <out>
          <chunk name="prepv-num-num-adj-n"> <!-- В 1921—1929 учебном году - 1921-1929 оқу жылында -->
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="6" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
	<lu><var n="num_lu"/></lu>
        <lu>
               <clip pos="3" side="tl" part="whole"/> 
        </lu>
	<lu><var n="num_lu1"/></lu> <b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
	<lu>
               <clip pos="6" side="tl" part="lem"/> 
               <clip pos="6" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="px3sp"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
	</lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: noun noun noun np">   <!-- Aliya 25.07.2017 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>

    <out>
    <chunk name="n-n-n-np_anttopcog">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu><b/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <clip pos="3" side="tl" part="a_case"/>
    </lu> <b/>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="gen"/>
    </lu> <b/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <clip pos="1" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: noun noun noun noun">   <!-- Aliya 07.08.2017 -->
  <pattern>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
  <call-macro n="select-case"> <with-param pos="1"/> </call-macro>

    <out>
    <chunk name="n-n-n-n">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="1" side="sl" part="a_nbr"/></tag>
    <tag><lit-tag v="p3"/></tag>
    <tag><lit-tag v="PXD"/></tag>
    <tag><lit-tag v="CD"/></tag>
    </tags>
    <lu>
     <clip pos="4" side="tl" part="lem"/> 
     <clip pos="4" side="tl" part="a_nom"/>
     <clip pos="4" side="tl" part="a_nbr"/>
     <lit-tag v="gen"/>
    </lu><b/>
    <lu>
     <clip pos="3" side="tl" part="lem"/> 
     <clip pos="3" side="tl" part="a_nom"/>
     <clip pos="3" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <clip pos="3" side="tl" part="a_case"/>
    </lu> <b/>
    <lu>
     <clip pos="2" side="tl" part="lem"/> 
     <clip pos="2" side="tl" part="a_nom"/>
     <lit-tag v="px3sp"/>
     <lit-tag v="gen"/>
    </lu> <b/>
    <lu>  
     <clip pos="1" side="tl" part="lem"/> 
     <clip pos="1" side="tl" part="a_nom"/>
     <clip pos="1" side="tl" part="a_nbr"/>
     <lit-tag v="px3sp"/>
     <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
  </action>
</rule>

<rule comment="RULE: noun ego noun"> <!-- Aliya 02.08.17 -->
      <pattern>
        <pattern-item n="n"/> 
        <pattern-item n="ego-detpos"/>
        <pattern-item n="nom"/> 
      </pattern>
      <action>
    <out>
    <chunk name="noun-ego-noun">
    <tags> <tag><lit-tag v="NP"/></tag>
    <tag><clip pos="3" side="tl" part="a_nbr"/></tag> 
    <tag><var n="possessive"/> </tag> 
    <tag><clip pos="3" side="tl" part="a_case"/></tag>
    </tags>
        <lu>
          <lit v="ол"/>
          <lit-tag v="prn.pers"/>
          <lit-tag v="p3"/>
          <lit-tag v="sg"/>
          <lit-tag v="gen"/>
        </lu>
       <b/>
       <lu>
               <clip pos="3" side="tl" part="lem"/> 
               <clip pos="3" side="tl" part="a_nom"/>
               <lit-tag v="px3sp"/>            
               <clip pos="3" side="tl" part="a_case"/>
    </lu>
       <b/>
       <lu>
               <clip pos="1" side="tl" part="lem"/> 
               <clip pos="1" side="tl" part="a_nom"/>
               <lit-tag v="px3sp"/>            
               <clip pos="1" side="tl" part="a_case"/>
    </lu>
    </chunk>
    </out>
      </action>
    </rule>


<rule comment="NEW RULE: prep noun adj noun">      <!-- Aliya 03.08.17 -->
  <pattern>
    <pattern-item n="prep"/>
    <pattern-item n="n-prp"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="4"/>
     </call-macro>
<call-macro n="build-adjec-lu1"><with-param pos="3"/></call-macro> 
 
     <choose>
      <when>  
       <test><equal><var n="genpp"/><lit v="yes"/></equal></test> 
        <out> <!-- with postposition -->
          <chunk name="prep-noun-adj-noun-post">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu>
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu><b/>
            <lu> <var n="postposition_lu"/> </lu>
          </chunk>
        </out>
      </when>
      <otherwise> <!-- without postposition -->
        <out>
          <chunk name="prep-noun-adj-noun">
            <tags> <tag><var n="pptag"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu> <b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="4"/> <!-- for possessive, just in case -->
               <lit-tag v="5"/> <!-- for case -->
            </lu>
          </chunk>
        </out>
      </otherwise>
    </choose>
  </action>
</rule>


<rule comment="NEW RULE: verb verb"> <!-- Aliya 04.08.17 -->
  <pattern>
    <pattern-item n="verb-past"/>
    <pattern-item n="verb"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>
      <when>
        <test><and><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="past"/></equal>
				    <equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></and></test>
           <let><clip pos="1" side="tl" part="a_tense"/><lit-tag v="ifi"/></let>
           <let><clip pos="2" side="tl" part="a_tense"/><lit-tag v="ger"/></let>
      </when>
    </choose>
    <out>
    <chunk name="verb-past+verb-inf"> <!-- предпочитали оставаться - қалуды жақтады -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="acc"/>
        </lu><b/>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
	  <clip pos="1" side="tl" part="a_tense"/>
          <lit-tag v="3"/>
          <lit-tag v="2"/>
        </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: verb verb"> <!-- Aliya 05.08.17 -->
  <pattern>
    <pattern-item n="verb-pprs"/>
    <pattern-item n="verb"/>
  </pattern>
  <action>
     <call-macro n="default-nbr-pers"/>
    <choose>
      <when>
        <test><and><equal><clip pos="1" side="sl" part="a_tense"/><lit-tag v="pprs"/></equal>
				    <equal><clip pos="2" side="sl" part="a_tense"/><lit-tag v="inf"/></equal></and></test>
           <let><clip pos="2" side="tl" part="a_tense"/><lit-tag v="ger"/></let>
      </when>
    </choose>
    <out>
    <chunk name="verb-pprs+verb-inf"> <!-- стремящейся определять - белгілеуге тырысатын -->
      <tags>
        <tag><lit-tag v="VP"/></tag>
        <tag><lit-tag v="ND"/></tag> <!-- number -->
        <tag><lit-tag v="PD"/></tag> <!-- person -->
        <tag><var n="tense"/></tag>  <!-- tense/conditionality -->
        <tag><lit-tag v="PXD"/></tag> <!-- possessives for verbs??? maybe we need them -->
        <tag><lit-tag v="NXD"/></tag><!-- negative -->
        <tag><lit-tag v="CD"/></tag> 
      </tags>
        <lu>
          <clip pos="2" side="tl" part="lem"/>
	  <clip pos="2" side="tl" part="a_kaz_verb"/>
          <lit-tag v="ger"/>
          <lit-tag v="dat"/>
        </lu><b/>
        <lu>
          <clip pos="1" side="tl" part="lem"/>
	  <clip pos="1" side="tl" part="a_kaz_verb"/>
          <lit-tag v="gpr_impf"/>
        </lu>
    </chunk>
    </out>
  </action>
</rule>


<rule comment="NEW RULE: adj noun and noun">      <!-- Aliya 05.08.17 -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="cnjcoo"/>
    <pattern-item n="n"/>
  </pattern>
  <action>
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 
 
        <out>
          <chunk name="adj-n-and-n">
            <tags> <tag><lit-tag v="NP"/></tag>
                <tag><clip pos="4" part="a_nbr" side="sl"/></tag>
                <tag><lit-tag v="p3"/></tag>
                <tag><lit-tag v="PXD"/></tag>
                <tag><var n="case"/></tag>       
            </tags>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <clip pos="2" side="tl" part="a_nbr"/>
               <clip pos="2" side="tl" part="a_case"/>
            </lu><b/>
            <lu>
    		 <clip pos="3" side="tl" part="lem"/> 
    		 <clip pos="3" side="tl" part="a_cnjcoo"/>
            </lu><b/>
            <lu> 
               <clip pos="4" side="tl" part="lem"/> 
               <clip pos="4" side="tl" part="a_nom"/>
               <clip pos="4" side="tl" part="a_nbr"/>
               <clip pos="4" side="tl" part="a_case"/>
            </lu>
          </chunk>
        </out>
  </action>
</rule>


<rule comment="NEW RULE: adj noun np adj noun">      <!-- Aliya 24.08.2017 -->
  <pattern>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="adj"/>
    <pattern-item n="n"/>
    <pattern-item n="np-anttopcog"/>
  </pattern>
  <action>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="1"/>
        <with-param pos="2"/>
     </call-macro>
     <call-macro n="choose_case_and_postposition2">
        <with-param pos="3"/>
        <with-param pos="4"/>
     </call-macro>
<call-macro n="build-adjec-lu"><with-param pos="1"/></call-macro> 
<call-macro n="build-adjec-lu1"><with-param pos="3"/></call-macro> 
 
        <out>
          <chunk name="adj-n-np-adj-n">
            <tags> <tag><lit-tag v="NP"/></tag>
                <tag><clip pos="2" part="a_nbr" side="sl"/></tag> <!-- number -->
                <tag><lit-tag v="p3"/></tag> <!-- person is 3 for nouns -->
                <tag><lit-tag v="PXD"/></tag> <!-- just in case -->
                <tag><var n="case"/></tag>       
            </tags>
    <lu>
     <clip pos="5" side="tl" part="lem"/> 
     <clip pos="5" side="tl" part="a_nom"/>
     <clip pos="5" side="tl" part="a_gender"/>
     <lit-tag v="gen"/>
    </lu><b/>
            <lu> <var n="adjec_lu1"/> </lu> <b/>
	<lu>
          <clip pos="4" side="tl" part="lem"/>
	  <clip pos="4" side="tl" part="a_nom"/>
	  <clip pos="4" side="tl" part="a_nbr"/>
          <lit-tag v="px3sp"/>
	  <clip pos="4" side="tl" part="a_case"/>
          </lu><b/>
            <lu> <var n="adjec_lu"/> </lu> <b/>
            <lu> 
               <clip pos="2" side="tl" part="lem"/> 
               <clip pos="2" side="tl" part="a_nom"/>
               <lit-tag v="2"/> <!-- number -->
               <lit-tag v="px3sp"/> <!-- for possessive, just in case -->
	      <clip pos="2" side="tl" part="a_case"/>
            </lu>
          </chunk>
        </out>
  </action>
</rule>





<!--rules from experiment of structural phrase -->

<!--rule>
  <pattern>
    <pattern-item n="CAT__vblex_"/>
  </pattern>
  <action>
    <choose>
      <when>
        <test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="v"/>
            </begins-with>
           
    <equal>
                 <clip pos="1" side="tl" part="a_pers"/>
                 <lit-tag v="p2"/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="a_possessive"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="a_case"/>
                 <lit v=""/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Рассказать"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Рассказать"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__vblex_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="Мен"/>
            <lit-tag v="prn"/>
            <lit-tag v="pers"/>
            <clip pos="1" side="sl" part="a_neg"/>
            <lit-tag v="p1"/>
            <clip pos="1" side="sl" part="a_gender"/>
            <clip pos="1" side="sl" part="a_rel"/>
            <clip pos="1" side="sl" part="a_nbr"/>
            <lit-tag v="dat"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule1"/></lu></out></when>
      <when>
        <test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="vblex"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="a_pers"/>
                 <lit v=""/>
               </equal>
               <equal>
                 <clip pos="1" side="tl" part="a_nbr"/>
                 <lit v=""/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Мыть"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Мыть"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__vblex_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="Мен"/>
            <lit-tag v="prn"/>
            <lit-tag v="pers"/>
            <clip pos="1" side="sl" part="a_neg"/>
            <lit-tag v="p1"/>
            <clip pos="1" side="sl" part="a_gender"/>
            <clip pos="1" side="sl" part="a_rel"/>
            <lit-tag v="sg"/>
            <lit-tag v="gen"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule2"/></lu></out></when>
      <otherwise>
<out><chunk name="any" case="caseFirstWord">
<tags>             
<tag>
<lit-tag v="LRN"/></tag>       
</tags> 
<lu>
<clip pos="1" side="tl" part="whole"/>
</lu>
</chunk>
</out> 
<out>
<lu><lit v="*isolatedword"/>
</lu>
</out>
<out> <lu>
<lit v="*wordforword1"/>
</lu> </out>
</otherwise>
    </choose>
  </action>
</rule-->

<!--rule>
  <pattern>
    <pattern-item n="CAT__vblex_"/>
    <pattern-item n="CAT__adv_"/>
  </pattern>
  <action>
    <choose>
      <when>
        <test>
        <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="vblex"/>
            </begins-with>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="занять"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Занять"/>
            </equal>
            </or>
           <and>
            <begins-with>
              <clip pos="2" side="tl" part="tags" />
              <lit-tag v="adv"/>
            </begins-with>
               <equal>
                 <clip pos="2" side="tl" part="a_adv"/>
                 <lit v=""/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="2" side="sl" part="lem" />
              <lit v="несколько"/>
            </equal>
            <equal>
              <clip pos="2" side="sl" part="lem" />
              <lit v="Несколько"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__vblex___adv_" case="caseFirstWord">       <tags>             
<tag><lit-tag v="LRN"/>
</tag>       
</tags>          
<lu>
            <lit v="бірнеше"/>
            <lit-tag v="det"/>
            <lit-tag v="qnt"/>
            <clip pos="1" side="sl" part="a_gender"/>
            <clip pos="1" side="sl" part="a_rel"/>
            <clip pos="1" side="sl" part="a_nbr"/>
            <lit v=""/>
          </lu>
          <b pos="1"/>
      </chunk>
      </out>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
<out><lu><lit v="*executedtule3"/></lu></out></when>
<out><chunk name="any" case="caseFirstWord">
<tags>             
<tag><lit-tag v="LRN"/></tag>       
</tags> 
<lu><clip pos="1" side="tl" part="whole"/></lu>
</chunk>
</out> 
<out><lu><lit v="*isolatedword"/></lu></out>
<out><lu><lit v="*wordforword2"/></lu></out>
</otherwise>
    </choose>
  </action>
</rule-->


<!--rule>
  <pattern>
    <pattern-item n="CAT__prn_"/>
  </pattern>
  <action>
    <choose>
      <when>
        <test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="prn"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="a_formality"/>
                 <lit v=""/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Это"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Это"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__prn_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="Бұл"/>
            <lit-tag v="det"/>
            <lit-tag v="dem"/>
            <clip pos="1" side="sl" part="a_rel"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule4"/></lu></out></when>
      <when>
        <test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="prn"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="a_formality"/>
                 <lit v=""/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="это"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Это"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__prn_1" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="бұл"/>
            <lit-tag v="prn"/>
            <clip pos="1" side="sl" part="a_det"/>
            <clip pos="1" side="sl" part="a_formality"/>

            <clip pos="1" side="sl" part="a_neg"/>
            <clip pos="1" side="sl" part="a_pers"/>
            <clip pos="1" side="sl" part="a_possessive"/>
            <clip pos="1" side="sl" part="a_rel"/>
            <clip pos="1" side="sl" part="a_case"/>
            <clip pos="1" side="sl" part="a_adv"/>

            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule5"/></lu></out></when>
      <when>
        <test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="prn"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="a_formality"/>
                 <lit v=""/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="что"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Что"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__prn_2" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="бұл"/>
            <lit-tag v="det"/>
            <lit-tag v="dem"/>
            <clip pos="1" side="sl" part="a_rel"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule6"/></lu></out></when>
      <when>
        <test>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="prn"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="a_formality"/>
                 <lit v=""/>
               </equal>
           </and>
        </test>
       <out>
       <chunk name="__prn_3" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <clip pos="1" side="tl" part="lemh"/>
            <lit-tag v="prn"/>
            <clip pos="1" side="sl" part="a_det"/>
            <clip pos="1" side="sl" part="a_formality"/>
            <clip pos="1" side="sl" part="a_neg"/>
            <clip pos="1" side="sl" part="a_pers"/>
            <clip pos="1" side="sl" part="a_possessive"/>
            <clip pos="1" side="sl" part="a_rel"/>
            <clip pos="1" side="sl" part="a_nbr"/>
            <clip pos="1" side="sl" part="a_case"/>
            <clip pos="1" side="sl" part="a_adv"/>
            <clip pos="1" side="tl" part="lemq"/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule7"/></lu></out></when>
      <otherwise>
<out><chunk name="any" case="caseFirstWord">
<tags>             <tag><lit-tag v="LRN"/></tag>       </tags> 
<lu><clip pos="1" side="tl" part="whole"/></lu></chunk></out> 
<out><lu><lit v="*isolatedword"/></lu></out>
<out><lu><lit v="*wordforword3"/></lu></out>
</otherwise>
    </choose>
  </action>
</rule-->


<!--rule>
  <pattern>
    <pattern-item n="CAT__pr_"/>
  </pattern>
  <action>
    <choose>
      <when>
        <test>
        <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="pr"/>
            </begins-with>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="из"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Из"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__pr_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="да"/>
            <lit-tag v="cnjcoo"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule8"/></lu></out></when>
      <when>
        <test>
        <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="pr"/>
            </begins-with>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="В"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="В"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__pr_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="Бұл"/>
            <lit-tag v="det"/>
            <lit-tag v="dem"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule9"/></lu></out></when>
      <otherwise>
<out><chunk name="any" case="caseFirstWord">
<tags>             <tag><lit-tag v="LRN"/></tag>       </tags>
 <lu><clip pos="1" side="tl" part="whole"/></lu></chunk></out> 
<out><lu><lit v="*isolatedword"/></lu></out>
<out><lu><lit v="*wordforword4"/></lu></out>
</otherwise>
    </choose>
  </action>
</rule-->

<!--rule>
  <pattern>
    <pattern-item n="CAT__det_"/>
  </pattern>
  <action>
    <choose>
      <when>
        <test>
        <and>
           <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="det"/>
            </begins-with>
               <equal>
                 <clip pos="1" side="tl" part="a_nbr"/>
                 <lit-tag v="sg"/>
               </equal>
           </and>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Наш"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Наш"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__det_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="Біз"/>
            <lit-tag v="prn"/>
            <lit-tag v="pers"/>
            <lit-tag v="p1"/>
            <clip pos="1" side="sl" part="a_rel"/>
            <lit-tag v="pl"/>
            <lit-tag v="gen"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule10"/></lu></out></when>
      <otherwise>
<out><chunk name="any" case="caseFirstWord">
<tags>             <tag><lit-tag v="LRN"/></tag>       </tags> 
<lu><clip pos="1" side="tl" part="whole"/></lu></chunk></out>
<out><lu><lit v="*isolatedword"/></lu></out>
<out><lu><lit v="*wordforword5"/></lu></out>
</otherwise>
    </choose>
  </action>
</rule-->


<!--rule>
  <pattern>
    <pattern-item n="CAT__cnjcoo_"/>
  </pattern>
  <action>
    <choose>
      <when>
        <test>
        <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="cnjcoo"/>
            </begins-with>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="и"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="И"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__cnjcoo_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="және"/>
            <lit-tag v="cnjcoo"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule11"/></lu></out></when>
      <when>
        <test>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="cnjcoo"/>
            </begins-with>
        </test>
       <out>
       <chunk name="__cnjcoo_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <clip pos="1" side="tl" part="lemh"/>
            <lit-tag v="cnjcoo"/>

            <clip pos="1" side="tl" part="lemq"/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule12"/></lu></out></when>
      <otherwise>
<out><chunk name="any" case="caseFirstWord">
<tags>             <tag><lit-tag v="LRN"/></tag>       </tags> 
<lu><clip pos="1" side="tl" part="whole"/></lu></chunk></out> 
<out><lu><lit v="*isolatedword"/></lu></out>
<out><lu><lit v="*wordforword6"/></lu></out>
</otherwise>
    </choose>
  </action>
</rule-->



<!--rule>
  <pattern>
    <pattern-item n="CAT__cnjcoo_"/>
    <pattern-item n="CAT__prn_"/>
  </pattern>
  <action>
    <choose>
      <when>
        <test>
        <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="cnjcoo"/>
            </begins-with>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="и"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="И"/>
            </equal>
            </or>
           <and>
            <begins-with>
              <clip pos="2" side="tl" part="tags" />
              <lit-tag v="prn"/>
            </begins-with>
               <equal>
                 <clip pos="2" side="tl" part="a_formality"/>
                 <lit v=""/>
               </equal>
           </and>
        </and>
        </test>
       <out>
       <chunk name="__cnjcoo___prn_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="Және"/>
            <lit-tag v="cnjcoo"/>

            <lit v=""/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <lit-tag v="prn"/>
            <clip pos="2" side="sl" part="a_det"/>
            <clip pos="2" side="sl" part="a_formality"/>
            <clip pos="2" side="sl" part="a_neg"/>
            <clip pos="2" side="sl" part="a_pers"/>
            <clip pos="2" side="sl" part="a_possessive"/>
            <clip pos="2" side="sl" part="a_rel"/>
            <clip pos="2" side="sl" part="a_nbr"/>
            <clip pos="2" side="sl" part="a_case"/>
            <clip pos="2" side="sl" part="a_adv"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule13"/></lu></out></when>
      <otherwise>
<out><chunk name="any" case="caseFirstWord">
<tags>             <tag><lit-tag v="LRN"/></tag>       </tags>
 <lu><clip pos="1" side="tl" part="whole"/></lu></chunk></out> 
<out><lu><lit v="*isolatedword"/></lu></out>
<out><lu><lit v="*wordforword7"/></lu></out>
</otherwise>
    </choose>
  </action>
</rule>



<rule>
  <pattern>
    <pattern-item n="CAT__cnjadv_"/>
  </pattern>
  <action>
    <choose>
      <when>
        <test>
        <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="cnjadv"/>
            </begins-with>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Как"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Как"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__cnjadv_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="Сен"/>
            <lit-tag v="prn"/>
            <lit-tag v="pers"/>
            <lit-tag v="p2"/>
            <lit-tag v="sg"/>
            <lit-tag v="gen"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule14"/></lu></out></when>
      <when>
        <test>
        <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="cnjadv"/>
            </begins-with>
            <or>            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="как"/>
            </equal>
            <equal>
              <clip pos="1" side="sl" part="lem" />
              <lit v="Как"/>
            </equal>
            </or>
        </and>
        </test>
       <out>
       <chunk name="__cnjadv_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <lit v="сен"/>
            <lit-tag v="prn"/>
            <lit-tag v="pers"/>
            <lit-tag v="p2"/>
            <lit-tag v="sg"/>
            <lit-tag v="gen"/>
            <lit v=""/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule15"/></lu></out></when>
      <otherwise>
<out><chunk name="any" case="caseFirstWord">
<tags>             <tag><lit-tag v="LRN"/></tag>       </tags> 
<lu><clip pos="1" side="tl" part="whole"/></lu></chunk></out> 
<out><lu><lit v="*isolatedword"/></lu></out>
<out><lu><lit v="*wordforword8"/></lu></out>
</otherwise>
    </choose>
  </action>
</rule-->


<!--<rule>
  <pattern>
    <pattern-item n="CAT__adj_"/>
    <pattern-item n="CAT__n_"/>
  </pattern>
  <action>
    <choose>
      <when>
    <test>
        <and>
            <begins-with>
              <clip pos="1" side="tl" part="tags" />
              <lit-tag v="adj"/>
            </begins-with>
            <begins-with>
              <clip pos="2" side="tl" part="tags" />
              <lit-tag v="n"/>
            </begins-with>
        </and>
        </test>
       <out>
       <chunk name="__adj___n_" case="caseFirstWord">       <tags>             <tag><lit-tag v="LRN"/></tag>       </tags>          <lu>
            <clip pos="1" side="tl" part="lemh"/>
            <lit-tag v="adj"/>
            <clip pos="1" side="sl" part="learned_iscmp"/>
            <clip pos="1" side="sl" part="learned_isshort"/>
            <clip pos="1" side="sl" part="learned_attruse"/>
            <clip pos="1" side="sl" part="learned_issim"/>
            <clip pos="1" side="sl" part="a_possessive"/>
            <clip pos="1" side="sl" part="learned_atadvl"/>
            <clip pos="1" side="tl" part="lemq"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" side="tl" part="lemh"/>
            <lit-tag v="n"/>
            <clip pos="2" side="sl" part="learned_issim"/>
            <clip pos="2" side="sl" part="a_possessive"/>
            <clip pos="2" side="sl" part="a_formality"/>
            <clip pos="2" side="sl" part="a_case"/>
            <clip pos="2" side="sl" part="learned_attruse"/>
            <clip pos="2" side="tl" part="lemq"/>
          </lu>
      </chunk>
      </out>
<out><lu><lit v="*executedtule16"/></lu></out></when>
      <otherwise>
<out><chunk name="any" case="caseFirstWord">
<tags>             <tag><lit-tag v="LRN"/></tag>       </tags>
 <lu><clip pos="1" side="tl" part="whole"/></lu></chunk></out> 
<out><lu><lit v="*isolatedword"/></lu></out>
<out><lu><lit v="*wordforword9"/></lu></out>
</otherwise>
    </choose>
  </action>
</rule>


<rule>
  <pattern>
    <pattern-item n="CAT__ND_GD"/>
  </pattern>
  <action>
  <call-macro n="f_set_genre_num">
    <with-param pos="1"/>
  </call-macro>
  <out>
    <lu>
      <clip pos="1" side="tl" part="whole"/>
    </lu>
  </out>
<out><lu><lit v="*isolatedword"/></lu></out></action>
</rule>


<rule>
<pattern>
<pattern-item n="CAT__HASGENDER_NUMBER"/></pattern>
<action> 
<call-macro n="f_genre_num">
<with-param pos="1"/></call-macro> 
<call-macro n="f_set_genre_num"><with-param pos="1"/></call-macro> <out><lu><clip pos="1" side="tl" part="whole"/></lu></out> 
<out><lu><lit v="*isolatedword"/></lu></out></action>
</rule>-->


<!--<rule>
<pattern>
<pattern-item n="sent"/></pattern>
<action> <let><var n="number"/> <lit-tag v="sg"/></let>
<let><var n="genre"/><lit-tag v="m"/></let> 
<out><lu><clip pos="1" side="tl" part="whole"/></lu></out>
<out><lu><lit v="*isolatedword"/></lu></out></action>
</rule>


<rule>
<pattern>
<pattern-item n="any"/></pattern>
<action>  <out><chunk name="any" case="caseFirstWord"><tags>             <tag><lit-tag v="LRN"/></tag>       </tags>  
 <lu><clip pos="1" side="tl" part="whole"/></lu></chunk></out> 
<out><lu><lit v="*isolatedword"/></lu></out></action>
</rule>-->


  </section-rules>

</transfer>
